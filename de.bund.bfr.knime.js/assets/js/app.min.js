!function(e,t){e.Popper=function(){"use strict";function e(e){return e&&"[object Function]"==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return/(auto|scroll|overlay)/.test(r+s+p)?e:n(o(e))}function r(e){return 11===e?re:10===e?pe:re||pe}function p(e){if(!e)return document.documentElement;for(var o=r(10)?document.body:null,n=e.offsetParent;n===o&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===t(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function d(e){return null===e.parentNode?e:d(e.parentNode)}function a(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=o?e:t,i=o?t:e,r=document.createRange();r.setStart(n,0),r.setEnd(i,0);var l=r.commonAncestorContainer;if(e!==l&&t!==l||n.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||p(e.firstElementChild)===e)}(l)?l:p(l);var f=d(e);return f.host?a(f.host,t):a(e,d(t).host)}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",o="top"===t?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||i;return r[o]}return e[o]}function f(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=l(t,"top"),i=l(t,"left"),r=o?-1:1;return e.top+=n*r,e.bottom+=n*r,e.left+=i*r,e.right+=i*r,e}function m(e,t){var o="x"===t?"Left":"Top",n="Left"==o?"Right":"Bottom";return parseFloat(e["border"+o+"Width"],10)+parseFloat(e["border"+n+"Width"],10)}function h(e,t,o,n){return $(t["offset"+e],t["scroll"+e],o["client"+e],o["offset"+e],o["scroll"+e],r(10)?o["offset"+e]+n["margin"+("Height"===e?"Top":"Left")]+n["margin"+("Height"===e?"Bottom":"Right")]:0)}function c(){var e=document.body,t=document.documentElement,o=r(10)&&getComputedStyle(t);return{height:h("Height",e,t,o),width:h("Width",e,t,o)}}function g(e){return le({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};try{if(r(10)){o=e.getBoundingClientRect();var n=l(e,"top"),i=l(e,"left");o.top+=n,o.left+=i,o.bottom+=n,o.right+=i}else o=e.getBoundingClientRect()}catch(t){}var p={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},s="HTML"===e.nodeName?c():{},d=s.width||e.clientWidth||p.right-p.left,a=s.height||e.clientHeight||p.bottom-p.top,f=e.offsetWidth-d,h=e.offsetHeight-a;if(f||h){var u=t(e);f-=m(u,"x"),h-=m(u,"y"),p.width-=f,p.height-=h}return g(p)}function b(e,o){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=r(10),s="HTML"===o.nodeName,d=u(e),a=u(o),l=n(e),m=t(o),h=parseFloat(m.borderTopWidth,10),c=parseFloat(m.borderLeftWidth,10);i&&"HTML"===o.nodeName&&(a.top=$(a.top,0),a.left=$(a.left,0));var b=g({top:d.top-a.top-h,left:d.left-a.left-c,width:d.width,height:d.height});if(b.marginTop=0,b.marginLeft=0,!p&&s){var y=parseFloat(m.marginTop,10),w=parseFloat(m.marginLeft,10);b.top-=h-y,b.bottom-=h-y,b.left-=c-w,b.right-=c-w,b.marginTop=y,b.marginLeft=w}return(p&&!i?o.contains(l):o===l&&"BODY"!==l.nodeName)&&(b=f(b,o)),b}function y(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=b(e,o),i=$(o.clientWidth,window.innerWidth||0),r=$(o.clientHeight,window.innerHeight||0),p=t?0:l(o),s=t?0:l(o,"left"),d={top:p-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r};return g(d)}function w(e){var n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===t(e,"position")||w(o(e)))}function E(e){if(!e||!e.parentElement||r())return document.documentElement;for(var o=e.parentElement;o&&"none"===t(o,"transform");)o=o.parentElement;return o||document.documentElement}function v(e,t,i,r){var p=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},d=p?E(e):a(e,t);if("viewport"===r)s=y(d,p);else{var l;"scrollParent"===r?"BODY"===(l=n(o(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===r?e.ownerDocument.documentElement:r;var f=b(l,d,p);if("HTML"!==l.nodeName||w(d))s=f;else{var m=c(),h=m.height,g=m.width;s.top+=f.top-f.marginTop,s.bottom=h+f.top,s.left+=f.left-f.marginLeft,s.right=g+f.left}}return s.left+=i,s.top+=i,s.right-=i,s.bottom-=i,s}function O(e,t,o,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var p=v(o,n,r,i),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return le({key:e},s[e],{area:function(e){var t=e.width,o=e.height;return t*o}(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split("-")[1];return l+(f?"-"+f:"")}function L(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=n?E(t):a(t,o);return b(o,i,n)}function S(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),n=parseFloat(t.marginLeft)+parseFloat(t.marginRight),i={width:e.offsetWidth+n,height:e.offsetHeight+o};return i}function T(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function C(e,t,o){o=o.split("-")[0];var n=S(e),i={width:n.width,height:n.height},r=-1!==["right","left"].indexOf(o),p=r?"top":"left",s=r?"left":"top",d=r?"height":"width",a=r?"width":"height";return i[p]=t[p]+t[d]/2-n[d]/2,i[s]=o===s?t[s]-n[a]:t[T(s)],i}function D(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function P(t,o,n){var i=void 0===n?t:t.slice(0,function(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var n=D(e,function(e){return e[t]===o});return e.indexOf(n)}(t,"name",n));return i.forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&e(n)&&(o.offsets.popper=g(o.offsets.popper),o.offsets.reference=g(o.offsets.reference),o=n(o,t))}),o}function W(e,t){return e.some(function(e){var o=e.name,n=e.enabled;return n&&o===t})}function B(e){for(var t=[!1,"ms","Webkit","Moz","O"],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var i=t[n],r=i?""+i+o:e;if(void 0!==document.body.style[r])return r}return null}function A(e){var t=e.ownerDocument;return t?t.defaultView:window}function I(e,t,o,i){o.updateBound=i,A(e).addEventListener("resize",o.updateBound,{passive:!0});var r=n(e);return function M(e,t,o,i){var r="BODY"===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||M(n(p.parentNode),t,o,i),i.push(p)}(r,"scroll",o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function U(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,A(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach(function(o){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(o)&&Y(t[o])&&(n="px"),e.style[o]=t[o]+n})}function q(e,t,o){var n=D(e,function(e){var o=e.name;return o===t}),i=!!n&&e.some(function(e){return e.name===o&&e.enabled&&e.order<n.order});if(!i){var r="`"+t+"`";console.warn("`"+o+"` modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return i}function z(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=me.indexOf(e),n=me.slice(o+1).concat(me.slice(0,o));return t?n.reverse():n}function _(e,t,o,n){var i=[0,0],r=-1!==["right","left"].indexOf(n),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(D(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return(a=a.map(function(e,n){var i=(1===n?!r:r)?"height":"width",p=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,o,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],p=i[2];if(!r)return e;if(0===p.indexOf("%")){var s;switch(p){case"%p":s=o;break;case"%":case"%r":default:s=n}var d=g(s);return d[t]/100*r}return"vh"===p||"vw"===p?("vh"===p?$(document.documentElement.clientHeight,window.innerHeight||0):$(document.documentElement.clientWidth,window.innerWidth||0))/100*r:r}(e,i,t,o)})})).forEach(function(e,t){e.forEach(function(o,n){Y(o)&&(i[t]+=o*("-"===e[n-1]?-1:1))})}),i}for(var J=Math.min,Q=Math.round,Z=Math.floor,$=Math.max,ee="undefined"!=typeof window&&"undefined"!=typeof document,te=["Edge","Trident","Firefox"],oe=0,ne=0;ne<te.length;ne+=1)if(ee&&0<=navigator.userAgent.indexOf(te[ne])){oe=1;break}var ie=ee&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},oe))}},re=ee&&!(!window.MSInputMethodContext||!document.documentMode),pe=ee&&/MSIE 10/.test(navigator.userAgent),se=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},de=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),ae=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},le=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},fe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],me=fe.slice(3),he={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},ce=function(){function t(o,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};se(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=ie(this.update.bind(this)),this.options=le({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(le({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=le({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return le({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return de(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=C(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,W(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[B("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=I(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return U.call(this)}}]),t}();return ce.Utils=("undefined"==typeof window?global:window).PopperUtils,ce.placements=fe,ce.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split("-")[0],n=t.split("-")[1];if(n){var i=e.offsets,r=i.reference,p=i.popper,s=-1!==["bottom","top"].indexOf(o),d=s?"left":"top",a=s?"width":"height",l={start:ae({},d,r[d]),end:ae({},d,r[d]+r[a]-p[a])};e.offsets.popper=le({},p,l[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var o,n=t.offset,i=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=i.split("-")[0];return o=Y(+n)?[+n,0]:_(n,p,s,d),"left"===d?(p.top+=o[0],p.left-=o[1]):"right"===d?(p.top+=o[0],p.left+=o[1]):"top"===d?(p.left+=o[0],p.top-=o[1]):"bottom"===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||p(e.instance.popper);e.instance.reference===o&&(o=p(o));var n=B("transform"),i=e.instance.popper.style,r=i.top,s=i.left,d=i[n];i.top="",i.left="",i[n]="";var a=v(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=r,i.left=s,i[n]=d,t.boundaries=a;var l=t.priority,f=e.offsets.popper,m={primary:function(e){var o=f[e];return f[e]<a[e]&&!t.escapeWithReference&&(o=$(f[e],a[e])),ae({},e,o)},secondary:function(e){var o="right"===e?"left":"top",n=f[o];return f[e]>a[e]&&!t.escapeWithReference&&(n=J(f[o],a[e]-("right"===e?f.width:f.height))),ae({},o,n)}};return l.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";f=le({},f,m[t](e))}),e.offsets.popper=f,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,i=e.placement.split("-")[0],r=Z,p=-1!==["top","bottom"].indexOf(i),s=p?"right":"bottom",d=p?"left":"top",a=p?"width":"height";return o[s]<r(n[d])&&(e.offsets.popper[d]=r(n[d])-o[a]),o[d]>r(n[s])&&(e.offsets.popper[d]=r(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var n;if(!q(e.instance.modifiers,"arrow","keepTogether"))return e;var i=o.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==["left","right"].indexOf(r),l=a?"height":"width",f=a?"Top":"Left",m=f.toLowerCase(),h=a?"left":"top",c=a?"bottom":"right",u=S(i)[l];d[c]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[c]-u)),d[m]+u>s[c]&&(e.offsets.popper[m]+=d[m]+u-s[c]),e.offsets.popper=g(e.offsets.popper);var b=d[m]+d[l]/2-u/2,y=t(e.instance.popper),w=parseFloat(y["margin"+f],10),E=parseFloat(y["border"+f+"Width"],10),v=b-e.offsets.popper[m]-w-E;return v=$(J(s[l]-u,v),0),e.arrowElement=i,e.offsets.arrow=(ae(n={},m,Q(v)),ae(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],i=T(n),r=e.placement.split("-")[1]||"",p=[];switch(t.behavior){case he.FLIP:p=[n,i];break;case he.CLOCKWISE:p=z(n);break;case he.COUNTERCLOCKWISE:p=z(n,!0);break;default:p=t.behavior}return p.forEach(function(s,d){if(n!==s||p.length===d+1)return e;n=e.placement.split("-")[0],i=T(n);var a=e.offsets.popper,l=e.offsets.reference,f=Z,m="left"===n&&f(a.right)>f(l.left)||"right"===n&&f(a.left)<f(l.right)||"top"===n&&f(a.bottom)>f(l.top)||"bottom"===n&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b="left"===n&&h||"right"===n&&c||"top"===n&&g||"bottom"===n&&u,y=-1!==["top","bottom"].indexOf(n),w=!!t.flipVariations&&(y&&"start"===r&&h||y&&"end"===r&&c||!y&&"start"===r&&g||!y&&"end"===r&&u);(m||b||w)&&(e.flipped=!0,(m||b)&&(n=p[d+1]),w&&(r=function(e){return"end"===e?"start":"start"===e?"end":e}(r)),e.placement=n+(r?"-"+r:""),e.offsets.popper=le({},e.offsets.popper,C(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split("-")[0],n=e.offsets,i=n.popper,r=n.reference,p=-1!==["left","right"].indexOf(o),s=-1===["top","left"].indexOf(o);return i[p?"left":"top"]=r[o]-(s?i[p?"width":"height"]:0),e.placement=T(t),e.offsets.popper=g(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!q(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,o=D(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,n=t.y,i=e.offsets.popper,r=D(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,d,a=void 0===r?t.gpuAcceleration:r,l=p(e.instance.popper),f=u(l),m={position:i.position},h={left:Z(i.left),top:Q(i.top),bottom:Q(i.bottom),right:Z(i.right)},c="bottom"===o?"top":"bottom",g="right"===n?"left":"right",b=B("transform");if(d="bottom"==c?-f.height+h.bottom:h.top,s="right"==g?-f.width+h.right:h.left,a&&b)m[b]="translate3d("+s+"px, "+d+"px, 0)",m[c]=0,m[g]=0,m.willChange="transform";else{var y="bottom"==c?-1:1,w="right"==g?-1:1;m[c]=d*y,m[g]=s*w,m.willChange=c+", "+g}var E={"x-placement":e.placement};return e.attributes=le({},E,e.attributes),e.styles=le({},m,e.styles),e.arrowStyles=le({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return j(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(o){var n=t[o];!1===n?e.removeAttribute(o):e.setAttribute(o,t[o])})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,i){var r=L(i,t,e,o.positionFixed),p=O(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute("x-placement",p),j(t,{position:o.positionFixed?"fixed":"absolute"}),o},gpuAcceleration:void 0}}},ce}()}(this),function(e,t){!function(e,p){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function l(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?t(Object(r),!0).forEach(function(e){var t,n,i;t=o,i=r[n=e],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}p=p&&p.hasOwnProperty("default")?p.default:p;var n="transitionend";var m={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var n=e.getAttribute("href");t=n&&"#"!==n?n.trim():""}try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var t=p(e).css("transition-duration"),n=p(e).css("transition-delay"),i=parseFloat(t),o=parseFloat(n);return i||o?(t=t.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(t)+parseFloat(n))):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){p(e).trigger(n)},supportsTransitionEnd:function(){return Boolean(n)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i],r=t[i],s=r&&m.isElement(r)?"element":(a=r,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(o).test(s))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+o+'".')}var a},findShadowRoot:function(e){if(!document.documentElement.attachShadow)return null;if("function"!=typeof e.getRootNode)return e instanceof ShadowRoot?e:e.parentNode?m.findShadowRoot(e.parentNode):null;var t=e.getRootNode();return t instanceof ShadowRoot?t:null},jQueryDetection:function(){if(void 0===p)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=p.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1||4<=e[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};m.jQueryDetection(),p.fn.emulateTransitionEnd=function(e){var t=this,n=!1;return p(this).one(m.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||m.triggerTransitionEnd(t)},e),this},p.event.special[m.TRANSITION_END]={bindType:n,delegateType:n,handle:function(e){if(p(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}};var r="alert",a="bs.alert",c="."+a,h=p.fn[r],u={CLOSE:"close"+c,CLOSED:"closed"+c,CLICK_DATA_API:"click"+c+".data-api"},_=function(){function i(e){this._element=e}var e=i.prototype;return e.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},e.dispose=function(){p.removeData(this._element,a),this._element=null},e._getRootElement=function(e){var t=m.getSelectorFromElement(e),n=!1;return t&&(n=document.querySelector(t)),n=n||p(e).closest(".alert")[0]},e._triggerCloseEvent=function(e){var t=p.Event(u.CLOSE);return p(e).trigger(t),t},e._removeElement=function(t){var n=this;if(p(t).removeClass("show"),p(t).hasClass("fade")){var e=m.getTransitionDurationFromElement(t);p(t).one(m.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(e)}else this._destroyElement(t)},e._destroyElement=function(e){p(e).detach().trigger(u.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var e=p(this),t=e.data(a);t||(t=new i(this),e.data(a,t)),"close"===n&&t[n](this)})},i._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),i}();p(document).on(u.CLICK_DATA_API,'[data-dismiss="alert"]',_._handleDismiss(new _)),p.fn[r]=_._jQueryInterface,p.fn[r].Constructor=_,p.fn[r].noConflict=function(){return p.fn[r]=h,_._jQueryInterface};var v="button",y="bs.button",E="."+y,b=".data-api",w=p.fn[v],T="active",D='[data-toggle^="button"]',N='input:not([type="hidden"])',L=".btn",P={CLICK_DATA_API:"click"+E+b,FOCUS_BLUR_DATA_API:"focus"+E+b+" blur"+E+b,LOAD_DATA_API:"load"+E+b},x=function(){function n(e){this._element=e}var e=n.prototype;return e.toggle=function(){var e=!0,t=!0,n=p(this._element).closest('[data-toggle="buttons"]')[0];if(n){var i=this._element.querySelector(N);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(T))e=!1;else{var o=n.querySelector(".active");o&&p(o).removeClass(T)}else"checkbox"===i.type?"LABEL"===this._element.tagName&&i.checked===this._element.classList.contains(T)&&(e=!1):e=!1;e&&(i.checked=!this._element.classList.contains(T),p(i).trigger("change")),i.focus(),t=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(t&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(T)),e&&p(this._element).toggleClass(T))},e.dispose=function(){p.removeData(this._element,y),this._element=null},n._jQueryInterface=function(t){return this.each(function(){var e=p(this).data(y);e||(e=new n(this),p(this).data(y,e)),"toggle"===t&&e[t]()})},s(n,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),n}();p(document).on(P.CLICK_DATA_API,D,function(e){var t=e.target;if(p(t).hasClass("btn")||(t=p(t).closest(L)[0]),!t||t.hasAttribute("disabled")||t.classList.contains("disabled"))e.preventDefault();else{var n=t.querySelector(N);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled")))return void e.preventDefault();x._jQueryInterface.call(p(t),"toggle")}}).on(P.FOCUS_BLUR_DATA_API,D,function(e){var t=p(e.target).closest(L)[0];p(t).toggleClass("focus",/^focus(in)?$/.test(e.type))}),p(window).on(P.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),t=0,n=e.length;t<n;t++){var i=e[t],o=i.querySelector(N);o.checked||o.hasAttribute("checked")?i.classList.add(T):i.classList.remove(T)}for(var r=0,s=(e=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;r<s;r++){var a=e[r];"true"===a.getAttribute("aria-pressed")?a.classList.add(T):a.classList.remove(T)}}),p.fn[v]=x._jQueryInterface,p.fn[v].Constructor=x,p.fn[v].noConflict=function(){return p.fn[v]=w,x._jQueryInterface};var j="carousel",H="bs.carousel",R="."+H,F=".data-api",M=p.fn[j],W={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},U={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},B="next",q="prev",V={SLIDE:"slide"+R,SLID:"slid"+R,KEYDOWN:"keydown"+R,MOUSEENTER:"mouseenter"+R,MOUSELEAVE:"mouseleave"+R,TOUCHSTART:"touchstart"+R,TOUCHMOVE:"touchmove"+R,TOUCHEND:"touchend"+R,POINTERDOWN:"pointerdown"+R,POINTERUP:"pointerup"+R,DRAG_START:"dragstart"+R,LOAD_DATA_API:"load"+R+F,CLICK_DATA_API:"click"+R+F},z="active",ne=".active.carousel-item",se=".carousel-indicators",ce={TOUCH:"touch",PEN:"pen"},he=function(){function r(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector(se),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var e=r.prototype;return e.next=function(){this._isSliding||this._slide(B)},e.nextWhenVisible=function(){!document.hidden&&p(this._element).is(":visible")&&"hidden"!==p(this._element).css("visibility")&&this.next()},e.prev=function(){this._isSliding||this._slide(q)},e.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(m.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function(e){var t=this;this._activeElement=this._element.querySelector(ne);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)p(this._element).one(V.SLID,function(){return t.to(e)});else{if(n===e)return this.pause(),void this.cycle();var i=n<e?B:q;this._slide(i,this._items[e])}},e.dispose=function(){p(this._element).off(R),p.removeData(this._element,H),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function(e){return e=l({},W,{},e),m.typeCheckConfig(j,e,U),e},e._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);if(!(e<=40)){var t=e/this.touchDeltaX;(this.touchDeltaX=0)<t&&this.prev(),t<0&&this.next()}},e._addEventListeners=function(){var t=this;this._config.keyboard&&p(this._element).on(V.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&p(this._element).on(V.MOUSEENTER,function(e){return t.pause(e)}).on(V.MOUSELEAVE,function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},e._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var n=function(e){t._pointerEvent&&ce[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},i=function(e){t._pointerEvent&&ce[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval))};p(this._element.querySelectorAll(".carousel-item img")).on(V.DRAG_START,function(e){return e.preventDefault()}),this._pointerEvent?(p(this._element).on(V.POINTERDOWN,function(e){return n(e)}),p(this._element).on(V.POINTERUP,function(e){return i(e)}),this._element.classList.add("pointer-event")):(p(this._element).on(V.TOUCHSTART,function(e){return n(e)}),p(this._element).on(V.TOUCHMOVE,function(e){return function(e){e.originalEvent.touches&&1<e.originalEvent.touches.length?t.touchDeltaX=0:t.touchDeltaX=e.originalEvent.touches[0].clientX-t.touchStartX}(e)}),p(this._element).on(V.TOUCHEND,function(e){return i(e)}))}},e._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},e._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(e)},e._getItemByDirection=function(e,t){var n=e===B,i=e===q,o=this._getItemIndex(t),r=this._items.length-1;if((i&&0===o||n&&o===r)&&!this._config.wrap)return t;var s=(o+(e===q?-1:1))%this._items.length;return-1==s?this._items[this._items.length-1]:this._items[s]},e._triggerSlideEvent=function(e,t){var n=this._getItemIndex(e),i=this._getItemIndex(this._element.querySelector(ne)),o=p.Event(V.SLIDE,{relatedTarget:e,direction:t,from:i,to:n});return p(this._element).trigger(o),o},e._setActiveIndicatorElement=function(e){if(this._indicatorsElement){var t=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));p(t).removeClass(z);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&p(n).addClass(z)}},e._slide=function(e,t){var n,i,o,r=this,s=this._element.querySelector(ne),a=this._getItemIndex(s),l=t||s&&this._getItemByDirection(e,s),c=this._getItemIndex(l),h=Boolean(this._interval);if(o=e===B?(n="carousel-item-left",i="carousel-item-next","left"):(n="carousel-item-right",i="carousel-item-prev","right"),l&&p(l).hasClass(z))this._isSliding=!1;else if(!this._triggerSlideEvent(l,o).isDefaultPrevented()&&s&&l){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(l);var u=p.Event(V.SLID,{relatedTarget:l,direction:o,from:a,to:c});if(p(this._element).hasClass("slide")){p(l).addClass(i),m.reflow(l),p(s).addClass(n),p(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=f):this._config.interval=this._config.defaultInterval||this._config.interval;var d=m.getTransitionDurationFromElement(s);p(s).one(m.TRANSITION_END,function(){p(l).removeClass(n+" "+i).addClass(z),p(s).removeClass(z+" "+i+" "+n),r._isSliding=!1,setTimeout(function(){return p(r._element).trigger(u)},0)}).emulateTransitionEnd(d)}else p(s).removeClass(z),p(l).addClass(z),this._isSliding=!1,p(this._element).trigger(u);h&&this.cycle()}},r._jQueryInterface=function(i){return this.each(function(){var e=p(this).data(H),t=l({},W,{},p(this).data());"object"==typeof i&&(t=l({},t,{},i));var n="string"==typeof i?i:t.slide;if(e||(e=new r(this,t),p(this).data(H,e)),"number"==typeof i)e.to(i);else if("string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}else t.interval&&t.ride&&(e.pause(),e.cycle())})},r._dataApiClickHandler=function(e){var t=m.getSelectorFromElement(this);if(t){var n=p(t)[0];if(n&&p(n).hasClass("carousel")){var i=l({},p(n).data(),{},p(this).data()),o=this.getAttribute("data-slide-to");o&&(i.interval=!1),r._jQueryInterface.call(p(n),i),o&&p(n).data(H).to(o),e.preventDefault()}}},s(r,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return W}}]),r}();p(document).on(V.CLICK_DATA_API,"[data-slide], [data-slide-to]",he._dataApiClickHandler),p(window).on(V.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),t=0,n=e.length;t<n;t++){var i=p(e[t]);he._jQueryInterface.call(i,i.data())}}),p.fn[j]=he._jQueryInterface,p.fn[j].Constructor=he,p.fn[j].noConflict=function(){return p.fn[j]=M,he._jQueryInterface};var ue="collapse",fe="bs.collapse",de="."+fe,pe=p.fn[ue],me={toggle:!0,parent:""},ge={toggle:"boolean",parent:"(string|element)"},_e={SHOW:"show"+de,SHOWN:"shown"+de,HIDE:"hide"+de,HIDDEN:"hidden"+de,CLICK_DATA_API:"click"+de+".data-api"},ve="show",ye="collapse",Ee="collapsing",be="collapsed",Se='[data-toggle="collapse"]',De=function(){function a(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(Se)),i=0,o=n.length;i<o;i++){var r=n[i],s=m.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter(function(e){return e===t});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=a.prototype;return e.toggle=function(){p(this._element).hasClass(ve)?this.hide():this.show()},e.show=function(){var e,t,n=this;if(!(this._isTransitioning||p(this._element).hasClass(ve)||(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(e){return"string"==typeof n._config.parent?e.getAttribute("data-parent")===n._config.parent:e.classList.contains(ye)})).length&&(e=null),e&&(t=p(e).not(this._selector).data(fe))&&t._isTransitioning))){var i=p.Event(_e.SHOW);if(p(this._element).trigger(i),!i.isDefaultPrevented()){e&&(a._jQueryInterface.call(p(e).not(this._selector),"hide"),t||p(e).data(fe,null));var o=this._getDimension();p(this._element).removeClass(ye).addClass(Ee),this._element.style[o]=0,this._triggerArray.length&&p(this._triggerArray).removeClass(be).attr("aria-expanded",!0),this.setTransitioning(!0);var r="scroll"+(o[0].toUpperCase()+o.slice(1)),s=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,function(){p(n._element).removeClass(Ee).addClass(ye).addClass(ve),n._element.style[o]="",n.setTransitioning(!1),p(n._element).trigger(_e.SHOWN)}).emulateTransitionEnd(s),this._element.style[o]=this._element[r]+"px"}}},e.hide=function(){var e=this;if(!this._isTransitioning&&p(this._element).hasClass(ve)){var t=p.Event(_e.HIDE);if(p(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",m.reflow(this._element),p(this._element).addClass(Ee).removeClass(ye).removeClass(ve);var i=this._triggerArray.length;if(0<i)for(var o=0;o<i;o++){var r=this._triggerArray[o],s=m.getSelectorFromElement(r);null!==s&&(p([].slice.call(document.querySelectorAll(s))).hasClass(ve)||p(r).addClass(be).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[n]="";var a=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,function(){e.setTransitioning(!1),p(e._element).removeClass(Ee).addClass(ye).trigger(_e.HIDDEN)}).emulateTransitionEnd(a)}}},e.setTransitioning=function(e){this._isTransitioning=e},e.dispose=function(){p.removeData(this._element,fe),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function(e){return(e=l({},me,{},e)).toggle=Boolean(e.toggle),m.typeCheckConfig(ue,e,ge),e},e._getDimension=function(){return p(this._element).hasClass("width")?"width":"height"},e._getParent=function(){var e,n=this;m.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var t='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(e.querySelectorAll(t));return p(i).each(function(e,t){n._addAriaAndCollapsedClass(a._getTargetFromElement(t),[t])}),e},e._addAriaAndCollapsedClass=function(e,t){var n=p(e).hasClass(ve);t.length&&p(t).toggleClass(be,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(e){var t=m.getSelectorFromElement(e);return t?document.querySelector(t):null},a._jQueryInterface=function(i){return this.each(function(){var e=p(this),t=e.data(fe),n=l({},me,{},e.data(),{},"object"==typeof i&&i?i:{});if(!t&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),t||(t=new a(this,n),e.data(fe,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return me}}]),a}();p(document).on(_e.CLICK_DATA_API,Se,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=p(this),t=m.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(t));p(i).each(function(){var e=p(this),t=e.data(fe)?"toggle":n.data();De._jQueryInterface.call(e,t)})}),p.fn[ue]=De._jQueryInterface,p.fn[ue].Constructor=De,p.fn[ue].noConflict=function(){return p.fn[ue]=pe,De._jQueryInterface};var Ie="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,Ae=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(Ie&&0<=navigator.userAgent.indexOf(e[t]))return 1;return 0}(),Oe=Ie&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},Ae))}};function Ne(e){return e&&"[object Function]"==={}.toString.call(e)}function ke(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function Le(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function Pe(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=ke(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(n+o+i)?e:Pe(Le(e))}function xe(e){return e&&e.referenceNode?e.referenceNode:e}var je=Ie&&!(!window.MSInputMethodContext||!document.documentMode),He=Ie&&/MSIE 10/.test(navigator.userAgent);function Re(e){return 11===e?je:10===e?He:je||He}function Fe(e){if(!e)return document.documentElement;for(var t=Re(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===ke(n,"position")?Fe(n):n:e?e.ownerDocument.documentElement:document.documentElement}function Me(e){return null!==e.parentNode?Me(e.parentNode):e}function We(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,o=n?t:e,r=document.createRange();r.setStart(i,0),r.setEnd(o,0);var s=r.commonAncestorContainer;if(e!==s&&t!==s||i.contains(o))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||Fe(e.firstElementChild)===e)}(s)?s:Fe(s);var a=Me(e);return a.host?We(a.host,t):We(e,Me(t).host)}function Ue(e,t){var n="top"===(1<arguments.length&&void 0!==t?t:"top")?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"!==i&&"HTML"!==i)return e[n];var o=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||o)[n]}function Be(e,t){var n="x"===t?"Left":"Top",i="Left"==n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function qe(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],Re(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function Ke(e){var t=e.body,n=e.documentElement,i=Re(10)&&getComputedStyle(n);return{height:qe("Height",t,n,i),width:qe("Width",t,n,i)}}function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function Xe(e){return ze({},e,{right:e.left+e.width,bottom:e.top+e.height})}function Ge(e){var t={};try{if(Re(10)){t=e.getBoundingClientRect();var n=Ue(e,"top"),i=Ue(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},r="HTML"===e.nodeName?Ke(e.ownerDocument):{},s=r.width||e.clientWidth||o.width,a=r.height||e.clientHeight||o.height,l=e.offsetWidth-s,c=e.offsetHeight-a;if(l||c){var h=ke(e);l-=Be(h,"x"),c-=Be(h,"y"),o.width-=l,o.height-=c}return Xe(o)}function $e(e,t,n){var i=2<arguments.length&&void 0!==n&&n,o=Re(10),r="HTML"===t.nodeName,s=Ge(e),a=Ge(t),l=Pe(e),c=ke(t),h=parseFloat(c.borderTopWidth,10),u=parseFloat(c.borderLeftWidth,10);i&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=Xe({top:s.top-a.top-h,left:s.left-a.left-u,width:s.width,height:s.height});if(f.marginTop=0,f.marginLeft=0,!o&&r){var d=parseFloat(c.marginTop,10),p=parseFloat(c.marginLeft,10);f.top-=h-d,f.bottom-=h-d,f.left-=u-p,f.right-=u-p,f.marginTop=d,f.marginLeft=p}return(o&&!i?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(f=function(e,t,n){var i=2<arguments.length&&void 0!==n&&n,o=Ue(t,"top"),r=Ue(t,"left"),s=i?-1:1;return e.top+=o*s,e.bottom+=o*s,e.left+=r*s,e.right+=r*s,e}(f,t)),f}function Je(e){if(!e||!e.parentElement||Re())return document.documentElement;for(var t=e.parentElement;t&&"none"===ke(t,"transform");)t=t.parentElement;return t||document.documentElement}function Ze(e,t,n,i,o){var r=4<arguments.length&&void 0!==o&&o,s={top:0,left:0},a=r?Je(e):We(e,xe(t));if("viewport"===i)s=function(e,t){var n=1<arguments.length&&void 0!==t&&t,i=e.ownerDocument.documentElement,o=$e(e,i),r=Math.max(i.clientWidth,window.innerWidth||0),s=Math.max(i.clientHeight,window.innerHeight||0),a=n?0:Ue(i),l=n?0:Ue(i,"left");return Xe({top:a-o.top+o.marginTop,left:l-o.left+o.marginLeft,width:r,height:s})}(a,r);else{var l=void 0;"scrollParent"===i?"BODY"===(l=Pe(Le(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===i?e.ownerDocument.documentElement:i;var c=$e(l,a,r);if("HTML"!==l.nodeName||function e(t){var n=t.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===ke(t,"position"))return!0;var i=Le(t);return!!i&&e(i)}(a))s=c;else{var h=Ke(e.ownerDocument),u=h.height,f=h.width;s.top+=c.top-c.marginTop,s.bottom=u+c.top,s.left+=c.left-c.marginLeft,s.right=f+c.left}}var d="number"==typeof(n=n||0);return s.left+=d?n:n.left||0,s.top+=d?n:n.top||0,s.right-=d?n:n.right||0,s.bottom-=d?n:n.bottom||0,s}function et(e,t,i,n,o,r){var s=5<arguments.length&&void 0!==r?r:0;if(-1===e.indexOf("auto"))return e;var a=Ze(i,n,s,o),l={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},c=Object.keys(l).map(function(e){return ze({key:e},l[e],{area:function(e){return e.width*e.height}(l[e])})}).sort(function(e,t){return t.area-e.area}),h=c.filter(function(e){var t=e.width,n=e.height;return t>=i.clientWidth&&n>=i.clientHeight}),u=0<h.length?h[0].key:c[0].key,f=e.split("-")[1];return u+(f?"-"+f:"")}function tt(e,t,n,i){var o=3<arguments.length&&void 0!==i?i:null;return $e(n,o?Je(t):We(t,xe(n)),o)}function nt(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function it(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function ot(e,t,n){n=n.split("-")[0];var i=nt(e),o={width:i.width,height:i.height},r=-1!==["right","left"].indexOf(n),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return o[s]=t[s]+t[l]/2-i[l]/2,o[a]=n===a?t[a]-i[c]:t[it(a)],o}function rt(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function st(e,n,t){return(void 0===t?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=rt(e,function(e){return e[t]===n});return e.indexOf(i)}(e,"name",t))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e.function||e.fn;e.enabled&&Ne(t)&&(n.offsets.popper=Xe(n.offsets.popper),n.offsets.reference=Xe(n.offsets.reference),n=t(n,e))}),n}function at(e,n){return e.some(function(e){var t=e.name;return e.enabled&&t===n})}function lt(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var o=t[i],r=o?""+o+n:e;if(void 0!==document.body.style[r])return r}return null}function ct(e){var t=e.ownerDocument;return t?t.defaultView:window}function ft(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function dt(n,i){Object.keys(i).forEach(function(e){var t="";-1!==["width","height","top","right","bottom","left"].indexOf(e)&&ft(i[e])&&(t="px"),n.style[e]=i[e]+t})}var mt=Ie&&/Firefox/i.test(navigator.userAgent);function gt(e,t,n){var i=rt(e,function(e){return e.name===t}),o=!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order});if(!o){var r="`"+t+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return o}var _t=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],vt=_t.slice(3);function yt(e,t){var n=1<arguments.length&&void 0!==t&&t,i=vt.indexOf(e),o=vt.slice(i+1).concat(vt.slice(0,i));return n?o.reverse():o}var Ct={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var o=e.offsets,r=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",h={start:Ye({},l,r[l]),end:Ye({},l,r[l]+r[c]-s[c])};e.offsets.popper=ze({},s,h[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,i=e.placement,o=e.offsets,r=o.popper,s=o.reference,a=i.split("-")[0],l=void 0;return l=ft(+n)?[+n,0]:function(e,o,r,t){var s=[0,0],a=-1!==["right","left"].indexOf(t),n=e.split(/(\+|\-)/).map(function(e){return e.trim()}),i=n.indexOf(rt(n,function(e){return-1!==e.search(/,|\s/)}));n[i]&&-1===n[i].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==i?[n.slice(0,i).concat([n[i].split(l)[0]]),[n[i].split(l)[1]].concat(n.slice(i+1))]:[n];return(c=c.map(function(e,t){var n=(1===t?!a:a)?"height":"width",i=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,i=!0,e):i?(e[e.length-1]+=t,i=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,i){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+o[1],s=o[2];if(!r)return e;if(0!==s.indexOf("%"))return"vh"!==s&&"vw"!==s?r:("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}return Xe(a)[t]/100*r}(e,n,o,r)})})).forEach(function(n,i){n.forEach(function(e,t){ft(e)&&(s[i]+=e*("-"===n[t-1]?-1:1))})}),s}(n,r,s,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),e.popper=r,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,i){var t=i.boundariesElement||Fe(e.instance.popper);e.instance.reference===t&&(t=Fe(t));var n=lt("transform"),o=e.instance.popper.style,r=o.top,s=o.left,a=o[n];o.top="",o.left="",o[n]="";var l=Ze(e.instance.popper,e.instance.reference,i.padding,t,e.positionFixed);o.top=r,o.left=s,o[n]=a,i.boundaries=l;var c=i.priority,h=e.offsets.popper,u={primary:function(e){var t=h[e];return h[e]<l[e]&&!i.escapeWithReference&&(t=Math.max(h[e],l[e])),Ye({},e,t)},secondary:function(e){var t="right"===e?"left":"top",n=h[t];return h[e]>l[e]&&!i.escapeWithReference&&(n=Math.min(h[t],l[e]-("right"===e?h.width:h.height))),Ye({},t,n)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";h=ze({},h,u[t](e))}),e.offsets.popper=h,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,o=e.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<r(i[l])&&(e.offsets.popper[l]=r(i[l])-n[c]),n[l]>r(i[a])&&(e.offsets.popper[l]=r(i[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!gt(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],r=e.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(o),c=l?"height":"width",h=l?"Top":"Left",u=h.toLowerCase(),f=l?"left":"top",d=l?"bottom":"right",p=nt(i)[c];a[d]-p<s[u]&&(e.offsets.popper[u]-=s[u]-(a[d]-p)),a[u]+p>s[d]&&(e.offsets.popper[u]+=a[u]+p-s[d]),e.offsets.popper=Xe(e.offsets.popper);var m=a[u]+a[c]/2-p/2,g=ke(e.instance.popper),_=parseFloat(g["margin"+h],10),v=parseFloat(g["border"+h+"Width"],10),y=m-e.offsets.popper[u]-_-v;return y=Math.max(Math.min(s[c]-p,y),0),e.arrowElement=i,e.offsets.arrow=(Ye(n={},u,Math.round(y)),Ye(n,f,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(m,g){if(at(m.instance.modifiers,"inner"))return m;if(m.flipped&&m.placement===m.originalPlacement)return m;var _=Ze(m.instance.popper,m.instance.reference,g.padding,g.boundariesElement,m.positionFixed),v=m.placement.split("-")[0],y=it(v),E=m.placement.split("-")[1]||"",b=[];switch(g.behavior){case"flip":b=[v,y];break;case"clockwise":b=yt(v);break;case"counterclockwise":b=yt(v,!0);break;default:b=g.behavior}return b.forEach(function(e,t){if(v!==e||b.length===t+1)return m;v=m.placement.split("-")[0],y=it(v);var n=m.offsets.popper,i=m.offsets.reference,o=Math.floor,r="left"===v&&o(n.right)>o(i.left)||"right"===v&&o(n.left)<o(i.right)||"top"===v&&o(n.bottom)>o(i.top)||"bottom"===v&&o(n.top)<o(i.bottom),s=o(n.left)<o(_.left),a=o(n.right)>o(_.right),l=o(n.top)<o(_.top),c=o(n.bottom)>o(_.bottom),h="left"===v&&s||"right"===v&&a||"top"===v&&l||"bottom"===v&&c,u=-1!==["top","bottom"].indexOf(v),f=!!g.flipVariations&&(u&&"start"===E&&s||u&&"end"===E&&a||!u&&"start"===E&&l||!u&&"end"===E&&c),d=!!g.flipVariationsByContent&&(u&&"start"===E&&a||u&&"end"===E&&s||!u&&"start"===E&&c||!u&&"end"===E&&l),p=f||d;(r||h||p)&&(m.flipped=!0,(r||h)&&(v=b[t+1]),p&&(E=function(e){return"end"===e?"start":"start"===e?"end":e}(E)),m.placement=v+(E?"-"+E:""),m.offsets.popper=ze({},m.offsets.popper,ot(m.instance.popper,m.offsets.reference,m.placement)),m=st(m.instance.modifiers,m,"flip"))}),m},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,o=i.popper,r=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=r[n]-(a?o[s?"width":"height"]:0),e.placement=it(t),e.offsets.popper=Xe(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(!gt(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=rt(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,o=e.offsets.popper,r=rt(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==r?r:t.gpuAcceleration,a=Fe(e.instance.popper),l=Ge(a),c={position:o.position},h=function(e,t){function n(e){return e}var i=e.offsets,o=i.popper,r=i.reference,s=Math.round,a=Math.floor,l=s(r.width),c=s(o.width),h=-1!==["left","right"].indexOf(e.placement),u=-1!==e.placement.indexOf("-"),f=t?h||u||l%2==c%2?s:a:n,d=t?s:n;return{left:f(l%2==1&&c%2==1&&!u&&t?o.left-1:o.left),top:d(o.top),bottom:d(o.bottom),right:f(o.right)}}(e,window.devicePixelRatio<2||!mt),u="bottom"===n?"top":"bottom",f="right"===i?"left":"right",d=lt("transform"),p=void 0,m=void 0;if(m="bottom"==u?"HTML"===a.nodeName?-a.clientHeight+h.bottom:-l.height+h.bottom:h.top,p="right"==f?"HTML"===a.nodeName?-a.clientWidth+h.right:-l.width+h.right:h.left,s&&d)c[d]="translate3d("+p+"px, "+m+"px, 0)",c[u]=0,c[f]=0,c.willChange="transform";else{var g="bottom"==u?-1:1,_="right"==f?-1:1;c[u]=m*g,c[f]=p*_,c.willChange=u+", "+f}var v={"x-placement":e.placement};return e.attributes=ze({},v,e.attributes),e.styles=ze({},c,e.styles),e.arrowStyles=ze({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return dt(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&dt(e.arrowElement,e.arrowStyles),e;var t,n},onLoad:function(e,t,n,i,o){var r=tt(o,t,e,n.positionFixed),s=et(n.placement,r,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),dt(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},St=(function(e,t,n){t&&Ve(e.prototype,t),n&&Ve(e,n)}(Dt,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=tt(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=et(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=ot(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=st(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,at(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[lt("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(e,t,n,i){n.updateBound=i,ct(e).addEventListener("resize",n.updateBound,{passive:!0});var o=Pe(e);return function e(t,n,i,o){var r="BODY"===t.nodeName,s=r?t.ownerDocument.defaultView:t;s.addEventListener(n,i,{passive:!0}),r||e(Pe(s.parentNode),n,i,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return function(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,ct(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t));var e,t}.call(this)}}]),Dt);function Dt(e,t){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Dt),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=Oe(this.update.bind(this)),this.options=ze({},Dt.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(ze({},Dt.Defaults.modifiers,i.modifiers)).forEach(function(e){n.options.modifiers[e]=ze({},Dt.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ze({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&Ne(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}St.Utils=("undefined"!=typeof window?window:global).PopperUtils,St.placements=_t,St.Defaults=Ct;var It="dropdown",At="bs.dropdown",Ot="."+At,Nt=".data-api",kt=p.fn[It],Lt=new RegExp("38|40|27"),Pt={HIDE:"hide"+Ot,HIDDEN:"hidden"+Ot,SHOW:"show"+Ot,SHOWN:"shown"+Ot,CLICK:"click"+Ot,CLICK_DATA_API:"click"+Ot+Nt,KEYDOWN_DATA_API:"keydown"+Ot+Nt,KEYUP_DATA_API:"keyup"+Ot+Nt},xt="disabled",jt="show",Mt="dropdown-menu-right",Ut='[data-toggle="dropdown"]',qt=".dropdown-menu",Jt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},Zt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},en=function(){function c(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=c.prototype;return e.toggle=function(){if(!this._element.disabled&&!p(this._element).hasClass(xt)){var e=p(this._menu).hasClass(jt);c._clearMenus(),e||this.show(!0)}},e.show=function(e){if(void 0===e&&(e=!1),!(this._element.disabled||p(this._element).hasClass(xt)||p(this._menu).hasClass(jt))){var t={relatedTarget:this._element},n=p.Event(Pt.SHOW,t),i=c._getParentFromElement(this._element);if(p(i).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&e){if(void 0===St)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var o=this._element;"parent"===this._config.reference?o=i:m.isElement(this._config.reference)&&(o=this._config.reference,void 0!==this._config.reference.jquery&&(o=this._config.reference[0])),"scrollParent"!==this._config.boundary&&p(i).addClass("position-static"),this._popper=new St(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===p(i).closest(".navbar-nav").length&&p(document.body).children().on("mouseover",null,p.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),p(this._menu).toggleClass(jt),p(i).toggleClass(jt).trigger(p.Event(Pt.SHOWN,t))}}},e.hide=function(){if(!this._element.disabled&&!p(this._element).hasClass(xt)&&p(this._menu).hasClass(jt)){var e={relatedTarget:this._element},t=p.Event(Pt.HIDE,e),n=c._getParentFromElement(this._element);p(n).trigger(t),t.isDefaultPrevented()||(this._popper&&this._popper.destroy(),p(this._menu).toggleClass(jt),p(n).toggleClass(jt).trigger(p.Event(Pt.HIDDEN,e)))}},e.dispose=function(){p.removeData(this._element,At),p(this._element).off(Ot),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function(){var t=this;p(this._element).on(Pt.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},e._getConfig=function(e){return e=l({},this.constructor.Default,{},p(this._element).data(),{},e),m.typeCheckConfig(It,e,this.constructor.DefaultType),e},e._getMenuElement=function(){if(!this._menu){var e=c._getParentFromElement(this._element);e&&(this._menu=e.querySelector(qt))}return this._menu},e._getPlacement=function(){var e=p(this._element.parentNode),t="bottom-start";return e.hasClass("dropup")?(t="top-start",p(this._menu).hasClass(Mt)&&(t="top-end")):e.hasClass("dropright")?t="right-start":e.hasClass("dropleft")?t="left-start":p(this._menu).hasClass(Mt)&&(t="bottom-end"),t},e._detectNavbar=function(){return 0<p(this._element).closest(".navbar").length},e._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=l({},e.offsets,{},t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},e._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),l({},e,{},this._config.popperConfig)},c._jQueryInterface=function(t){return this.each(function(){var e=p(this).data(At);if(e||(e=new c(this,"object"==typeof t?t:null),p(this).data(At,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},c._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var t=[].slice.call(document.querySelectorAll(Ut)),n=0,i=t.length;n<i;n++){var o=c._getParentFromElement(t[n]),r=p(t[n]).data(At),s={relatedTarget:t[n]};if(e&&"click"===e.type&&(s.clickEvent=e),r){var a=r._menu;if(p(o).hasClass(jt)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&p.contains(o,e.target))){var l=p.Event(Pt.HIDE,s);p(o).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),t[n].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),p(a).removeClass(jt),p(o).removeClass(jt).trigger(p.Event(Pt.HIDDEN,s)))}}}},c._getParentFromElement=function(e){var t,n=m.getSelectorFromElement(e);return n&&(t=document.querySelector(n)),t||e.parentNode},c._dataApiKeydownHandler=function(e){if((/input|textarea/i.test(e.target.tagName)?!(32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||p(e.target).closest(qt).length)):Lt.test(e.which))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!p(this).hasClass(xt))){var t=c._getParentFromElement(this),n=p(t).hasClass(jt);if(n||27!==e.which)if(n&&(!n||27!==e.which&&32!==e.which)){var i=[].slice.call(t.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(e){return p(e).is(":visible")});if(0!==i.length){var o=i.indexOf(e.target);38===e.which&&0<o&&o--,40===e.which&&o<i.length-1&&o++,o<0&&(o=0),i[o].focus()}}else{if(27===e.which){var r=t.querySelector(Ut);p(r).trigger("focus")}p(this).trigger("click")}}},s(c,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Jt}},{key:"DefaultType",get:function(){return Zt}}]),c}();p(document).on(Pt.KEYDOWN_DATA_API,Ut,en._dataApiKeydownHandler).on(Pt.KEYDOWN_DATA_API,qt,en._dataApiKeydownHandler).on(Pt.CLICK_DATA_API+" "+Pt.KEYUP_DATA_API,en._clearMenus).on(Pt.CLICK_DATA_API,Ut,function(e){e.preventDefault(),e.stopPropagation(),en._jQueryInterface.call(p(this),"toggle")}).on(Pt.CLICK_DATA_API,".dropdown form",function(e){e.stopPropagation()}),p.fn[It]=en._jQueryInterface,p.fn[It].Constructor=en,p.fn[It].noConflict=function(){return p.fn[It]=kt,en._jQueryInterface};var tn="modal",nn="bs.modal",on="."+nn,rn=p.fn[tn],sn={backdrop:!0,keyboard:!0,focus:!0,show:!0},an={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},ln={HIDE:"hide"+on,HIDE_PREVENTED:"hidePrevented"+on,HIDDEN:"hidden"+on,SHOW:"show"+on,SHOWN:"shown"+on,FOCUSIN:"focusin"+on,RESIZE:"resize"+on,CLICK_DISMISS:"click.dismiss"+on,KEYDOWN_DISMISS:"keydown.dismiss"+on,MOUSEUP_DISMISS:"mouseup.dismiss"+on,MOUSEDOWN_DISMISS:"mousedown.dismiss"+on,CLICK_DATA_API:"click"+on+".data-api"},fn="modal-open",dn="fade",pn="show",mn="modal-static",gn=".modal-dialog",En=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bn=".sticky-top",wn=function(){function o(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(gn),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var e=o.prototype;return e.toggle=function(e){return this._isShown?this.hide():this.show(e)},e.show=function(e){var t=this;if(!this._isShown&&!this._isTransitioning){p(this._element).hasClass(dn)&&(this._isTransitioning=!0);var n=p.Event(ln.SHOW,{relatedTarget:e});p(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),p(this._element).on(ln.CLICK_DISMISS,'[data-dismiss="modal"]',function(e){return t.hide(e)}),p(this._dialog).on(ln.MOUSEDOWN_DISMISS,function(){p(t._element).one(ln.MOUSEUP_DISMISS,function(e){p(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},e.hide=function(e){var t=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var n=p.Event(ln.HIDE);if(p(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=p(this._element).hasClass(dn);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),p(document).off(ln.FOCUSIN),p(this._element).removeClass(pn),p(this._element).off(ln.CLICK_DISMISS),p(this._dialog).off(ln.MOUSEDOWN_DISMISS),i){var o=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(o)}else this._hideModal()}}},e.dispose=function(){[window,this._element,this._dialog].forEach(function(e){return p(e).off(on)}),p(document).off(ln.FOCUSIN),p.removeData(this._element,nn),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},e.handleUpdate=function(){this._adjustDialog()},e._getConfig=function(e){return e=l({},sn,{},e),m.typeCheckConfig(tn,e,an),e},e._triggerBackdropTransition=function(){var e=this;if("static"===this._config.backdrop){var t=p.Event(ln.HIDE_PREVENTED);if(p(this._element).trigger(t),t.defaultPrevented)return;this._element.classList.add(mn);var n=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,function(){e._element.classList.remove(mn)}).emulateTransitionEnd(n),this._element.focus()}else this.hide()},e._showElement=function(e){var t=this,n=p(this._element).hasClass(dn),i=this._dialog?this._dialog.querySelector(".modal-body"):null;function o(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,p(t._element).trigger(r)}this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),p(this._dialog).hasClass("modal-dialog-scrollable")&&i?i.scrollTop=0:this._element.scrollTop=0,n&&m.reflow(this._element),p(this._element).addClass(pn),this._config.focus&&this._enforceFocus();var r=p.Event(ln.SHOWN,{relatedTarget:e});if(n){var s=m.getTransitionDurationFromElement(this._dialog);p(this._dialog).one(m.TRANSITION_END,o).emulateTransitionEnd(s)}else o()},e._enforceFocus=function(){var t=this;p(document).off(ln.FOCUSIN).on(ln.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===p(t._element).has(e.target).length&&t._element.focus()})},e._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?p(this._element).on(ln.KEYDOWN_DISMISS,function(e){27===e.which&&t._triggerBackdropTransition()}):this._isShown||p(this._element).off(ln.KEYDOWN_DISMISS)},e._setResizeEvent=function(){var t=this;this._isShown?p(window).on(ln.RESIZE,function(e){return t.handleUpdate(e)}):p(window).off(ln.RESIZE)},e._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){p(document.body).removeClass(fn),e._resetAdjustments(),e._resetScrollbar(),p(e._element).trigger(ln.HIDDEN)})},e._removeBackdrop=function(){this._backdrop&&(p(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function(e){var t=this,n=p(this._element).hasClass(dn)?dn:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),p(this._backdrop).appendTo(document.body),p(this._element).on(ln.CLICK_DISMISS,function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&t._triggerBackdropTransition()}),n&&m.reflow(this._backdrop),p(this._backdrop).addClass(pn),!e)return;if(!n)return void e();var i=m.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(m.TRANSITION_END,e).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){p(this._backdrop).removeClass(pn);var o=function(){t._removeBackdrop(),e&&e()};if(p(this._element).hasClass(dn)){var r=m.getTransitionDurationFromElement(this._backdrop);p(this._backdrop).one(m.TRANSITION_END,o).emulateTransitionEnd(r)}else o()}else e&&e()},e._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function(){var o=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(En)),t=[].slice.call(document.querySelectorAll(bn));p(e).each(function(e,t){var n=t.style.paddingRight,i=p(t).css("padding-right");p(t).data("padding-right",n).css("padding-right",parseFloat(i)+o._scrollbarWidth+"px")}),p(t).each(function(e,t){var n=t.style.marginRight,i=p(t).css("margin-right");p(t).data("margin-right",n).css("margin-right",parseFloat(i)-o._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=p(document.body).css("padding-right");p(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}p(document.body).addClass(fn)},e._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(En));p(e).each(function(e,t){var n=p(t).data("padding-right");p(t).removeData("padding-right"),t.style.paddingRight=n||""});var t=[].slice.call(document.querySelectorAll(""+bn));p(t).each(function(e,t){var n=p(t).data("margin-right");void 0!==n&&p(t).css("margin-right",n).removeData("margin-right")});var n=p(document.body).data("padding-right");p(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},e._getScrollbarWidth=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},o._jQueryInterface=function(n,i){return this.each(function(){var e=p(this).data(nn),t=l({},sn,{},p(this).data(),{},"object"==typeof n&&n?n:{});if(e||(e=new o(this,t),p(this).data(nn,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](i)}else t.show&&e.show(i)})},s(o,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return sn}}]),o}();p(document).on(ln.CLICK_DATA_API,'[data-toggle="modal"]',function(e){var t,n=this,i=m.getSelectorFromElement(this);i&&(t=document.querySelector(i));var o=p(t).data(nn)?"toggle":l({},p(t).data(),{},p(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var r=p(t).one(ln.SHOW,function(e){e.isDefaultPrevented()||r.one(ln.HIDDEN,function(){p(n).is(":visible")&&n.focus()})});wn._jQueryInterface.call(p(t),o,this)}),p.fn[tn]=wn._jQueryInterface,p.fn[tn].Constructor=wn,p.fn[tn].noConflict=function(){return p.fn[tn]=rn,wn._jQueryInterface};var Tn=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Sn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Dn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function In(e,r,t){if(0===e.length)return e;if(t&&"function"==typeof t)return t(e);for(var n=(new window.DOMParser).parseFromString(e,"text/html"),s=Object.keys(r),a=[].slice.call(n.body.querySelectorAll("*")),i=function(e){var t=a[e],n=t.nodeName.toLowerCase();if(-1===s.indexOf(t.nodeName.toLowerCase()))return t.parentNode.removeChild(t),"continue";var i=[].slice.call(t.attributes),o=[].concat(r["*"]||[],r[n]||[]);i.forEach(function(e){!function(e,t){var n=e.nodeName.toLowerCase();if(-1!==t.indexOf(n))return-1===Tn.indexOf(n)||Boolean(e.nodeValue.match(Sn)||e.nodeValue.match(Dn));for(var i=t.filter(function(e){return e instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1}(e,o)&&t.removeAttribute(e.nodeName)})},o=0,l=a.length;o<l;o++)i(o);return n.body.innerHTML}var An="tooltip",On="bs.tooltip",Nn="."+On,kn=p.fn[An],Ln="bs-tooltip",Pn=new RegExp("(^|\\s)"+Ln+"\\S+","g"),xn=["sanitize","whiteList","sanitizeFn"],jn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Hn={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Rn={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Fn="show",Wn={HIDE:"hide"+Nn,HIDDEN:"hidden"+Nn,SHOW:"show"+Nn,SHOWN:"shown"+Nn,INSERTED:"inserted"+Nn,CLICK:"click"+Nn,FOCUSIN:"focusin"+Nn,FOCUSOUT:"focusout"+Nn,MOUSEENTER:"mouseenter"+Nn,MOUSELEAVE:"mouseleave"+Nn},Un="fade",Bn="show",Qn="hover",Vn="focus",Xn=function(){function i(e,t){if(void 0===St)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var e=i.prototype;return e.enable=function(){this._isEnabled=!0},e.disable=function(){this._isEnabled=!1},e.toggleEnabled=function(){this._isEnabled=!this._isEnabled},e.toggle=function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=p(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),p(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(p(this.getTipElement()).hasClass(Bn))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function(){clearTimeout(this._timeout),p.removeData(this.element,this.constructor.DATA_KEY),p(this.element).off(this.constructor.EVENT_KEY),p(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&p(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function(){var t=this;if("none"===p(this.element).css("display"))throw new Error("Please use show on visible elements");var e=p.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){p(this.element).trigger(e);var n=m.findShadowRoot(this.element),i=p.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!i)return;var o=this.getTipElement(),r=m.getUID(this.constructor.NAME);o.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&p(o).addClass(Un);var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();p(o).data(this.constructor.DATA_KEY,this),p.contains(this.element.ownerDocument.documentElement,this.tip)||p(o).appendTo(l),p(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new St(this.element,o,this._getPopperConfig(a)),p(o).addClass(Bn),"ontouchstart"in document.documentElement&&p(document.body).children().on("mouseover",null,p.noop);var c=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,p(t.element).trigger(t.constructor.Event.SHOWN),"out"===e&&t._leave(null,t)};if(p(this.tip).hasClass(Un)){var h=m.getTransitionDurationFromElement(this.tip);p(this.tip).one(m.TRANSITION_END,c).emulateTransitionEnd(h)}else c()}},e.hide=function(e){function t(){n._hoverState!==Fn&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),p(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),e&&e()}var n=this,i=this.getTipElement(),o=p.Event(this.constructor.Event.HIDE);if(p(this.element).trigger(o),!o.isDefaultPrevented()){if(p(i).removeClass(Bn),"ontouchstart"in document.documentElement&&p(document.body).children().off("mouseover",null,p.noop),this._activeTrigger.click=!1,this._activeTrigger[Vn]=!1,this._activeTrigger[Qn]=!1,p(this.tip).hasClass(Un)){var r=m.getTransitionDurationFromElement(i);p(i).one(m.TRANSITION_END,t).emulateTransitionEnd(r)}else t();this._hoverState=""}},e.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function(){return Boolean(this.getTitle())},e.addAttachmentClass=function(e){p(this.getTipElement()).addClass(Ln+"-"+e)},e.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},e.setContent=function(){var e=this.getTipElement();this.setElementContent(p(e.querySelectorAll(".tooltip-inner")),this.getTitle()),p(e).removeClass(Un+" "+Bn)},e.setElementContent=function(e,t){"object"!=typeof t||!t.nodeType&&!t.jquery?this.config.html?(this.config.sanitize&&(t=In(t,this.config.whiteList,this.config.sanitizeFn)),e.html(t)):e.text(t):this.config.html?p(t).parent().is(e)||e.empty().append(t):e.text(p(t).text())},e.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e=e||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},e._getPopperConfig=function(e){var t=this;return l({},{placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}},{},this.config.popperConfig)},e._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=l({},e.offsets,{},t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},e._getContainer=function(){return!1===this.config.container?document.body:m.isElement(this.config.container)?p(this.config.container):p(document).find(this.config.container)},e._getAttachment=function(e){return Hn[e.toUpperCase()]},e._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(e){if("click"===e)p(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(e){return i.toggle(e)});else if("manual"!==e){var t=e===Qn?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=e===Qn?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;p(i.element).on(t,i.config.selector,function(e){return i._enter(e)}).on(n,i.config.selector,function(e){return i._leave(e)})}}),this._hideModalHandler=function(){i.element&&i.hide()},p(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==e||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},e._enter=function(e,t){var n=this.constructor.DATA_KEY;(t=t||p(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),p(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?Vn:Qn]=!0),p(t.getTipElement()).hasClass(Bn)||t._hoverState===Fn?t._hoverState=Fn:(clearTimeout(t._timeout),t._hoverState=Fn,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===Fn&&t.show()},t.config.delay.show):t.show())},e._leave=function(e,t){var n=this.constructor.DATA_KEY;(t=t||p(e.currentTarget).data(n))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),p(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?Vn:Qn]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){"out"===t._hoverState&&t.hide()},t.config.delay.hide):t.hide())},e._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},e._getConfig=function(e){var t=p(this.element).data();return Object.keys(t).forEach(function(e){-1!==xn.indexOf(e)&&delete t[e]}),"number"==typeof(e=l({},this.constructor.Default,{},t,{},"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),m.typeCheckConfig(An,e,this.constructor.DefaultType),e.sanitize&&(e.template=In(e.template,e.whiteList,e.sanitizeFn)),e},e._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},e._cleanTipClass=function(){var e=p(this.getTipElement()),t=e.attr("class").match(Pn);null!==t&&t.length&&e.removeClass(t.join(""))},e._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},e._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(p(e).removeClass(Un),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},i._jQueryInterface=function(n){return this.each(function(){var e=p(this).data(On),t="object"==typeof n&&n;if((e||!/dispose|hide/.test(n))&&(e||(e=new i(this,t),p(this).data(On,e)),"string"==typeof n)){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Rn}},{key:"NAME",get:function(){return An}},{key:"DATA_KEY",get:function(){return On}},{key:"Event",get:function(){return Wn}},{key:"EVENT_KEY",get:function(){return Nn}},{key:"DefaultType",get:function(){return jn}}]),i}();p.fn[An]=Xn._jQueryInterface,p.fn[An].Constructor=Xn,p.fn[An].noConflict=function(){return p.fn[An]=kn,Xn._jQueryInterface};var Gn="popover",$n="bs.popover",Jn="."+$n,Zn=p.fn[Gn],ei="bs-popover",ti=new RegExp("(^|\\s)"+ei+"\\S+","g"),ni=l({},Xn.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ii=l({},Xn.DefaultType,{content:"(string|element|function)"}),li={HIDE:"hide"+Jn,HIDDEN:"hidden"+Jn,SHOW:"show"+Jn,SHOWN:"shown"+Jn,INSERTED:"inserted"+Jn,CLICK:"click"+Jn,FOCUSIN:"focusin"+Jn,FOCUSOUT:"focusout"+Jn,MOUSEENTER:"mouseenter"+Jn,MOUSELEAVE:"mouseleave"+Jn},ci=function(e){function i(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(i,e);var t=i.prototype;return t.isWithContent=function(){return this.getTitle()||this._getContent()},t.addAttachmentClass=function(e){p(this.getTipElement()).addClass(ei+"-"+e)},t.getTipElement=function(){return this.tip=this.tip||p(this.config.template)[0],this.tip},t.setContent=function(){var e=p(this.getTipElement());this.setElementContent(e.find(".popover-header"),this.getTitle());var t=this._getContent();"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find(".popover-body"),t),e.removeClass("fade show")},t._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},t._cleanTipClass=function(){var e=p(this.getTipElement()),t=e.attr("class").match(ti);null!==t&&0<t.length&&e.removeClass(t.join(""))},i._jQueryInterface=function(n){return this.each(function(){var e=p(this).data($n),t="object"==typeof n?n:null;if((e||!/dispose|hide/.test(n))&&(e||(e=new i(this,t),p(this).data($n,e)),"string"==typeof n)){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ni}},{key:"NAME",get:function(){return Gn}},{key:"DATA_KEY",get:function(){return $n}},{key:"Event",get:function(){return li}},{key:"EVENT_KEY",get:function(){return Jn}},{key:"DefaultType",get:function(){return ii}}]),i}(Xn);p.fn[Gn]=ci._jQueryInterface,p.fn[Gn].Constructor=ci,p.fn[Gn].noConflict=function(){return p.fn[Gn]=Zn,ci._jQueryInterface};var hi="scrollspy",ui="bs.scrollspy",fi="."+ui,di=p.fn[hi],pi={offset:10,method:"auto",target:""},mi={offset:"number",method:"string",target:"(string|element)"},gi={ACTIVATE:"activate"+fi,SCROLL:"scroll"+fi,LOAD_DATA_API:"load"+fi+".data-api"},vi="active",Ei=".nav, .list-group",bi=".nav-link",Ti=".list-group-item",Si=".dropdown-item",Ai="position",Oi=function(){function n(e,t){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+bi+","+this._config.target+" "+Ti+","+this._config.target+" "+Si,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,p(this._scrollElement).on(gi.SCROLL,function(e){return n._process(e)}),this.refresh(),this._process()}var e=n.prototype;return e.refresh=function(){var t=this,e=this._scrollElement===this._scrollElement.window?"offset":Ai,o="auto"===this._config.method?e:this._config.method,r=o===Ai?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,n=m.getSelectorFromElement(e);if(n&&(t=document.querySelector(n)),t){var i=t.getBoundingClientRect();if(i.width||i.height)return[p(t)[o]().top+r,n]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},e.dispose=function(){p.removeData(this._element,ui),p(this._scrollElement).off(fi),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function(e){if("string"!=typeof(e=l({},pi,{},"object"==typeof e&&e?e:{})).target){var t=p(e.target).attr("id");t||(t=m.getUID(hi),p(e.target).attr("id",t)),e.target="#"+t}return m.typeCheckConfig(hi,e,mi),e},e._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),n<=e){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;)this._activeTarget!==this._targets[o]&&e>=this._offsets[o]&&(void 0===this._offsets[o+1]||e<this._offsets[o+1])&&this._activate(this._targets[o])}},e._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),n=p([].slice.call(document.querySelectorAll(e.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(vi),n.addClass(vi)):(n.addClass(vi),n.parents(Ei).prev(bi+", "+Ti).addClass(vi),n.parents(Ei).prev(".nav-item").children(bi).addClass(vi)),p(this._scrollElement).trigger(gi.ACTIVATE,{relatedTarget:t})},e._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(e){return e.classList.contains(vi)}).forEach(function(e){return e.classList.remove(vi)})},n._jQueryInterface=function(t){return this.each(function(){var e=p(this).data(ui);if(e||(e=new n(this,"object"==typeof t&&t),p(this).data(ui,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},s(n,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return pi}}]),n}();p(window).on(gi.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),t=e.length;t--;){var n=p(e[t]);Oi._jQueryInterface.call(n,n.data())}}),p.fn[hi]=Oi._jQueryInterface,p.fn[hi].Constructor=Oi,p.fn[hi].noConflict=function(){return p.fn[hi]=di,Oi._jQueryInterface};var Ni="bs.tab",ki="."+Ni,Li=p.fn.tab,Pi={HIDE:"hide"+ki,HIDDEN:"hidden"+ki,SHOW:"show"+ki,SHOWN:"shown"+ki,CLICK_DATA_API:"click"+ki+".data-api"},ji="active",Ui=".active",Bi="> li > .active",Vi=function(){function i(e){this._element=e}var e=i.prototype;return e.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&p(this._element).hasClass(ji)||p(this._element).hasClass("disabled"))){var e,i,t=p(this._element).closest(".nav, .list-group")[0],o=m.getSelectorFromElement(this._element);if(t){var r="UL"===t.nodeName||"OL"===t.nodeName?Bi:Ui;i=(i=p.makeArray(p(t).find(r)))[i.length-1]}var s=p.Event(Pi.HIDE,{relatedTarget:this._element}),a=p.Event(Pi.SHOW,{relatedTarget:i});if(i&&p(i).trigger(s),p(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(e=document.querySelector(o)),this._activate(this._element,t);var l=function(){var e=p.Event(Pi.HIDDEN,{relatedTarget:n._element}),t=p.Event(Pi.SHOWN,{relatedTarget:i});p(i).trigger(e),p(n._element).trigger(t)};e?this._activate(e,e.parentNode,l):l()}}},e.dispose=function(){p.removeData(this._element,Ni),this._element=null},e._activate=function(e,t,n){function i(){return o._transitionComplete(e,r,n)}var o=this,r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?p(t).children(Ui):p(t).find(Bi))[0],s=n&&r&&p(r).hasClass("fade");if(r&&s){var a=m.getTransitionDurationFromElement(r);p(r).removeClass("show").one(m.TRANSITION_END,i).emulateTransitionEnd(a)}else i()},e._transitionComplete=function(e,t,n){if(t){p(t).removeClass(ji);var i=p(t.parentNode).find("> .dropdown-menu .active")[0];i&&p(i).removeClass(ji),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(p(e).addClass(ji),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),m.reflow(e),e.classList.contains("fade")&&e.classList.add("show"),e.parentNode&&p(e.parentNode).hasClass("dropdown-menu")){var o=p(e).closest(".dropdown")[0];if(o){var r=[].slice.call(o.querySelectorAll(".dropdown-toggle"));p(r).addClass(ji)}e.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var e=p(this),t=e.data(Ni);if(t||(t=new i(this),e.data(Ni,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),i}();p(document).on(Pi.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(e){e.preventDefault(),Vi._jQueryInterface.call(p(this),"show")}),p.fn.tab=Vi._jQueryInterface,p.fn.tab.Constructor=Vi,p.fn.tab.noConflict=function(){return p.fn.tab=Li,Vi._jQueryInterface};var Yi="toast",zi="bs.toast",Xi="."+zi,Gi=p.fn[Yi],$i={CLICK_DISMISS:"click.dismiss"+Xi,HIDE:"hide"+Xi,HIDDEN:"hidden"+Xi,SHOW:"show"+Xi,SHOWN:"shown"+Xi},Zi="hide",eo="show",to="showing",no={animation:"boolean",autohide:"boolean",delay:"number"},io={animation:!0,autohide:!0,delay:500},ro=function(){function i(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var e=i.prototype;return e.show=function(){var e=this,t=p.Event($i.SHOW);if(p(this._element).trigger(t),!t.isDefaultPrevented()){this._config.animation&&this._element.classList.add("fade");var n=function(){e._element.classList.remove(to),e._element.classList.add(eo),p(e._element).trigger($i.SHOWN),e._config.autohide&&(e._timeout=setTimeout(function(){e.hide()},e._config.delay))};if(this._element.classList.remove(Zi),m.reflow(this._element),this._element.classList.add(to),this._config.animation){var i=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,n).emulateTransitionEnd(i)}else n()}},e.hide=function(){if(this._element.classList.contains(eo)){var e=p.Event($i.HIDE);p(this._element).trigger(e),e.isDefaultPrevented()||this._close()}},e.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(eo)&&this._element.classList.remove(eo),p(this._element).off($i.CLICK_DISMISS),p.removeData(this._element,zi),this._element=null,this._config=null},e._getConfig=function(e){return e=l({},io,{},p(this._element).data(),{},"object"==typeof e&&e?e:{}),m.typeCheckConfig(Yi,e,this.constructor.DefaultType),e},e._setListeners=function(){var e=this;p(this._element).on($i.CLICK_DISMISS,'[data-dismiss="toast"]',function(){return e.hide()})},e._close=function(){function e(){t._element.classList.add(Zi),p(t._element).trigger($i.HIDDEN)}var t=this;if(this._element.classList.remove(eo),this._config.animation){var n=m.getTransitionDurationFromElement(this._element);p(this._element).one(m.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},i._jQueryInterface=function(n){return this.each(function(){var e=p(this),t=e.data(zi);if(t||(t=new i(this,"object"==typeof n&&n),e.data(zi,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](this)}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"DefaultType",get:function(){return no}},{key:"Default",get:function(){return io}}]),i}();p.fn[Yi]=ro._jQueryInterface,p.fn[Yi].Constructor=ro,p.fn[Yi].noConflict=function(){return p.fn[Yi]=Gi,ro._jQueryInterface},e.Alert=_,e.Button=x,e.Carousel=he,e.Collapse=De,e.Dropdown=en,e.Modal=wn,e.Popover=ci,e.Scrollspy=Oi,e.Tab=Vi,e.Toast=ro,e.Tooltip=Xn,e.Util=m,Object.defineProperty(e,"__esModule",{value:!0})}((e=e||self).bootstrap={},e.jQuery)}(this),function($){"use strict";var _currentSpinnerId=0;$.fn.TouchSpin=function(options){var defaults={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalup:"+",verticaldown:"-",verticalupclass:"",verticaldownclass:"",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-primary",buttonup_class:"btn btn-primary",buttondown_txt:"-",buttonup_txt:"+",callback_before_calculation:function(value){return value},callback_after_calculation:function(value){return value}},attributeMap={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var settings,_detached_prefix,_detached_postfix,container,elements,value,downSpinTimer,upSpinTimer,downDelayTimeout,upDelayTimeout,html,inputGroupSize,initval,parentelement,data,originalinput=$(this),originalinput_data=originalinput.data(),spincount=0,spinning=!1;function _hideEmptyPrefixPostfix(){""===settings.prefix&&(_detached_prefix=elements.prefix.detach()),""===settings.postfix&&(_detached_postfix=elements.postfix.detach())}function _checkValue(){var val,parsedval,returnval;""!==(val=settings.callback_before_calculation(originalinput.val()))?settings.decimals>0&&"."===val||(parsedval=parseFloat(val),isNaN(parsedval)&&(parsedval=""!==settings.replacementval?settings.replacementval:0),returnval=parsedval,parsedval.toString()!==val&&(returnval=parsedval),null!==settings.min&&parsedval<settings.min&&(returnval=settings.min),null!==settings.max&&parsedval>settings.max&&(returnval=settings.max),returnval=function(value){switch(settings.forcestepdivisibility){case"round":return(Math.round(value/settings.step)*settings.step).toFixed(settings.decimals);case"floor":return(Math.floor(value/settings.step)*settings.step).toFixed(settings.decimals);case"ceil":return(Math.ceil(value/settings.step)*settings.step).toFixed(settings.decimals);default:return value}}(returnval),Number(val).toString()!==returnval.toString()&&(originalinput.val(returnval),originalinput.trigger("change"))):""!==settings.replacementval&&(originalinput.val(settings.replacementval),originalinput.trigger("change"))}function _getBoostedStep(){if(settings.booster){var boosted=Math.pow(2,Math.floor(spincount/settings.boostat))*settings.step;return settings.maxboostedstep&&boosted>settings.maxboostedstep&&(boosted=settings.maxboostedstep,value=Math.round(value/boosted)*boosted),Math.max(settings.step,boosted)}return settings.step}function upOnce(){_checkValue(),value=parseFloat(settings.callback_before_calculation(elements.input.val())),isNaN(value)&&(value=0);var initvalue=value,boostedstep=_getBoostedStep();value+=boostedstep,null!==settings.max&&value>settings.max&&(value=settings.max,originalinput.trigger("touchspin.on.max"),stopSpin()),elements.input.val(settings.callback_after_calculation(Number(value).toFixed(settings.decimals))),initvalue!==value&&originalinput.trigger("change")}function downOnce(){_checkValue(),value=parseFloat(settings.callback_before_calculation(elements.input.val())),isNaN(value)&&(value=0);var initvalue=value,boostedstep=_getBoostedStep();value-=boostedstep,null!==settings.min&&value<settings.min&&(value=settings.min,originalinput.trigger("touchspin.on.min"),stopSpin()),elements.input.val(settings.callback_after_calculation(Number(value).toFixed(settings.decimals))),initvalue!==value&&originalinput.trigger("change")}function startDownSpin(){stopSpin(),spincount=0,spinning="down",originalinput.trigger("touchspin.on.startspin"),originalinput.trigger("touchspin.on.startdownspin"),downDelayTimeout=setTimeout(function(){downSpinTimer=setInterval(function(){spincount++,downOnce()},settings.stepinterval)},settings.stepintervaldelay)}function startUpSpin(){stopSpin(),spincount=0,spinning="up",originalinput.trigger("touchspin.on.startspin"),originalinput.trigger("touchspin.on.startupspin"),upDelayTimeout=setTimeout(function(){upSpinTimer=setInterval(function(){spincount++,upOnce()},settings.stepinterval)},settings.stepintervaldelay)}function stopSpin(){switch(clearTimeout(downDelayTimeout),clearTimeout(upDelayTimeout),clearInterval(downSpinTimer),clearInterval(upSpinTimer),spinning){case"up":originalinput.trigger("touchspin.on.stopupspin"),originalinput.trigger("touchspin.on.stopspin");break;case"down":originalinput.trigger("touchspin.on.stopdownspin"),originalinput.trigger("touchspin.on.stopspin")}spincount=0,spinning=!1}originalinput.data("alreadyinitialized")||(originalinput.data("alreadyinitialized",!0),_currentSpinnerId+=1,originalinput.data("spinnerid",_currentSpinnerId),originalinput.is("input")?(""!==(settings=$.extend({},defaults,originalinput_data,(data={},$.each(attributeMap,function(key,value){var attrName="bts-"+value;originalinput.is("[data-"+attrName+"]")&&(data[key]=originalinput.data(attrName))}),data),options)).initval&&""===originalinput.val()&&originalinput.val(settings.initval),_checkValue(),initval=originalinput.val(),parentelement=originalinput.parent(),""!==initval&&(initval=settings.callback_after_calculation(Number(initval).toFixed(settings.decimals))),originalinput.data("initvalue",initval).val(initval),originalinput.addClass("form-control"),parentelement.hasClass("input-group")?function(parentelement){parentelement.addClass("bootstrap-touchspin");var downhtml,uphtml,prev=originalinput.prev(),next=originalinput.next(),prefixhtml='<span class="input-group-prepend bootstrap-touchspin-prefix input-group-prepend bootstrap-touchspin-injected"><span class="input-group-text">'+settings.prefix+"</span></span>",postfixhtml='<span class="input-group-append bootstrap-touchspin-postfix input-group-append bootstrap-touchspin-injected"><span class="input-group-text">'+settings.postfix+"</span></span>";prev.hasClass("input-group-btn")||prev.hasClass("input-group-prepend")?(downhtml='<button class="'+settings.buttondown_class+' bootstrap-touchspin-down bootstrap-touchspin-injected" type="button">'+settings.buttondown_txt+"</button>",prev.append(downhtml)):(downhtml='<span class="input-group-btn input-group-prepend bootstrap-touchspin-injected"><button class="'+settings.buttondown_class+' bootstrap-touchspin-down" type="button">'+settings.buttondown_txt+"</button></span>",$(downhtml).insertBefore(originalinput)),next.hasClass("input-group-btn")||next.hasClass("input-group-append")?(uphtml='<button class="'+settings.buttonup_class+' bootstrap-touchspin-up bootstrap-touchspin-injected" type="button">'+settings.buttonup_txt+"</button>",next.prepend(uphtml)):(uphtml='<span class="input-group-btn input-group-append bootstrap-touchspin-injected"><button class="'+settings.buttonup_class+' bootstrap-touchspin-up" type="button">'+settings.buttonup_txt+"</button></span>",$(uphtml).insertAfter(originalinput)),$(prefixhtml).insertBefore(originalinput),$(postfixhtml).insertAfter(originalinput),container=parentelement}(parentelement):(inputGroupSize="",originalinput.hasClass("input-sm")&&(inputGroupSize="input-group-sm"),originalinput.hasClass("input-lg")&&(inputGroupSize="input-group-lg"),html=settings.verticalbuttons?'<div class="input-group '+inputGroupSize+' bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+settings.prefix+'</span></span><span class="bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+settings.postfix+'</span></span><span class="input-group-btn-vertical"><button class="'+settings.buttondown_class+" bootstrap-touchspin-up "+settings.verticalupclass+'" type="button">'+settings.verticalup+'</button><button class="'+settings.buttonup_class+" bootstrap-touchspin-down "+settings.verticaldownclass+'" type="button">'+settings.verticaldown+"</button></span></div>":'<div class="input-group bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-btn input-group-prepend"><button class="'+settings.buttondown_class+' bootstrap-touchspin-down" type="button">'+settings.buttondown_txt+'</button></span><span class="bootstrap-touchspin-prefix input-group-prepend"><span class="input-group-text">'+settings.prefix+'</span></span><span class="bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+settings.postfix+'</span></span><span class="input-group-btn input-group-append"><button class="'+settings.buttonup_class+' bootstrap-touchspin-up" type="button">'+settings.buttonup_txt+"</button></span></div>",container=$(html).insertBefore(originalinput),$(".bootstrap-touchspin-prefix",container).after(originalinput),originalinput.hasClass("input-sm")?container.addClass("input-group-sm"):originalinput.hasClass("input-lg")&&container.addClass("input-group-lg")),elements={down:$(".bootstrap-touchspin-down",container),up:$(".bootstrap-touchspin-up",container),input:$("input",container),prefix:$(".bootstrap-touchspin-prefix",container).addClass(settings.prefix_extraclass),postfix:$(".bootstrap-touchspin-postfix",container).addClass(settings.postfix_extraclass)},_hideEmptyPrefixPostfix(),originalinput.on("keydown.touchspin",function(ev){var code=ev.keyCode||ev.which;38===code?("up"!==spinning&&(upOnce(),startUpSpin()),ev.preventDefault()):40===code&&("down"!==spinning&&(downOnce(),startDownSpin()),ev.preventDefault())}),originalinput.on("keyup.touchspin",function(ev){var code=ev.keyCode||ev.which;38===code?stopSpin():40===code&&stopSpin()}),originalinput.on("blur.touchspin",function(){_checkValue(),originalinput.val(settings.callback_after_calculation(originalinput.val()))}),elements.down.on("keydown",function(ev){var code=ev.keyCode||ev.which;32!==code&&13!==code||("down"!==spinning&&(downOnce(),startDownSpin()),ev.preventDefault())}),elements.down.on("keyup.touchspin",function(ev){var code=ev.keyCode||ev.which;32!==code&&13!==code||stopSpin()}),elements.up.on("keydown.touchspin",function(ev){var code=ev.keyCode||ev.which;32!==code&&13!==code||("up"!==spinning&&(upOnce(),startUpSpin()),ev.preventDefault())}),elements.up.on("keyup.touchspin",function(ev){var code=ev.keyCode||ev.which;32!==code&&13!==code||stopSpin()}),elements.down.on("mousedown.touchspin",function(ev){elements.down.off("touchstart.touchspin"),originalinput.is(":disabled")||(downOnce(),startDownSpin(),ev.preventDefault(),ev.stopPropagation())}),elements.down.on("touchstart.touchspin",function(ev){elements.down.off("mousedown.touchspin"),originalinput.is(":disabled")||(downOnce(),startDownSpin(),ev.preventDefault(),ev.stopPropagation())}),elements.up.on("mousedown.touchspin",function(ev){elements.up.off("touchstart.touchspin"),originalinput.is(":disabled")||(upOnce(),startUpSpin(),ev.preventDefault(),ev.stopPropagation())}),elements.up.on("touchstart.touchspin",function(ev){elements.up.off("mousedown.touchspin"),originalinput.is(":disabled")||(upOnce(),startUpSpin(),ev.preventDefault(),ev.stopPropagation())}),elements.up.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(ev){spinning&&(ev.stopPropagation(),stopSpin())}),elements.down.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(ev){spinning&&(ev.stopPropagation(),stopSpin())}),elements.down.on("mousemove.touchspin touchmove.touchspin",function(ev){spinning&&(ev.stopPropagation(),ev.preventDefault())}),elements.up.on("mousemove.touchspin touchmove.touchspin",function(ev){spinning&&(ev.stopPropagation(),ev.preventDefault())}),originalinput.on("mousewheel.touchspin DOMMouseScroll.touchspin",function(ev){if(settings.mousewheel&&originalinput.is(":focus")){var delta=ev.originalEvent.wheelDelta||-ev.originalEvent.deltaY||-ev.originalEvent.detail;ev.stopPropagation(),ev.preventDefault(),delta<0?downOnce():upOnce()}}),originalinput.on("touchspin.destroy",function(){var $parent;$parent=originalinput.parent(),stopSpin(),originalinput.off(".touchspin"),$parent.hasClass("bootstrap-touchspin-injected")?(originalinput.siblings().remove(),originalinput.unwrap()):($(".bootstrap-touchspin-injected",$parent).remove(),$parent.removeClass("bootstrap-touchspin")),originalinput.data("alreadyinitialized",!1)}),originalinput.on("touchspin.uponce",function(){stopSpin(),upOnce()}),originalinput.on("touchspin.downonce",function(){stopSpin(),downOnce()}),originalinput.on("touchspin.startupspin",function(){startUpSpin()}),originalinput.on("touchspin.startdownspin",function(){startDownSpin()}),originalinput.on("touchspin.stopspin",function(){stopSpin()}),originalinput.on("touchspin.updatesettings",function(e,newsettings){!function(newsettings){(function(newsettings){if(settings=$.extend({},settings,newsettings),newsettings.postfix){var $postfix=originalinput.parent().find(".bootstrap-touchspin-postfix");0===$postfix.length&&_detached_postfix.insertAfter(originalinput),originalinput.parent().find(".bootstrap-touchspin-postfix .input-group-text").text(newsettings.postfix)}if(newsettings.prefix){var $prefix=originalinput.parent().find(".bootstrap-touchspin-prefix");0===$prefix.length&&_detached_prefix.insertBefore(originalinput),originalinput.parent().find(".bootstrap-touchspin-prefix .input-group-text").text(newsettings.prefix)}_hideEmptyPrefixPostfix()})(newsettings),_checkValue();var value=elements.input.val();""!==value&&(value=Number(settings.callback_before_calculation(elements.input.val())),elements.input.val(settings.callback_after_calculation(Number(value).toFixed(settings.decimals))))}(newsettings)})):console.log("Must be an input."))})}}(jQuery),function($,undefined){function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}function UTCToday(){var today=new Date;return UTCDate(today.getFullYear(),today.getMonth(),today.getDate())}function isUTCEquals(date1,date2){return date1.getUTCFullYear()===date2.getUTCFullYear()&&date1.getUTCMonth()===date2.getUTCMonth()&&date1.getUTCDate()===date2.getUTCDate()}function alias(method,deprecationMsg){return function(){return deprecationMsg!==undefined&&$.fn.datepicker.deprecated(deprecationMsg),this[method].apply(this,arguments)}}var extras,DateArray=(extras={get:function(i){return this.slice(i)[0]},contains:function(d){for(var val=d&&d.valueOf(),i=0,l=this.length;i<l;i++)if(0<=this[i].valueOf()-val&&this[i].valueOf()-val<864e5)return i;return-1},remove:function(i){this.splice(i,1)},replace:function(new_array){new_array&&($.isArray(new_array)||(new_array=[new_array]),this.clear(),this.push.apply(this,new_array))},clear:function(){this.length=0},copy:function(){var a=new DateArray;return a.replace(this),a}},function(){var a=[];return a.push.apply(a,arguments),$.extend(a,extras),a}),Datepicker=function(element,options){$.data(element,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(options),this.dates=new DateArray,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=$(element),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=$(DPGlobal.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(i,val){return Number(val)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};Datepicker.prototype={constructor:Datepicker,_resolveViewName:function(view){return $.each(DPGlobal.viewModes,function(i,viewMode){if(view===i||-1!==$.inArray(view,viewMode.names))return view=i,!1}),view},_resolveDaysOfWeek:function(daysOfWeek){return $.isArray(daysOfWeek)||(daysOfWeek=daysOfWeek.split(/[,\s]*/)),$.map(daysOfWeek,Number)},_check_template:function(tmp){try{if(tmp===undefined||""===tmp)return!1;if((tmp.match(/[<>]/g)||[]).length<=0)return!0;var jDom=$(tmp);return jDom.length>0}catch(ex){return!1}},_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o),lang=o.language;dates[lang]||(lang=lang.split("-")[0],dates[lang]||(lang=defaults.language)),o.language=lang,o.startView=this._resolveViewName(o.startView),o.minViewMode=this._resolveViewName(o.minViewMode),o.maxViewMode=this._resolveViewName(o.maxViewMode),o.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,o.startView)),!0!==o.multidate&&(o.multidate=Number(o.multidate)||!1,!1!==o.multidate&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var format=DPGlobal.parseFormat(o.format);o.startDate!==-1/0&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=DPGlobal.parseDate(o.startDate,format,o.language,o.assumeNearbyYear):o.startDate=-1/0),o.endDate!==1/0&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=DPGlobal.parseDate(o.endDate,format,o.language,o.assumeNearbyYear):o.endDate=1/0),o.daysOfWeekDisabled=this._resolveDaysOfWeek(o.daysOfWeekDisabled||[]),o.daysOfWeekHighlighted=this._resolveDaysOfWeek(o.daysOfWeekHighlighted||[]),o.datesDisabled=o.datesDisabled||[],$.isArray(o.datesDisabled)||(o.datesDisabled=o.datesDisabled.split(",")),o.datesDisabled=$.map(o.datesDisabled,function(d){return DPGlobal.parseDate(d,format,o.language,o.assumeNearbyYear)});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();if(plc=$.grep(plc,function(word){return/^auto|left|right|top|bottom$/.test(word)}),o.orientation={x:"auto",y:"auto"},_plc&&"auto"!==_plc)if(1===plc.length)switch(plc[0]){case"top":case"bottom":o.orientation.y=plc[0];break;case"left":case"right":o.orientation.x=plc[0]}else _plc=$.grep(plc,function(word){return/^left|right$/.test(word)}),o.orientation.x=_plc[0]||"auto",_plc=$.grep(plc,function(word){return/^top|bottom$/.test(word)}),o.orientation.y=_plc[0]||"auto";if(o.defaultViewDate instanceof Date||"string"==typeof o.defaultViewDate)o.defaultViewDate=DPGlobal.parseDate(o.defaultViewDate,format,o.language,o.assumeNearbyYear);else if(o.defaultViewDate){var year=o.defaultViewDate.year||(new Date).getFullYear(),month=o.defaultViewDate.month||0,day=o.defaultViewDate.day||1;o.defaultViewDate=UTCDate(year,month,day)}else o.defaultViewDate=UTCToday()},_applyEvents:function(evs){for(var el,ch,ev,i=0;i<evs.length;i++)el=evs[i][0],2===evs[i].length?(ch=undefined,ev=evs[i][1]):3===evs[i].length&&(ch=evs[i][1],ev=evs[i][2]),el.on(ev,ch)},_unapplyEvents:function(evs){for(var el,ev,ch,i=0;i<evs.length;i++)el=evs[i][0],2===evs[i].length?(ch=undefined,ev=evs[i][1]):3===evs[i].length&&(ch=evs[i][1],ev=evs[i][2]),el.off(ev,ch)},_buildEvents:function(){var events={keyup:$.proxy(function(e){-1===$.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:$.proxy(this.keydown,this),paste:$.proxy(this.paste,this)};!0===this.o.showOnFocus&&(events.focus=$.proxy(this.show,this)),this.isInput?this._events=[[this.element,events]]:this.component&&this.inputField.length?this._events=[[this.inputField,events],[this.component,{click:$.proxy(this.show,this)}]]:this._events=[[this.element,{click:$.proxy(this.show,this),keydown:$.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:$.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":$.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[this.picker,".prev, .next",{click:$.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:$.proxy(this.dayCellClick,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{"mousedown touchstart":$.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,viewMode:this.viewMode,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){0===arguments.length?(ix=this.dates.length-1,format=this.o.format):"string"==typeof ix&&(format=ix,ix=this.dates.length-1),format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language)},this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&$(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var dateString;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==$.inArray("text/plain",e.originalEvent.clipboardData.types))dateString=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;dateString=window.clipboardData.getData("Text")}this.setDate(dateString),this.update(),e.preventDefault()},_utc_to_local:function(utc){if(!utc)return utc;var local=new Date(utc.getTime()+6e4*utc.getTimezoneOffset());return local.getTimezoneOffset()!==utc.getTimezoneOffset()&&(local=new Date(utc.getTime()+6e4*local.getTimezoneOffset())),local},_local_to_utc:function(local){return local&&new Date(local.getTime()-6e4*local.getTimezoneOffset())},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate())},_zero_utc_time:function(utc){return utc&&UTCDate(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate())},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var selected_date=this.dates.get(-1);return selected_date!==undefined?new Date(selected_date):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,args),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,$.map(args,this._utc_to_local)),this},setDate:alias("setDates"),setUTCDate:alias("setUTCDates"),remove:alias("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var formatted=this.getFormattedDate();return this.inputField.val(formatted),this},getFormattedDate:function(format){format===undefined&&(format=this.o.format);var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(startDate){return this._process_options({startDate:startDate}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(endDate){return this._process_options({endDate:endDate}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(daysOfWeekDisabled){return this._process_options({daysOfWeekDisabled:daysOfWeekDisabled}),this.update(),this},setDaysOfWeekHighlighted:function(daysOfWeekHighlighted){return this._process_options({daysOfWeekHighlighted:daysOfWeekHighlighted}),this.update(),this},setDatesDisabled:function(datesDisabled){return this._process_options({datesDisabled:datesDisabled}),this.update(),this},place:function(){if(this.isInline)return this;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),container=$(this.o.container),windowWidth=container.width(),scrollTop="body"===this.o.container?$(document).scrollTop():container.scrollTop(),appendOffset=container.offset(),parentsZindex=[0];this.element.parents().each(function(){var itemZIndex=$(this).css("z-index");"auto"!==itemZIndex&&0!==Number(itemZIndex)&&parentsZindex.push(Number(itemZIndex))});var zIndex=Math.max.apply(Math,parentsZindex)+this.o.zIndexOffset,offset=this.component?this.component.parent().offset():this.element.offset(),height=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),width=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),left=offset.left-appendOffset.left,top=offset.top-appendOffset.top;"body"!==this.o.container&&(top+=scrollTop),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(left-=calendarWidth-width)):offset.left<0?(this.picker.addClass("datepicker-orient-left"),left-=offset.left-10):left+calendarWidth>windowWidth?(this.picker.addClass("datepicker-orient-right"),left+=width-calendarWidth):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var yorient=this.o.orientation.y;if("auto"===yorient&&(yorient=-scrollTop+top-calendarHeight<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+yorient),"top"===yorient?top-=calendarHeight+parseInt(this.picker.css("padding-top")):top+=height,this.o.rtl){var right=windowWidth-(left+width);this.picker.css({top:top,right:right,zIndex:zIndex})}else this.picker.css({top:top,left:left,zIndex:zIndex});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var oldDates=this.dates.copy(),dates=[],fromArgs=!1;return arguments.length?($.each(arguments,$.proxy(function(i,date){date instanceof Date&&(date=this._local_to_utc(date)),dates.push(date)},this)),fromArgs=!0):(dates=(dates=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?dates.split(this.o.multidateSeparator):[dates],delete this.element.data().date),dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),dates=$.grep(dates,$.proxy(function(date){return!this.dateWithinRange(date)||!date},this),!0),this.dates.replace(dates),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),fromArgs?(this.setValue(),this.element.change()):this.dates.length&&String(oldDates)!==String(this.dates)&&fromArgs&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&oldDates.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var dowCnt=this.o.weekStart,html="<tr>";for(this.o.calendarWeeks&&(html+='<th class="cw">&#160;</th>');dowCnt<this.o.weekStart+7;)html+='<th class="dow',-1!==$.inArray(dowCnt,this.o.daysOfWeekDisabled)&&(html+=" disabled"),html+='">'+dates[this.o.language].daysMin[dowCnt++%7]+"</th>";html+="</tr>",this.picker.find(".datepicker-days thead").append(html)}},fillMonths:function(){for(var focused,localDate=this._utc_to_local(this.viewDate),html="",i=0;i<12;i++)focused=localDate&&localDate.getMonth()===i?" focused":"",html+='<span class="month'+focused+'">'+dates[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(html)},setRange:function(range){range&&range.length?this.range=$.map(range,function(d){return d.valueOf()}):delete this.range,this.fill()},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=UTCToday();return date.getUTCFullYear()<year||date.getUTCFullYear()===year&&date.getUTCMonth()<month?cls.push("old"):(date.getUTCFullYear()>year||date.getUTCFullYear()===year&&date.getUTCMonth()>month)&&cls.push("new"),this.focusDate&&date.valueOf()===this.focusDate.valueOf()&&cls.push("focused"),this.o.todayHighlight&&isUTCEquals(date,today)&&cls.push("today"),-1!==this.dates.contains(date)&&cls.push("active"),this.dateWithinRange(date)||cls.push("disabled"),this.dateIsDisabled(date)&&cls.push("disabled","disabled-date"),-1!==$.inArray(date.getUTCDay(),this.o.daysOfWeekHighlighted)&&cls.push("highlighted"),this.range&&(date>this.range[0]&&date<this.range[this.range.length-1]&&cls.push("range"),-1!==$.inArray(date.valueOf(),this.range)&&cls.push("selected"),date.valueOf()===this.range[0]&&cls.push("range-start"),date.valueOf()===this.range[this.range.length-1]&&cls.push("range-end")),cls},_fill_yearsView:function(selector,cssClass,factor,year,startYear,endYear,beforeFn){for(var classes,tooltip,before,html="",step=factor/10,view=this.picker.find(selector),startVal=Math.floor(year/factor)*factor,endVal=startVal+9*step,focusedVal=Math.floor(this.viewDate.getFullYear()/step)*step,selected=$.map(this.dates,function(d){return Math.floor(d.getUTCFullYear()/step)*step}),currVal=startVal-step;currVal<=endVal+step;currVal+=step)classes=[cssClass],tooltip=null,currVal===startVal-step?classes.push("old"):currVal===endVal+step&&classes.push("new"),-1!==$.inArray(currVal,selected)&&classes.push("active"),(currVal<startYear||currVal>endYear)&&classes.push("disabled"),currVal===focusedVal&&classes.push("focused"),beforeFn!==$.noop&&((before=beforeFn(new Date(currVal,0,1)))===undefined?before={}:"boolean"==typeof before?before={enabled:before}:"string"==typeof before&&(before={classes:before}),!1===before.enabled&&classes.push("disabled"),before.classes&&(classes=classes.concat(before.classes.split(/\s+/))),before.tooltip&&(tooltip=before.tooltip)),html+='<span class="'+classes.join(" ")+'"'+(tooltip?' title="'+tooltip+'"':"")+">"+currVal+"</span>";view.find(".datepicker-switch").text(startVal+"-"+endVal),view.find("td").html(html)},fill:function(){var tooltip,before,d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,startMonth=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,endYear=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,endMonth=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,todaytxt=dates[this.o.language].today||dates.en.today||"",cleartxt=dates[this.o.language].clear||dates.en.clear||"",titleFormat=dates[this.o.language].titleFormat||dates.en.titleFormat,todayDate=UTCToday(),titleBtnVisible=(!0===this.o.todayBtn||"linked"===this.o.todayBtn)&&todayDate>=this.o.startDate&&todayDate<=this.o.endDate&&!this.weekOfDateIsDisabled(todayDate);if(!isNaN(year)&&!isNaN(month)){this.picker.find(".datepicker-days .datepicker-switch").text(DPGlobal.formatDate(d,titleFormat,this.o.language)),this.picker.find("tfoot .today").text(todaytxt).css("display",titleBtnVisible?"table-cell":"none"),this.picker.find("tfoot .clear").text(cleartxt).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var prevMonth=UTCDate(year,month,0),day=prevMonth.getUTCDate();prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);prevMonth.getUTCFullYear()<100&&nextMonth.setUTCFullYear(prevMonth.getUTCFullYear()),nextMonth.setUTCDate(nextMonth.getUTCDate()+42),nextMonth=nextMonth.valueOf();for(var weekDay,clsName,html=[];prevMonth.valueOf()<nextMonth;){if((weekDay=prevMonth.getUTCDay())===this.o.weekStart&&(html.push("<tr>"),this.o.calendarWeeks)){var ws=new Date(+prevMonth+(this.o.weekStart-weekDay-7)%7*864e5),th=new Date(Number(ws)+(11-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(11-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+"</td>")}(clsName=this.getClassNames(prevMonth)).push("day");var content=prevMonth.getUTCDate();this.o.beforeShowDay!==$.noop&&((before=this.o.beforeShowDay(this._utc_to_local(prevMonth)))===undefined?before={}:"boolean"==typeof before?before={enabled:before}:"string"==typeof before&&(before={classes:before}),!1===before.enabled&&clsName.push("disabled"),before.classes&&(clsName=clsName.concat(before.classes.split(/\s+/))),before.tooltip&&(tooltip=before.tooltip),before.content&&(content=before.content)),clsName=$.isFunction($.uniqueSort)?$.uniqueSort(clsName):$.unique(clsName),html.push('<td class="'+clsName.join(" ")+'"'+(tooltip?' title="'+tooltip+'"':"")+' data-date="'+prevMonth.getTime().toString()+'">'+content+"</td>"),tooltip=null,weekDay===this.o.weekEnd&&html.push("</tr>"),prevMonth.setUTCDate(prevMonth.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(html.join(""));var monthsTitle=dates[this.o.language].monthsTitle||dates.en.monthsTitle||"Months",months=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?monthsTitle:year).end().find("tbody span").removeClass("active");if($.each(this.dates,function(i,d){d.getUTCFullYear()===year&&months.eq(d.getUTCMonth()).addClass("active")}),(year<startYear||year>endYear)&&months.addClass("disabled"),year===startYear&&months.slice(0,startMonth).addClass("disabled"),year===endYear&&months.slice(endMonth+1).addClass("disabled"),this.o.beforeShowMonth!==$.noop){var that=this;$.each(months,function(i,month){var moDate=new Date(year,i,1),before=that.o.beforeShowMonth(moDate);before===undefined?before={}:"boolean"==typeof before?before={enabled:before}:"string"==typeof before&&(before={classes:before}),!1!==before.enabled||$(month).hasClass("disabled")||$(month).addClass("disabled"),before.classes&&$(month).addClass(before.classes),before.tooltip&&$(month).prop("title",before.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,year,startYear,endYear,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,year,startYear,endYear,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,year,startYear,endYear,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var prevIsDisabled,nextIsDisabled,d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,startMonth=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,endYear=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,endMonth=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,factor=1;switch(this.viewMode){case 4:factor*=10;case 3:factor*=10;case 2:factor*=10;case 1:prevIsDisabled=Math.floor(year/factor)*factor<=startYear,nextIsDisabled=Math.floor(year/factor)*factor+factor>endYear;break;case 0:prevIsDisabled=year<=startYear&&month<=startMonth,nextIsDisabled=year>=endYear&&month>=endMonth}this.picker.find(".prev").toggleClass("disabled",prevIsDisabled),this.picker.find(".next").toggleClass("disabled",nextIsDisabled)}},click:function(e){var target,day,year,month;e.preventDefault(),e.stopPropagation(),(target=$(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),target.hasClass("today")&&!target.hasClass("day")&&(this.setViewMode(0),this._setDate(UTCToday(),"linked"===this.o.todayBtn?null:"view")),target.hasClass("clear")&&this.clearDates(),target.hasClass("disabled")||(target.hasClass("month")||target.hasClass("year")||target.hasClass("decade")||target.hasClass("century"))&&(this.viewDate.setUTCDate(1),day=1,1===this.viewMode?(month=target.parent().find("span").index(target),year=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(month)):(month=0,year=Number(target.text()),this.viewDate.setUTCFullYear(year)),this._trigger(DPGlobal.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(UTCDate(year,month,day)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var $target=$(e.currentTarget),timestamp=$target.data("date"),date=new Date(timestamp);this.o.updateViewDate&&(date.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),date.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(date)},navArrowsClick:function(e){var $target=$(e.currentTarget),dir=$target.hasClass("prev")?-1:1;0!==this.viewMode&&(dir*=12*DPGlobal.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,dir),this._trigger(DPGlobal.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(date||this.dates.clear(),-1!==ix?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(ix):!1===this.o.multidate?(this.dates.clear(),this.dates.push(date)):this.dates.push(date),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(date,which){which&&"date"!==which||this._toggle_multidate(date&&new Date(date)),(!which&&this.o.updateViewDate||"view"===which)&&(this.viewDate=date&&new Date(date)),this.fill(),this.setValue(),which&&"view"===which||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||which&&"date"!==which||this.hide()},moveDay:function(date,dir){var newDate=new Date(date);return newDate.setUTCDate(date.getUTCDate()+dir),newDate},moveWeek:function(date,dir){return this.moveDay(date,7*dir)},moveMonth:function(date,dir){if(!(d=date)||isNaN(d.getTime()))return this.o.defaultViewDate;var d;if(!dir)return date;var new_month,test,new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir);if(dir=dir>0?1:-1,1===mag)test=-1===dir?function(){return new_date.getUTCMonth()===month}:function(){return new_date.getUTCMonth()!==new_month},new_month=month+dir,new_date.setUTCMonth(new_month),new_month=(new_month+12)%12;else{for(var i=0;i<mag;i++)new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth(),new_date.setUTCDate(day),test=function(){return new_month!==new_date.getUTCMonth()}}for(;test();)new_date.setUTCDate(--day),new_date.setUTCMonth(new_month);return new_date},moveYear:function(date,dir){return this.moveMonth(date,12*dir)},moveAvailableDate:function(date,dir,fn){do{if(date=this[fn](date,dir),!this.dateWithinRange(date))return!1;fn="moveDay"}while(this.dateIsDisabled(date));return date},weekOfDateIsDisabled:function(date){return-1!==$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(date){return this.weekOfDateIsDisabled(date)||$.grep(this.o.datesDisabled,function(d){return isUTCEquals(date,d)}).length>0},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var dir,newViewDate,dateChanged=!1,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;dir=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(newViewDate=this.moveAvailableDate(focusDate,dir,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(newViewDate=this.moveAvailableDate(focusDate,dir,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?newViewDate=this.moveAvailableDate(focusDate,dir,"moveDay"):this.weekOfDateIsDisabled(focusDate)||(newViewDate=this.moveAvailableDate(focusDate,dir,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(dir*=4),newViewDate=this.moveAvailableDate(focusDate,dir,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(dir*=4),newViewDate=this.moveAvailableDate(focusDate,dir,"moveYear")),newViewDate&&(this.focusDate=this.viewDate=newViewDate,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;focusDate=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(focusDate),dateChanged=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}dateChanged&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},setViewMode:function(viewMode){this.viewMode=viewMode,this.picker.children("div").hide().filter(".datepicker-"+DPGlobal.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var DateRangePicker=function(element,options){$.data(element,"datepicker",this),this.element=$(element),this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i}),delete options.inputs,this.keepEmptyValues=options.keepEmptyValues,delete options.keepEmptyValues,datepickerPlugin.call($(this.inputs),options).on("changeDate",$.proxy(this.dateUpdated,this)),this.pickers=$.map(this.inputs,function(i){return $.data(i,"datepicker")}),this.updateDates()};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate()}),this.updateRanges()},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf()});$.each(this.pickers,function(i,p){p.setRange(range)})},clearDates:function(){$.each(this.pickers,function(i,p){p.clearDates()})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var dp=$.data(e.target,"datepicker");if(dp!==undefined){var new_date=dp.getUTCDate(),keep_empty_values=this.keepEmptyValues,i=$.inArray(e.target,this.inputs),j=i-1,k=i+1,l=this.inputs.length;if(-1!==i){if($.each(this.pickers,function(i,p){p.getUTCDate()||p!==dp&&keep_empty_values||p.setUTCDate(new_date)}),new_date<this.dates[j])for(;j>=0&&new_date<this.dates[j];)this.pickers[j--].setUTCDate(new_date);else if(new_date>this.dates[k])for(;k<l&&new_date>this.dates[k];)this.pickers[k++].setUTCDate(new_date);this.updateDates(),delete this.updating}}}},destroy:function(){$.map(this.pickers,function(p){p.destroy()}),$(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:alias("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var old=$.fn.datepicker,datepickerPlugin=function(option){var internal_return,args=Array.apply(null,arguments);if(args.shift(),this.each(function(){var $this=$(this),data=$this.data("datepicker"),options="object"==typeof option&&option;if(!data){var elopts=function(el,prefix){var inkey,data=$(el).data(),out={},replace=new RegExp("^"+prefix.toLowerCase()+"([A-Z])");function re_lower(_,a){return a.toLowerCase()}for(var key in prefix=new RegExp("^"+prefix.toLowerCase()),data)prefix.test(key)&&(inkey=key.replace(replace,re_lower),out[inkey]=data[key]);return out}(this,"date"),xopts=$.extend({},defaults,elopts,options),locopts=function(lang){var out={};if(dates[lang]||(lang=lang.split("-")[0],dates[lang])){var d=dates[lang];return $.each(locale_opts,function(i,k){k in d&&(out[k]=d[k])}),out}}(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);$this.hasClass("input-daterange")||opts.inputs?($.extend(opts,{inputs:opts.inputs||$this.find("input").toArray()}),data=new DateRangePicker(this,opts)):data=new Datepicker(this,opts),$this.data("datepicker",data)}"string"==typeof option&&"function"==typeof data[option]&&(internal_return=data[option].apply(data,args))}),internal_return===undefined||internal_return instanceof Datepicker||internal_return instanceof DateRangePicker)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+option+" function)");return internal_return};$.fn.datepicker=datepickerPlugin;var defaults=$.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:$.noop,beforeShowMonth:$.noop,beforeShowYear:$.noop,beforeShowDecade:$.noop,beforeShowCentury:$.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},locale_opts=$.fn.datepicker.locale_opts=["format","rtl","weekStart"];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},DPGlobal={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(format){if("function"==typeof format.toValue&&"function"==typeof format.toDisplay)return format;var separators=format.replace(this.validParts,"\0").split("\0"),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||0===parts.length)throw new Error("Invalid date format.");return{separators:separators,parts:parts}},parseDate:function(date,format,language,assumeNearby){if(!date)return undefined;if(date instanceof Date)return date;if("string"==typeof format&&(format=DPGlobal.parseFormat(format)),format.toValue)return format.toValue(date,format,language);var parts,part,dir,i,fn,fn_map={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},dateAliases={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(date in dateAliases&&(date=dateAliases[date]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(date)){for(parts=date.match(/([\-+]\d+)([dmwy])/gi),date=new Date,i=0;i<parts.length;i++)part=parts[i].match(/([\-+]\d+)([dmwy])/i),dir=Number(part[1]),fn=fn_map[part[2].toLowerCase()],date=Datepicker.prototype[fn](date,dir);return Datepicker.prototype._zero_utc_time(date)}parts=date&&date.match(this.nonpunctuation)||[];var val,filtered,parsed={},setters_order=["yyyy","yy","M","MM","m","mm","d","dd"],setters_map={yyyy:function(d,v){return d.setUTCFullYear(assumeNearby?(year=v,!0===(threshold=assumeNearby)&&(threshold=10),year<100&&(year+=2e3)>(new Date).getFullYear()+threshold&&(year-=100),year):v);var year,threshold},m:function(d,v){if(isNaN(d))return d;for(v-=1;v<0;)v+=12;for(v%=12,d.setUTCMonth(v);d.getUTCMonth()!==v;)d.setUTCDate(d.getUTCDate()-1);return d},d:function(d,v){return d.setUTCDate(v)}};setters_map.yy=setters_map.yyyy,setters_map.M=setters_map.MM=setters_map.mm=setters_map.m,setters_map.dd=setters_map.d,date=UTCToday();var fparts=format.parts.slice();function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m.toLowerCase()===p.toLowerCase()}if(parts.length!==fparts.length&&(fparts=$(fparts).filter(function(i,p){return-1!==$.inArray(p,setters_order)}).toArray()),parts.length===fparts.length){var cnt,_date,s;for(i=0,cnt=fparts.length;i<cnt;i++){if(val=parseInt(parts[i],10),part=fparts[i],isNaN(val))switch(part){case"MM":filtered=$(dates[language].months).filter(match_part),val=$.inArray(filtered[0],dates[language].months)+1;break;case"M":filtered=$(dates[language].monthsShort).filter(match_part),val=$.inArray(filtered[0],dates[language].monthsShort)+1}parsed[part]=val}for(i=0;i<setters_order.length;i++)(s=setters_order[i])in parsed&&!isNaN(parsed[s])&&(_date=new Date(date),setters_map[s](_date,parsed[s]),isNaN(_date)||(date=_date))}return date},formatDate:function(date,format,language){if(!date)return"";if("string"==typeof format&&(format=DPGlobal.parseFormat(format)),format.toDisplay)return format.toDisplay(date,format,language);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?"0":"")+val.d,val.mm=(val.m<10?"0":"")+val.m,date=[];for(var seps=$.extend([],format.separators),i=0,cnt=format.parts.length;i<=cnt;i++)seps.length&&date.push(seps.shift()),date.push(val[format.parts[i]]);return date.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+defaults.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+defaults.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};DPGlobal.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+"<tbody></tbody>"+DPGlobal.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+"</table></div></div>",$.fn.datepicker.DPGlobal=DPGlobal,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=old,this},$.fn.datepicker.version="1.9.0",$.fn.datepicker.deprecated=function(msg){var console=window.console;console&&console.warn&&console.warn("DEPRECATED: "+msg)},$(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var $this=$(this);$this.data("datepicker")||(e.preventDefault(),datepickerPlugin.call($this,"show"))}),$(function(){datepickerPlugin.call($('[data-provide="datepicker-inline"]'))})}(jQuery),function($,document,window,navigator,undefined){"use strict";var n,r,plugin_count=0,is_old_ie=(n=navigator.userAgent,r=/msie\s\d+/i,n.search(r)>0&&r.exec(n).toString().split(" ")[1]<9&&($("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(that){var target=this,slice=[].slice;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(null==this)throw new TypeError('"this" is null or not defined');var O=Object(this),len=O.length>>>0;if(0===len)return-1;var n=+fromIndex||0;if(Math.abs(n)===1/0&&(n=0),n>=len)return-1;for(k=Math.max(n>=0?n:len-Math.abs(n),0);k<len;){if(k in O&&O[k]===searchElement)return k;k++}return-1});var IonRangeSlider=function(input,options,plugin_count){this.VERSION="2.3.1",this.input=input,this.plugin_count=plugin_count,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,options=options||{},this.$cache={win:$(window),body:$(document.body),input:$(input),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var config,config_from_data,prop,$inp=this.$cache.input,val=$inp.prop("value");for(prop in config={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null},"INPUT"!==$inp[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",$inp[0]),(config_from_data={skin:$inp.data("skin"),type:$inp.data("type"),min:$inp.data("min"),max:$inp.data("max"),from:$inp.data("from"),to:$inp.data("to"),step:$inp.data("step"),min_interval:$inp.data("minInterval"),max_interval:$inp.data("maxInterval"),drag_interval:$inp.data("dragInterval"),values:$inp.data("values"),from_fixed:$inp.data("fromFixed"),from_min:$inp.data("fromMin"),from_max:$inp.data("fromMax"),from_shadow:$inp.data("fromShadow"),to_fixed:$inp.data("toFixed"),to_min:$inp.data("toMin"),to_max:$inp.data("toMax"),to_shadow:$inp.data("toShadow"),prettify_enabled:$inp.data("prettifyEnabled"),prettify_separator:$inp.data("prettifySeparator"),force_edges:$inp.data("forceEdges"),keyboard:$inp.data("keyboard"),grid:$inp.data("grid"),grid_margin:$inp.data("gridMargin"),grid_num:$inp.data("gridNum"),grid_snap:$inp.data("gridSnap"),hide_min_max:$inp.data("hideMinMax"),hide_from_to:$inp.data("hideFromTo"),prefix:$inp.data("prefix"),postfix:$inp.data("postfix"),max_postfix:$inp.data("maxPostfix"),decorate_both:$inp.data("decorateBoth"),values_separator:$inp.data("valuesSeparator"),input_values_separator:$inp.data("inputValuesSeparator"),disable:$inp.data("disable"),block:$inp.data("block"),extra_classes:$inp.data("extraClasses")}).values=config_from_data.values&&config_from_data.values.split(","),config_from_data)config_from_data.hasOwnProperty(prop)&&(config_from_data[prop]!==undefined&&""!==config_from_data[prop]||delete config_from_data[prop]);val!==undefined&&""!==val&&((val=val.split(config_from_data.input_values_separator||options.input_values_separator||";"))[0]&&val[0]==+val[0]&&(val[0]=+val[0]),val[1]&&val[1]==+val[1]&&(val[1]=+val[1]),options&&options.values&&options.values.length?(config.from=val[0]&&options.values.indexOf(val[0]),config.to=val[1]&&options.values.indexOf(val[1])):(config.from=val[0]&&+val[0],config.to=val[1]&&+val[1])),$.extend(config,options),$.extend(config,config_from_data),this.options=config,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()};IonRangeSlider.prototype={init:function(is_update){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),is_update?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var container_html='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(container_html),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var min=this.options.min,max=this.options.max,from=this.options.from,to=this.options.to;from>min&&to===max?this.$cache.s_from.addClass("type_last"):to<max&&this.$cache.s_to.addClass("type_last")},changeLevel:function(target){switch(target){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),is_old_ie&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),is_old_ie&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(e){var x,$handle;this.target||($handle="single"===this.options.type?this.$cache.single:this.$cache.from,x=$handle.offset().left,x+=$handle.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:x}))},pointerMove:function(e){if(this.dragging){var x=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;this.coords.x_pointer=x-this.coords.x_gap,this.calc()}},pointerUp:function(e){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,is_old_ie&&$("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),($.contains(this.$cache.cont[0],e.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(target,e){e.preventDefault();var x=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===target&&this.setTempMinInterval(),target||(target=this.target||"from"),this.current_plugin=this.plugin_count,this.target=target,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=x-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(target),is_old_ie&&$("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(target,e){e.preventDefault();var x=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=target,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(x-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(target,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(right){var p=this.coords.p_pointer,p_step=(this.options.max-this.options.min)/100;p_step=this.options.step/p_step,right?p+=p_step:p-=p_step,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*p),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");if(this.options.values.length)this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]));else{var min_pretty=this._prettify(this.options.min),max_pretty=this._prettify(this.options.max);this.result.min_pretty=min_pretty,this.result.max_pretty=max_pretty,this.$cache.min.html(this.decorate(min_pretty,this.options.min)),this.$cache.max.html(this.decorate(max_pretty,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var interval=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=interval},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(update){if(this.options&&(this.calc_count++,(10===this.calc_count||update)&&(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var handle_x=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,handle_x=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,handle_x=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(handle_x)),this.target){case"base":var w=(this.options.max-this.options.min)/100,f=(this.result.from-this.options.min)/w,t=(this.result.to-this.options.min)/w;this.coords.p_single_real=this.toFixed(f),this.coords.p_from_real=this.toFixed(f),this.coords.p_to_real=this.toFixed(t),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(handle_x),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(handle_x),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(handle_x),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;handle_x=this.toFixed(handle_x+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(handle_x)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(handle_x)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var real_x=this.convertToRealPercent(handle_x),from=this.result.from_percent,to=this.result.to_percent,full=to-from,half=full/2,new_from=real_x-half,new_to=real_x+half;new_from<0&&(new_to=(new_from=0)+full),new_to>100&&(new_from=(new_to=100)-full),this.coords.p_from_real=this.calcWithStep(new_from),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(new_to),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(fake){var full=100-this.coords.p_handle;return fake/full*100},convertToFakePercent:function(real){var full=100-this.coords.p_handle;return real/100*full},getHandleX:function(){var max=100-this.coords.p_handle,x=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return x<0?x=0:x>max&&(x=max),x},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(real_x){if("single"===this.options.type)return"single";var m_point=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2;return real_x>=m_point?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)&&(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%",this.$cache.single[0].style.left=this.labels.p_single_left+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",(this.old_from!==this.result.from||this.force_redraw)&&(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),(this.old_to!==this.result.to||this.force_redraw)&&(this.$cache.to[0].style.left=this.labels.p_to_left+"%"),this.$cache.single[0].style.left=this.labels.p_single_left+"%"),this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){if(this.options){var text_single,text_from,text_to,from_pretty,to_pretty,values_num=this.options.values.length,p_values=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type)values_num?(text_single=this.decorate(p_values[this.result.from]),this.$cache.single.html(text_single)):(from_pretty=this._prettify(this.result.from),text_single=this.decorate(from_pretty,this.result.from),this.$cache.single.html(text_single)),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible";else{values_num?(this.options.decorate_both?(text_single=this.decorate(p_values[this.result.from]),text_single+=this.options.values_separator,text_single+=this.decorate(p_values[this.result.to])):text_single=this.decorate(p_values[this.result.from]+this.options.values_separator+p_values[this.result.to]),text_from=this.decorate(p_values[this.result.from]),text_to=this.decorate(p_values[this.result.to]),this.$cache.single.html(text_single),this.$cache.from.html(text_from),this.$cache.to.html(text_to)):(from_pretty=this._prettify(this.result.from),to_pretty=this._prettify(this.result.to),this.options.decorate_both?(text_single=this.decorate(from_pretty,this.result.from),text_single+=this.options.values_separator,text_single+=this.decorate(to_pretty,this.result.to)):text_single=this.decorate(from_pretty+this.options.values_separator+to_pretty,this.result.to),text_from=this.decorate(from_pretty,this.result.from),text_to=this.decorate(to_pretty,this.result.to),this.$cache.single.html(text_single),this.$cache.from.html(text_from),this.$cache.to.html(text_to)),this.calcLabels();var min=Math.min(this.labels.p_single_left,this.labels.p_from_left),single_left=this.labels.p_single_left+this.labels.p_single_fake,to_left=this.labels.p_to_left+this.labels.p_to_fake,max=Math.max(single_left,to_left);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",max=to_left):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",max=Math.max(single_left,to_left))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),min<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",max>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var from_min,from_max,to_min,to_max,o=this.options,c=this.$cache,is_from_min="number"==typeof o.from_min&&!isNaN(o.from_min),is_from_max="number"==typeof o.from_max&&!isNaN(o.from_max),is_to_min="number"==typeof o.to_min&&!isNaN(o.to_min),is_to_max="number"==typeof o.to_max&&!isNaN(o.to_max);"single"===o.type?o.from_shadow&&(is_from_min||is_from_max)?(from_min=this.convertToPercent(is_from_min?o.from_min:o.min),from_max=this.convertToPercent(is_from_max?o.from_max:o.max)-from_min,from_min=this.toFixed(from_min-this.coords.p_handle/100*from_min),from_max=this.toFixed(from_max-this.coords.p_handle/100*from_max),from_min+=this.coords.p_handle/2,c.shad_single[0].style.display="block",c.shad_single[0].style.left=from_min+"%",c.shad_single[0].style.width=from_max+"%"):c.shad_single[0].style.display="none":(o.from_shadow&&(is_from_min||is_from_max)?(from_min=this.convertToPercent(is_from_min?o.from_min:o.min),from_max=this.convertToPercent(is_from_max?o.from_max:o.max)-from_min,from_min=this.toFixed(from_min-this.coords.p_handle/100*from_min),from_max=this.toFixed(from_max-this.coords.p_handle/100*from_max),from_min+=this.coords.p_handle/2,c.shad_from[0].style.display="block",c.shad_from[0].style.left=from_min+"%",c.shad_from[0].style.width=from_max+"%"):c.shad_from[0].style.display="none",o.to_shadow&&(is_to_min||is_to_max)?(to_min=this.convertToPercent(is_to_min?o.to_min:o.min),to_max=this.convertToPercent(is_to_max?o.to_max:o.max)-to_min,to_min=this.toFixed(to_min-this.coords.p_handle/100*to_min),to_max=this.toFixed(to_max-this.coords.p_handle/100*to_max),to_min+=this.coords.p_handle/2,c.shad_to[0].style.display="block",c.shad_to[0].style.left=to_min+"%",c.shad_to[0].style.width=to_max+"%"):c.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(value,no_min){var val,percent,diapason=this.options.max-this.options.min,one_percent=diapason/100;return diapason?(val=no_min?value:value-this.options.min,percent=val/one_percent,this.toFixed(percent)):(this.no_diapason=!0,0)},convertToValue:function(percent){var min_length,max_length,min=this.options.min,max=this.options.max,min_decimals=min.toString().split(".")[1],max_decimals=max.toString().split(".")[1],avg_decimals=0,abs=0;if(0===percent)return this.options.min;if(100===percent)return this.options.max;min_decimals&&(min_length=min_decimals.length,avg_decimals=min_length),max_decimals&&(max_length=max_decimals.length,avg_decimals=max_length),min_length&&max_length&&(avg_decimals=min_length>=max_length?min_length:max_length),min<0&&(abs=Math.abs(min),min=+(min+abs).toFixed(avg_decimals),max=+(max+abs).toFixed(avg_decimals));var result,number=(max-min)/100*percent+min,string=this.options.step.toString().split(".")[1];return string?number=+number.toFixed(string.length):(number/=this.options.step,number=+(number*=this.options.step).toFixed(0)),abs&&(number-=abs),(result=string?+number.toFixed(string.length):this.toFixed(number))<this.options.min?result=this.options.min:result>this.options.max&&(result=this.options.max),result},calcWithStep:function(percent){var rounded=Math.round(percent/this.coords.p_step)*this.coords.p_step;return rounded>100&&(rounded=100),100===percent&&(rounded=100),this.toFixed(rounded)},checkMinInterval:function(p_current,p_next,type){var current,next,o=this.options;return o.min_interval?(current=this.convertToValue(p_current),next=this.convertToValue(p_next),"from"===type?next-current<o.min_interval&&(current=next-o.min_interval):current-next<o.min_interval&&(current=next+o.min_interval),this.convertToPercent(current)):p_current},checkMaxInterval:function(p_current,p_next,type){var current,next,o=this.options;return o.max_interval?(current=this.convertToValue(p_current),next=this.convertToValue(p_next),"from"===type?next-current>o.max_interval&&(current=next-o.max_interval):current-next>o.max_interval&&(current=next+o.max_interval),this.convertToPercent(current)):p_current},checkDiapason:function(p_num,min,max){var num=this.convertToValue(p_num),o=this.options;return"number"!=typeof min&&(min=o.min),"number"!=typeof max&&(max=o.max),num<min&&(num=min),num>max&&(num=max),this.convertToPercent(num)},toFixed:function(num){return+(num=num.toFixed(20))},_prettify:function(num){return this.options.prettify_enabled?this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(num):this.prettify(num):num},prettify:function(num){var n=num.toString();return n.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(left,width){return this.options.force_edges?(left<0?left=0:left>100-width&&(left=100-width),this.toFixed(left)):this.toFixed(left)},validate:function(){var value,i,o=this.options,r=this.result,v=o.values,vl=v.length;if("string"==typeof o.min&&(o.min=+o.min),"string"==typeof o.max&&(o.max=+o.max),"string"==typeof o.from&&(o.from=+o.from),"string"==typeof o.to&&(o.to=+o.to),"string"==typeof o.step&&(o.step=+o.step),"string"==typeof o.from_min&&(o.from_min=+o.from_min),"string"==typeof o.from_max&&(o.from_max=+o.from_max),"string"==typeof o.to_min&&(o.to_min=+o.to_min),"string"==typeof o.to_max&&(o.to_max=+o.to_max),"string"==typeof o.grid_num&&(o.grid_num=+o.grid_num),o.max<o.min&&(o.max=o.min),vl)for(o.p_values=[],o.min=0,o.max=vl-1,o.step=1,o.grid_num=o.max,o.grid_snap=!0,i=0;i<vl;i++)value=+v[i],isNaN(value)?value=v[i]:(v[i]=value,value=this._prettify(value)),o.p_values.push(value);("number"!=typeof o.from||isNaN(o.from))&&(o.from=o.min),("number"!=typeof o.to||isNaN(o.to))&&(o.to=o.max),"single"===o.type?(o.from<o.min&&(o.from=o.min),o.from>o.max&&(o.from=o.max)):(o.from<o.min&&(o.from=o.min),o.from>o.max&&(o.from=o.max),o.to<o.min&&(o.to=o.min),o.to>o.max&&(o.to=o.max),this.update_check.from&&(this.update_check.from!==o.from&&o.from>o.to&&(o.from=o.to),this.update_check.to!==o.to&&o.to<o.from&&(o.to=o.from)),o.from>o.to&&(o.from=o.to),o.to<o.from&&(o.to=o.from)),("number"!=typeof o.step||isNaN(o.step)||!o.step||o.step<0)&&(o.step=1),"number"==typeof o.from_min&&o.from<o.from_min&&(o.from=o.from_min),"number"==typeof o.from_max&&o.from>o.from_max&&(o.from=o.from_max),"number"==typeof o.to_min&&o.to<o.to_min&&(o.to=o.to_min),"number"==typeof o.to_max&&o.from>o.to_max&&(o.to=o.to_max),r&&(r.min!==o.min&&(r.min=o.min),r.max!==o.max&&(r.max=o.max),(r.from<r.min||r.from>r.max)&&(r.from=o.from),(r.to<r.min||r.to>r.max)&&(r.to=o.to)),("number"!=typeof o.min_interval||isNaN(o.min_interval)||!o.min_interval||o.min_interval<0)&&(o.min_interval=0),("number"!=typeof o.max_interval||isNaN(o.max_interval)||!o.max_interval||o.max_interval<0)&&(o.max_interval=0),o.min_interval&&o.min_interval>o.max-o.min&&(o.min_interval=o.max-o.min),o.max_interval&&o.max_interval>o.max-o.min&&(o.max_interval=o.max-o.min)},decorate:function(num,original){var decorated="",o=this.options;return o.prefix&&(decorated+=o.prefix),decorated+=num,o.max_postfix&&(o.values.length&&num===o.p_values[o.max]?(decorated+=o.max_postfix,o.postfix&&(decorated+=" ")):original===o.max&&(decorated+=o.max_postfix,o.postfix&&(decorated+=" "))),o.postfix&&(decorated+=o.postfix),decorated},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var i,z,local_small_max,small_p,result,o=this.options,total=o.max-o.min,big_num=o.grid_num,big_p=0,big_w=0,small_max=4,small_w=0,html="";for(this.calcGridMargin(),o.grid_snap&&(big_num=total/o.step),big_num>50&&(big_num=50),big_p=this.toFixed(100/big_num),big_num>4&&(small_max=3),big_num>7&&(small_max=2),big_num>14&&(small_max=1),big_num>28&&(small_max=0),i=0;i<big_num+1;i++){for(local_small_max=small_max,(big_w=this.toFixed(big_p*i))>100&&(big_w=100),this.coords.big[i]=big_w,small_p=(big_w-big_p*(i-1))/(local_small_max+1),z=1;z<=local_small_max&&0!==big_w;z++)small_w=this.toFixed(big_w-small_p*z),html+='<span class="irs-grid-pol small" style="left: '+small_w+'%"></span>';html+='<span class="irs-grid-pol" style="left: '+big_w+'%"></span>',result=this.convertToValue(big_w),result=o.values.length?o.p_values[result]:this._prettify(result),html+='<span class="irs-grid-text js-grid-text-'+i+'" style="left: '+big_w+'%">'+result+"</span>"}this.coords.big_num=Math.ceil(big_num+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(html),this.cacheGridLabels()}},cacheGridLabels:function(){var $label,i,num=this.coords.big_num;for(i=0;i<num;i++)$label=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push($label);this.calcGridLabels()},calcGridLabels:function(){var i,label,start=[],finish=[],num=this.coords.big_num;for(i=0;i<num;i++)this.coords.big_w[i]=this.$cache.grid_labels[i].outerWidth(!1),this.coords.big_p[i]=this.toFixed(this.coords.big_w[i]/this.coords.w_rs*100),this.coords.big_x[i]=this.toFixed(this.coords.big_p[i]/2),start[i]=this.toFixed(this.coords.big[i]-this.coords.big_x[i]),finish[i]=this.toFixed(start[i]+this.coords.big_p[i]);for(this.options.force_edges&&(start[0]<-this.coords.grid_gap&&(start[0]=-this.coords.grid_gap,finish[0]=this.toFixed(start[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),finish[num-1]>100+this.coords.grid_gap&&(finish[num-1]=100+this.coords.grid_gap,start[num-1]=this.toFixed(finish[num-1]-this.coords.big_p[num-1]),this.coords.big_x[num-1]=this.toFixed(this.coords.big_p[num-1]-this.coords.grid_gap))),this.calcGridCollision(2,start,finish),this.calcGridCollision(4,start,finish),i=0;i<num;i++)label=this.$cache.grid_labels[i][0],this.coords.big_x[i]!==Number.POSITIVE_INFINITY&&(label.style.marginLeft=-this.coords.big_x[i]+"%")},calcGridCollision:function(step,start,finish){var i,next_i,label,num=this.coords.big_num;for(i=0;i<num&&!((next_i=i+step/2)>=num);i+=step)label=this.$cache.grid_labels[next_i][0],finish[i]<=start[next_i]?label.style.visibility="visible":label.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(options){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=$.extend(this.options,options),this.validate(),this.updateResult(options),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),$.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},$.fn.ionRangeSlider=function(options){return this.each(function(){$.data(this,"ionRangeSlider")||$.data(this,"ionRangeSlider",new IonRangeSlider(this,options,plugin_count++))})},function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}()}(jQuery,document,window,navigator),function(jQuery){var S2=function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var S2=jQuery.fn.select2.amd;var requirejs,require,define,factory;return S2&&S2.requirejs||(S2?require=S2:S2={},function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,normalizedBaseParts,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name){for(name=name.split("/"),lastIndex=name.length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(normalizedBaseParts=baseParts.slice(0,baseParts.length-1),name=normalizedBaseParts.concat(name)),i=0;i<name.length;i++)if("."===(part=name[i]))name.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===name[2]||".."===name[i-1])continue;i>0&&(name.splice(i-1,2),i-=2)}name=name.join("/")}if((baseParts||starMap)&&map){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if((mapValue=map[baseParts.slice(0,j).join("/")])&&(mapValue=mapValue[nameSegment])){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&starMap[nameSegment]&&(foundStarMap=starMap[nameSegment],starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);return"string"!=typeof args[0]&&1===args.length&&args.push(null),req.apply(undef,args.concat([relName,forceSync]))}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name],defining[name]=!0,main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeRelParts(relName){return relName?splitPrefix(relName):[]}makeMap=function(name,relParts){var plugin,relName,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];return name=parts[1],prefix&&(prefix=normalize(prefix,relResourceName),plugin=callDep(prefix)),prefix?name=plugin&&plugin.normalize?plugin.normalize(name,(relName=relResourceName,function(name){return normalize(name,relName)})):normalize(name,relResourceName):(name=normalize(name,relResourceName),parts=splitPrefix(name),prefix=parts[0],name=parts[1],prefix&&(plugin=callDep(prefix))),{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}},handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return void 0!==e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:function(name){return function(){return config&&config.config&&config.config[name]||{}}}(name)}}},main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,usingExports,args=[],callbackType=typeof callback;if(relParts=makeRelParts(relName=relName||name),"undefined"===callbackType||"function"===callbackType){for(deps=!deps.length&&callback.length?["require","exports","module"]:deps,i=0;i<deps.length;i+=1)if(map=makeMap(deps[i],relParts),"require"===(depName=map.f))args[i]=handlers.require(name);else if("exports"===depName)args[i]=handlers.exports(name),usingExports=!0;else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{}),args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0,name&&(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:ret===undef&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)},requirejs=require=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,makeRelParts(callback)).f);if(!deps.splice){if((config=deps).deps&&req(config.deps,config.callback),!callback)return;callback.splice?(deps=callback,callback=relName,relName=null):deps=undef}return callback=callback||function(){},"function"==typeof relName&&(relName=forceSync,forceSync=alt),forceSync?main(undef,deps,callback,relName):setTimeout(function(){main(undef,deps,callback,relName)},4),req},req.config=function(cfg){return req(cfg)},requirejs._defined=defined,(define=function(name,deps,callback){if("string"!=typeof name)throw new Error("See almond README: incorrect module build, no module name");deps.splice||(callback=deps,deps=[]),hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])}).amd={jQuery:!0}}(),S2.requirejs=requirejs,S2.require=require,S2.define=define),S2.define("almond",function(){}),S2.define("jquery",[],function(){var _$=jQuery||$;return null==_$&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),_$}),S2.define("select2/utils",["jquery"],function($){var Utils={};function getMethods(theClass){var proto=theClass.prototype,methods=[];for(var methodName in proto){var m=proto[methodName];"function"==typeof m&&"constructor"!==methodName&&methods.push(methodName)}return methods}Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass}for(var key in SuperClass)__hasProp.call(SuperClass,key)&&(ChildClass[key]=SuperClass[key]);return BaseConstructor.prototype=SuperClass.prototype,ChildClass.prototype=new BaseConstructor,ChildClass.__super__=SuperClass.prototype,ChildClass},Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass),superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift,argCount=DecoratorClass.prototype.constructor.length,calledConstructor=SuperClass.prototype.constructor;argCount>0&&(unshift.call(arguments,SuperClass.prototype.constructor),calledConstructor=DecoratorClass.prototype.constructor),calledConstructor.apply(this,arguments)}DecoratorClass.displayName=SuperClass.displayName,DecoratedClass.prototype=new function(){this.constructor=DecoratedClass};for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod]}for(var calledMethod=function(methodName){var originalMethod=function(){};methodName in DecoratedClass.prototype&&(originalMethod=DecoratedClass.prototype[methodName]);var decoratedMethod=DecoratorClass.prototype[methodName];return function(){var unshift=Array.prototype.unshift;return unshift.call(arguments,originalMethod),decoratedMethod.apply(this,arguments)}},d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod)}return DecoratedClass};var Observable=function(){this.listeners={}};Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{},event in this.listeners?this.listeners[event].push(callback):this.listeners[event]=[callback]},Observable.prototype.trigger=function(event){var slice=Array.prototype.slice,params=slice.call(arguments,1);this.listeners=this.listeners||{},null==params&&(params=[]),0===params.length&&params.push({}),params[0]._type=event,event in this.listeners&&this.invoke(this.listeners[event],slice.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++)listeners[i].apply(this,params)},Utils.Observable=Observable,Utils.generateChars=function(length){for(var chars="",i=0;i<length;i++){var randomChar=Math.floor(36*Math.random());chars+=randomChar.toString(36)}return chars},Utils.bind=function(func,context){return function(){func.apply(context,arguments)}},Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-"),dataLevel=data;if(1!==keys.length){for(var k=0;k<keys.length;k++){var key=keys[k];(key=key.substring(0,1).toLowerCase()+key.substring(1))in dataLevel||(dataLevel[key]={}),k==keys.length-1&&(dataLevel[key]=data[originalKey]),dataLevel=dataLevel[key]}delete data[originalKey]}}return data},Utils.hasScroll=function(index,el){var $el=$(el),overflowX=el.style.overflowX,overflowY=el.style.overflowY;return(overflowX!==overflowY||"hidden"!==overflowY&&"visible"!==overflowY)&&("scroll"===overflowX||"scroll"===overflowY||$el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth)},Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof markup?markup:String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match]})},Utils.__cache={};var id=0;return Utils.GetUniqueElementId=function(element){var select2Id=element.getAttribute("data-select2-id");return null!=select2Id?select2Id:(select2Id=element.id?"select2-data-"+element.id:"select2-data-"+(++id).toString()+"-"+Utils.generateChars(4),element.setAttribute("data-select2-id",select2Id),select2Id)},Utils.StoreData=function(element,name,value){var id=Utils.GetUniqueElementId(element);Utils.__cache[id]||(Utils.__cache[id]={}),Utils.__cache[id][name]=value},Utils.GetData=function(element,name){var id=Utils.GetUniqueElementId(element);return name?Utils.__cache[id]&&null!=Utils.__cache[id][name]?Utils.__cache[id][name]:$(element).data(name):Utils.__cache[id]},Utils.RemoveData=function(element){var id=Utils.GetUniqueElementId(element);null!=Utils.__cache[id]&&delete Utils.__cache[id],element.removeAttribute("data-select2-id")},Utils.copyNonInternalCssClasses=function(dest,src){var destinationClasses=dest.getAttribute("class").trim().split(/\s+/);destinationClasses=destinationClasses.filter(function(clazz){return 0===clazz.indexOf("select2-")});var sourceClasses=src.getAttribute("class").trim().split(/\s+/);sourceClasses=sourceClasses.filter(function(clazz){return 0!==clazz.indexOf("select2-")});var replacements=destinationClasses.concat(sourceClasses);dest.setAttribute("class",replacements.join(" "))},Utils}),S2.define("select2/results",["jquery","./utils"],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element,this.data=dataAdapter,this.options=options,Results.__super__.constructor.call(this)}return Utils.Extend(Results,Utils.Observable),Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&$results.attr("aria-multiselectable","true"),this.$results=$results,$results},Results.prototype.clear=function(){this.$results.empty()},Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var $message=$('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args))),$message[0].className+=" select2-results__message",this.$results.append($message)},Results.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},Results.prototype.append=function(data){this.hideLoading();var $options=[];if(null!=data.results&&0!==data.results.length){data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d],$option=this.option(item);$options.push($option)}this.$results.append($options)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},Results.prototype.position=function($results,$dropdown){var $resultsContainer=$dropdown.find(".select2-results");$resultsContainer.append($results)},Results.prototype.sort=function(data){var sorter=this.options.get("sorter");return sorter(data)},Results.prototype.highlightFirstItem=function(){var $options=this.$results.find(".select2-results__option--selectable"),$selected=$options.filter(".select2-results__option--selected");$selected.length>0?$selected.first().trigger("mouseenter"):$options.first().trigger("mouseenter"),this.ensureHighlightVisible()},Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=selected.map(function(s){return s.id.toString()}),$options=self.$results.find(".select2-results__option--selectable");$options.each(function(){var $option=$(this),item=Utils.GetData(this,"data"),id=""+item.id;null!=item.element&&item.element.selected||null==item.element&&selectedIds.indexOf(id)>-1?(this.classList.add("select2-results__option--selected"),$option.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),$option.attr("aria-selected","false"))})})},Results.prototype.showLoading=function(params){this.hideLoading();var loadingMore=this.options.get("translations").get("searching"),loading={disabled:!0,loading:!0,text:loadingMore(params)},$loading=this.option(loading);$loading.className+=" loading-results",this.$results.prepend($loading)},Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},Results.prototype.option=function(data){var option=document.createElement("li");option.classList.add("select2-results__option"),option.classList.add("select2-results__option--selectable");var attrs={role:"option"},matches=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var attr in(null!=data.element&&matches.call(data.element,":disabled")||null==data.element&&data.disabled)&&(attrs["aria-disabled"]="true",option.classList.remove("select2-results__option--selectable"),option.classList.add("select2-results__option--disabled")),null==data.id&&option.classList.remove("select2-results__option--selectable"),null!=data._resultId&&(option.id=data._resultId),data.title&&(option.title=data.title),data.children&&(attrs.role="group",attrs["aria-label"]=data.text,option.classList.remove("select2-results__option--selectable"),option.classList.add("select2-results__option--group")),attrs){var val=attrs[attr];option.setAttribute(attr,val)}if(data.children){var $option=$(option),label=document.createElement("strong");label.className="select2-results__group",this.template(data,label);for(var $children=[],c=0;c<data.children.length;c++){var child=data.children[c],$child=this.option(child);$children.push($child)}var $childrenContainer=$("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});$childrenContainer.append($children),$option.append(label),$option.append($childrenContainer)}else this.template(data,option);return Utils.StoreData(option,"data",data),option},Results.prototype.bind=function(container,$container){var self=this,id=container.id+"-results";this.$results.attr("id",id),container.on("results:all",function(params){self.clear(),self.append(params.data),container.isOpen()&&(self.setClasses(),self.highlightFirstItem())}),container.on("results:append",function(params){self.append(params.data),container.isOpen()&&self.setClasses()}),container.on("query",function(params){self.hideMessages(),self.showLoading(params)}),container.on("select",function(){container.isOpen()&&(self.setClasses(),self.options.get("scrollAfterSelect")&&self.highlightFirstItem())}),container.on("unselect",function(){container.isOpen()&&(self.setClasses(),self.options.get("scrollAfterSelect")&&self.highlightFirstItem())}),container.on("open",function(){self.$results.attr("aria-expanded","true"),self.$results.attr("aria-hidden","false"),self.setClasses(),self.ensureHighlightVisible()}),container.on("close",function(){self.$results.attr("aria-expanded","false"),self.$results.attr("aria-hidden","true"),self.$results.removeAttr("aria-activedescendant")}),container.on("results:toggle",function(){var $highlighted=self.getHighlightedResults();0!==$highlighted.length&&$highlighted.trigger("mouseup")}),container.on("results:select",function(){var $highlighted=self.getHighlightedResults();if(0!==$highlighted.length){var data=Utils.GetData($highlighted[0],"data");$highlighted.hasClass("select2-results__option--selected")?self.trigger("close",{}):self.trigger("select",{data:data})}}),container.on("results:previous",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find(".select2-results__option--selectable"),currentIndex=$options.index($highlighted);if(!(currentIndex<=0)){var nextIndex=currentIndex-1;0===$highlighted.length&&(nextIndex=0);var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top,nextTop=$next.offset().top,nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);0===nextIndex?self.$results.scrollTop(0):nextTop-currentOffset<0&&self.$results.scrollTop(nextOffset)}}),container.on("results:next",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find(".select2-results__option--selectable"),currentIndex=$options.index($highlighted),nextIndex=currentIndex+1;if(!(nextIndex>=$options.length)){var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top+self.$results.outerHeight(!1),nextBottom=$next.offset().top+$next.outerHeight(!1),nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;0===nextIndex?self.$results.scrollTop(0):nextBottom>currentOffset&&self.$results.scrollTop(nextOffset)}}),container.on("results:focus",function(params){params.element[0].classList.add("select2-results__option--highlighted"),params.element[0].setAttribute("aria-selected","true")}),container.on("results:message",function(params){self.displayMessage(params)}),$.fn.mousewheel&&this.$results.on("mousewheel",function(e){var top=self.$results.scrollTop(),bottom=self.$results.get(0).scrollHeight-top+e.deltaY,isAtTop=e.deltaY>0&&top-e.deltaY<=0,isAtBottom=e.deltaY<0&&bottom<=self.$results.height();isAtTop?(self.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):isAtBottom&&(self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(evt){var $this=$(this),data=Utils.GetData(this,"data");$this.hasClass("select2-results__option--selected")?self.options.get("multiple")?self.trigger("unselect",{originalEvent:evt,data:data}):self.trigger("close",{}):self.trigger("select",{originalEvent:evt,data:data})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(evt){var data=Utils.GetData(this,"data");self.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),self.trigger("results:focus",{data:data,element:$(this)})})},Results.prototype.getHighlightedResults=function(){var $highlighted=this.$results.find(".select2-results__option--highlighted");return $highlighted},Results.prototype.destroy=function(){this.$results.remove()},Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if(0!==$highlighted.length){var $options=this.$results.find(".select2-results__option--selectable"),currentIndex=$options.index($highlighted),currentOffset=this.$results.offset().top,nextTop=$highlighted.offset().top,nextOffset=this.$results.scrollTop()+(nextTop-currentOffset),offsetDelta=nextTop-currentOffset;nextOffset-=2*$highlighted.outerHeight(!1),currentIndex<=2?this.$results.scrollTop(0):(offsetDelta>this.$results.outerHeight()||offsetDelta<0)&&this.$results.scrollTop(nextOffset)}},Results.prototype.template=function(result,container){var template=this.options.get("templateResult"),escapeMarkup=this.options.get("escapeMarkup"),content=template(result,container);null==content?container.style.display="none":"string"==typeof content?container.innerHTML=escapeMarkup(content):$(container).append(content)},Results}),S2.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),S2.define("select2/selection/base",["jquery","../utils","../keys"],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element,this.options=options,BaseSelection.__super__.constructor.call(this)}return Utils.Extend(BaseSelection,Utils.Observable),BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=Utils.GetData(this.$element[0],"old-tabindex")?this._tabindex=Utils.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),$selection.attr("title",this.$element.attr("title")),$selection.attr("tabindex",this._tabindex),$selection.attr("aria-disabled","false"),this.$selection=$selection,$selection},BaseSelection.prototype.bind=function(container,$container){var self=this,resultsId=container.id+"-results";this.container=container,this.$selection.on("focus",function(evt){self.trigger("focus",evt)}),this.$selection.on("blur",function(evt){self._handleBlur(evt)}),this.$selection.on("keydown",function(evt){self.trigger("keypress",evt),evt.which===KEYS.SPACE&&evt.preventDefault()}),container.on("results:focus",function(params){self.$selection.attr("aria-activedescendant",params.data._resultId)}),container.on("selection:update",function(params){self.update(params.data)}),container.on("open",function(){self.$selection.attr("aria-expanded","true"),self.$selection.attr("aria-owns",resultsId),self._attachCloseHandler(container)}),container.on("close",function(){self.$selection.attr("aria-expanded","false"),self.$selection.removeAttr("aria-activedescendant"),self.$selection.removeAttr("aria-owns"),self.$selection.trigger("focus"),self._detachCloseHandler(container)}),container.on("enable",function(){self.$selection.attr("tabindex",self._tabindex),self.$selection.attr("aria-disabled","false")}),container.on("disable",function(){self.$selection.attr("tabindex","-1"),self.$selection.attr("aria-disabled","true")})},BaseSelection.prototype._handleBlur=function(evt){var self=this;window.setTimeout(function(){document.activeElement==self.$selection[0]||$.contains(self.$selection[0],document.activeElement)||self.trigger("blur",evt)},1)},BaseSelection.prototype._attachCloseHandler=function(container){$(document.body).on("mousedown.select2."+container.id,function(e){var $target=$(e.target),$select=$target.closest(".select2"),$all=$(".select2.select2-container--open");$all.each(function(){if(this!=$select[0]){var $element=Utils.GetData(this,"element");$element.select2("close")}})})},BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off("mousedown.select2."+container.id)},BaseSelection.prototype.position=function($selection,$container){var $selectionContainer=$container.find(".selection");$selectionContainer.append($selection)},BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container)},BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.")},BaseSelection.prototype.isEnabled=function(){return!this.isDisabled()},BaseSelection.prototype.isDisabled=function(){return this.options.get("disabled")},BaseSelection}),S2.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(SingleSelection,BaseSelection),SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);return $selection[0].classList.add("select2-selection--single"),$selection.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),$selection},SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",id),this.$selection.on("mousedown",function(evt){1===evt.which&&self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("focus",function(evt){}),this.$selection.on("blur",function(evt){}),container.on("focus",function(evt){container.isOpen()||self.$selection.trigger("focus")})},SingleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty(),$rendered.removeAttr("title")},SingleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection"),escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container))},SingleSelection.prototype.selectionContainer=function(){return $("<span></span>")},SingleSelection.prototype.update=function(data){if(0!==data.length){var selection=data[0],$rendered=this.$selection.find(".select2-selection__rendered"),formatted=this.display(selection,$rendered);$rendered.empty().append(formatted);var title=selection.title||selection.text;title?$rendered.attr("title",title):$rendered.removeAttr("title")}else this.clear()},SingleSelection}),S2.define("select2/selection/multiple",["jquery","./base","../utils"],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(MultipleSelection,BaseSelection),MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);return $selection[0].classList.add("select2-selection--multiple"),$selection.html('<ul class="select2-selection__rendered"></ul>'),$selection},MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id),this.$selection.on("click",function(evt){self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("click",".select2-selection__choice__remove",function(evt){if(!self.isDisabled()){var $remove=$(this),$selection=$remove.parent(),data=Utils.GetData($selection[0],"data");self.trigger("unselect",{originalEvent:evt,data:data})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(evt){self.isDisabled()||evt.stopPropagation()})},MultipleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty(),$rendered.removeAttr("title")},MultipleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection"),escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container))},MultipleSelection.prototype.selectionContainer=function(){var $container=$('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>');return $container},MultipleSelection.prototype.update=function(data){if(this.clear(),0!==data.length){for(var $selections=[],selectionIdPrefix=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",d=0;d<data.length;d++){var selection=data[d],$selection=this.selectionContainer(),formatted=this.display(selection,$selection),selectionId=selectionIdPrefix+Utils.generateChars(4)+"-";selection.id?selectionId+=selection.id:selectionId+=Utils.generateChars(4),$selection.find(".select2-selection__choice__display").append(formatted).attr("id",selectionId);var title=selection.title||selection.text;title&&$selection.attr("title",title);var removeItem=this.options.get("translations").get("removeItem"),$remove=$selection.find(".select2-selection__choice__remove");$remove.attr("title",removeItem()),$remove.attr("aria-label",removeItem()),$remove.attr("aria-describedby",selectionId),Utils.StoreData($selection[0],"data",selection),$selections.push($selection)}var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.append($selections)}},MultipleSelection}),S2.define("select2/selection/placeholder",[],function(){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options)}return Placeholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();return $placeholder.html(this.display(placeholder)),$placeholder[0].classList.add("select2-selection__placeholder"),$placeholder[0].classList.remove("select2-selection__choice"),$placeholder},Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=1==data.length&&data[0].id!=this.placeholder.id,multipleSelections=data.length>1;if(multipleSelections||singlePlaceholder)return decorated.call(this,data);this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder)},Placeholder}),S2.define("select2/selection/allowClear",["jquery","../keys","../utils"],function($,KEYS,Utils){function AllowClear(){}return AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(evt){self._handleClear(evt)}),container.on("keypress",function(evt){self._handleKeyboardClear(evt,container)})},AllowClear.prototype._handleClear=function(_,evt){if(!this.isDisabled()){var $clear=this.$selection.find(".select2-selection__clear");if(0!==$clear.length){evt.stopPropagation();var data=Utils.GetData($clear[0],"data"),previousVal=this.$element.val();this.$element.val(this.placeholder.id);var unselectData={data:data};if(this.trigger("clear",unselectData),unselectData.prevented)this.$element.val(previousVal);else{for(var d=0;d<data.length;d++)if(unselectData={data:data[d]},this.trigger("unselect",unselectData),unselectData.prevented)return void this.$element.val(previousVal);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},AllowClear.prototype._handleKeyboardClear=function(_,evt,container){container.isOpen()||evt.which!=KEYS.DELETE&&evt.which!=KEYS.BACKSPACE||this._handleClear(evt)},AllowClear.prototype.update=function(decorated,data){if(decorated.call(this,data),this.$selection.find(".select2-selection__clear").remove(),!(this.$selection.find(".select2-selection__placeholder").length>0||0===data.length)){var selectionId=this.$selection.find(".select2-selection__rendered").attr("id"),removeAll=this.options.get("translations").get("removeAllItems"),$remove=$('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');$remove.attr("title",removeAll()),$remove.attr("aria-label",removeAll()),$remove.attr("aria-describedby",selectionId),Utils.StoreData($remove[0],"data",data),this.$selection.prepend($remove)}},AllowClear}),S2.define("select2/selection/search",["jquery","../utils","../keys"],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options)}return Search.prototype.render=function(decorated){var $search=$('<span class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');this.$searchContainer=$search,this.$search=$search.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete"));var $rendered=decorated.call(this);return this._transferTabIndex(),$rendered.append(this.$searchContainer),$rendered},Search.prototype.bind=function(decorated,container,$container){var self=this,resultsId=container.id+"-results",selectionId=container.id+"-container";decorated.call(this,container,$container),self.$search.attr("aria-describedby",selectionId),container.on("open",function(){self.$search.attr("aria-controls",resultsId),self.$search.trigger("focus")}),container.on("close",function(){self.$search.val(""),self.resizeSearch(),self.$search.removeAttr("aria-controls"),self.$search.removeAttr("aria-activedescendant"),self.$search.trigger("focus")}),container.on("enable",function(){self.$search.prop("disabled",!1),self._transferTabIndex()}),container.on("disable",function(){self.$search.prop("disabled",!0)}),container.on("focus",function(evt){self.$search.trigger("focus")}),container.on("results:focus",function(params){params.data._resultId?self.$search.attr("aria-activedescendant",params.data._resultId):self.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(evt){self.trigger("focus",evt)}),this.$selection.on("focusout",".select2-search--inline",function(evt){self._handleBlur(evt)}),this.$selection.on("keydown",".select2-search--inline",function(evt){evt.stopPropagation(),self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented();var key=evt.which;if(key===KEYS.BACKSPACE&&""===self.$search.val()){var $previousChoice=self.$selection.find(".select2-selection__choice").last();if($previousChoice.length>0){var item=Utils.GetData($previousChoice[0],"data");self.searchRemoveChoice(item),evt.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(evt){self.$search.val()&&evt.stopPropagation()});var msie=document.documentMode,disableInputEvents=msie&&msie<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(evt){disableInputEvents?self.$selection.off("input.search input.searchcheck"):self.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(evt){if(disableInputEvents&&"input"===evt.type)self.$selection.off("input.search input.searchcheck");else{var key=evt.which;key!=KEYS.SHIFT&&key!=KEYS.CTRL&&key!=KEYS.ALT&&key!=KEYS.TAB&&self.handleSearch(evt)}})},Search.prototype._transferTabIndex=function(decorated){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text)},Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),decorated.call(this,data),this.resizeSearch(),searchHadFocus&&this.$search.trigger("focus")},Search.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item}),this.$search.val(item.text),this.handleSearch()},Search.prototype.resizeSearch=function(){this.$search.css("width","25px");var width="100%";if(""===this.$search.attr("placeholder")){var minimumWidth=this.$search.val().length+1;width=.75*minimumWidth+"em"}this.$search.css("width",width)},Search}),S2.define("select2/selection/selectionCss",["../utils"],function(Utils){function SelectionCSS(){}return SelectionCSS.prototype.render=function(decorated){var $selection=decorated.call(this),selectionCssClass=this.options.get("selectionCssClass")||"";return-1!==selectionCssClass.indexOf(":all:")&&(selectionCssClass=selectionCssClass.replace(":all:",""),Utils.copyNonInternalCssClasses($selection[0],this.$element[0])),$selection.addClass(selectionCssClass),$selection},SelectionCSS}),S2.define("select2/selection/eventRelay",["jquery"],function($){function EventRelay(){}return EventRelay.prototype.bind=function(decorated,container,$container){var self=this,relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],preventableEvents=["opening","closing","selecting","unselecting","clearing"];decorated.call(this,container,$container),container.on("*",function(name,params){if(-1!==relayEvents.indexOf(name)){params=params||{};var evt=$.Event("select2:"+name,{params:params});self.$element.trigger(evt),-1!==preventableEvents.indexOf(name)&&(params.prevented=evt.isDefaultPrevented())}})},EventRelay}),S2.define("select2/translation",["jquery","require"],function($,require){function Translation(dict){this.dict=dict||{}}return Translation.prototype.all=function(){return this.dict},Translation.prototype.get=function(key){return this.dict[key]},Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict)},Translation._cache={},Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations}return new Translation(Translation._cache[path])},Translation}),S2.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),S2.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this)}return Utils.Extend(BaseAdapter,Utils.Observable),BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.")},BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.")},BaseAdapter.prototype.bind=function(container,$container){},BaseAdapter.prototype.destroy=function(){},BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";return id+=Utils.generateChars(4),null!=data.id?id+="-"+data.id.toString():id+="-"+Utils.generateChars(4),id},BaseAdapter}),S2.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element,this.options=options,SelectAdapter.__super__.constructor.call(this)}return Utils.Extend(SelectAdapter,BaseAdapter),SelectAdapter.prototype.current=function(callback){var self=this,data=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(selectedElement){return self.item($(selectedElement))});callback(data)},SelectAdapter.prototype.select=function(data){var self=this;if(data.selected=!0,null!=data.element&&"option"===data.element.tagName.toLowerCase())return data.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(currentData){var val=[];(data=[data]).push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;-1===val.indexOf(id)&&val.push(id)}self.$element.val(val),self.$element.trigger("input").trigger("change")});else{var val=data.id;this.$element.val(val),this.$element.trigger("input").trigger("change")}},SelectAdapter.prototype.unselect=function(data){var self=this;if(this.$element.prop("multiple")){if(data.selected=!1,null!=data.element&&"option"===data.element.tagName.toLowerCase())return data.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(currentData){for(var val=[],d=0;d<currentData.length;d++){var id=currentData[d].id;id!==data.id&&-1===val.indexOf(id)&&val.push(id)}self.$element.val(val),self.$element.trigger("input").trigger("change")})}},SelectAdapter.prototype.bind=function(container,$container){var self=this;this.container=container,container.on("select",function(params){self.select(params.data)}),container.on("unselect",function(params){self.unselect(params.data)})},SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){Utils.RemoveData(this)})},SelectAdapter.prototype.query=function(params,callback){var data=[],self=this,$options=this.$element.children();$options.each(function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var $option=$(this),option=self.item($option),matches=self.matches(params,option);null!==matches&&data.push(matches)}}),callback({results:data})},SelectAdapter.prototype.addOptions=function($options){this.$element.append($options)},SelectAdapter.prototype.option=function(data){var option;data.children?(option=document.createElement("optgroup")).label=data.text:void 0!==(option=document.createElement("option")).textContent?option.textContent=data.text:option.innerText=data.text,void 0!==data.id&&(option.value=data.id),data.disabled&&(option.disabled=!0),data.selected&&(option.selected=!0),data.title&&(option.title=data.title);var normalizedData=this._normalizeItem(data);return normalizedData.element=option,Utils.StoreData(option,"data",normalizedData),$(option)},SelectAdapter.prototype.item=function($option){var data={};if(null!=(data=Utils.GetData($option[0],"data")))return data;var option=$option[0];if("option"===option.tagName.toLowerCase())data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")};else if("optgroup"===option.tagName.toLowerCase()){data={text:$option.prop("label"),children:[],title:$option.prop("title")};for(var $children=$option.children("option"),children=[],c=0;c<$children.length;c++){var $child=$($children[c]),child=this.item($child);children.push(child)}data.children=children}return(data=this._normalizeItem(data)).element=$option[0],Utils.StoreData($option[0],"data",data),data},SelectAdapter.prototype._normalizeItem=function(item){return item!==Object(item)&&(item={id:item,text:item}),null!=(item=$.extend({},{text:""},item)).id&&(item.id=item.id.toString()),null!=item.text&&(item.text=item.text.toString()),null==item._resultId&&item.id&&null!=this.container&&(item._resultId=this.generateResultId(this.container,item)),$.extend({},{selected:!1,disabled:!1},item)},SelectAdapter.prototype.matches=function(params,data){var matcher=this.options.get("matcher");return matcher(params,data)},SelectAdapter}),S2.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){this._dataToConvert=options.get("data")||[],ArrayAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(ArrayAdapter,SelectAdapter),ArrayAdapter.prototype.bind=function(container,$container){ArrayAdapter.__super__.bind.call(this,container,$container),this.addOptions(this.convertToOptions(this._dataToConvert))},ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString()});0===$option.length&&($option=this.option(data),this.addOptions($option)),ArrayAdapter.__super__.select.call(this,data)},ArrayAdapter.prototype.convertToOptions=function(data){var self=this,$existing=this.$element.find("option"),existingIds=$existing.map(function(){return self.item($(this)).id}).get(),$options=[];function onlyItem(item){return function(){return $(this).val()==item.id}}for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if(existingIds.indexOf(item.id)>=0){var $existingOption=$existing.filter(onlyItem(item)),existingData=this.item($existingOption),newData=$.extend(!0,{},item,existingData),$newOption=this.option(newData);$existingOption.replaceWith($newOption)}else{var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);$option.append($children)}$options.push($option)}}return $options},ArrayAdapter}),S2.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),AjaxAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(AjaxAdapter,ArrayAdapter),AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $.extend({},params,{q:params.term})},transport:function(params,success,failure){var $request=$.ajax(params);return $request.then(success),$request.fail(failure),$request}};return $.extend({},defaults,options,!0)},AjaxAdapter.prototype.processResults=function(results){return results},AjaxAdapter.prototype.query=function(params,callback){var self=this;null!=this._request&&($.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var options=$.extend({type:"GET"},this.ajaxOptions);function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);self.options.get("debug")&&window.console&&console.error&&(results&&results.results&&Array.isArray(results.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),callback(results)},function(){"status"in $request&&(0===$request.status||"0"===$request.status)||self.trigger("results:message",{message:"errorLoading"})});self._request=$request}"function"==typeof options.url&&(options.url=options.url.call(this.$element,params)),"function"==typeof options.data&&(options.data=options.data.call(this.$element,params)),this.ajaxOptions.delay&&null!=params.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay)):request()},AjaxAdapter}),S2.define("select2/data/tags",["jquery"],function($){function Tags(decorated,$element,options){var tags=options.get("tags"),createTag=options.get("createTag");void 0!==createTag&&(this.createTag=createTag);var insertTag=options.get("insertTag");if(void 0!==insertTag&&(this.insertTag=insertTag),decorated.call(this,$element,options),Array.isArray(tags))for(var t=0;t<tags.length;t++){var tag=tags[t],item=this._normalizeItem(tag),$option=this.option(item);this.$element.append($option)}}return Tags.prototype.query=function(decorated,params,callback){var self=this;this._removeOldTags(),null!=params.term&&null==params.page?decorated.call(this,params,function wrapper(obj,child){for(var data=obj.results,i=0;i<data.length;i++){var option=data[i],checkChildren=null!=option.children&&!wrapper({results:option.children},!0),optionText=(option.text||"").toUpperCase(),paramsTerm=(params.term||"").toUpperCase(),checkText=optionText===paramsTerm;if(checkText||checkChildren)return!child&&(obj.data=data,void callback(obj))}if(child)return!0;var tag=self.createTag(params);if(null!=tag){var $option=self.option(tag);$option.attr("data-select2-tag",!0),self.addOptions([$option]),self.insertTag(data,tag)}obj.results=data,callback(obj)}):decorated.call(this,params,callback)},Tags.prototype.createTag=function(decorated,params){if(null==params.term)return null;var term=params.term.trim();return""===term?null:{id:term,text:term}},Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag)},Tags.prototype._removeOldTags=function(_){var $options=this.$element.find("option[data-select2-tag]");$options.each(function(){this.selected||$(this).remove()})},Tags}),S2.define("select2/data/tokenizer",["jquery"],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");void 0!==tokenizer&&(this.tokenizer=tokenizer),decorated.call(this,$element,options)}return Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field")},Tokenizer.prototype.query=function(decorated,params,callback){var self=this;params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,function(data){var item=self._normalizeItem(data);if(!self.$element.find("option").filter(function(){return $(this).val()===item.id}).length){var $option=self.option(item);$option.attr("data-select2-tag",!0),self._removeOldTags(),self.addOptions([$option])}!function(data){self.trigger("select",{data:data})}(item)});tokenData.term!==params.term&&(this.$search.length&&(this.$search.val(tokenData.term),this.$search.trigger("focus")),params.term=tokenData.term),decorated.call(this,params,callback)},Tokenizer.prototype.tokenizer=function(_,params,options,callback){for(var separators=options.get("tokenSeparators")||[],term=params.term,i=0,createTag=this.createTag||function(params){return{id:params.term,text:params.term}};i<term.length;){var termChar=term[i];if(-1!==separators.indexOf(termChar)){var part=term.substr(0,i),partParams=$.extend({},params,{term:part}),data=createTag(partParams);null!=data?(callback(data),term=term.substr(i+1)||"",i=0):i++}else i++}return{term:term}},Tokenizer}),S2.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength"),decorated.call(this,$e,options)}return MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",params.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MinimumInputLength}),S2.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength"),decorated.call(this,$e,options)}return MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",this.maximumInputLength>0&&params.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MaximumInputLength}),S2.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength"),decorated.call(this,$e,options)}return MaximumSelectionLength.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("select",function(){self._checkIfMaximumSelected()})},MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this._checkIfMaximumSelected(function(){decorated.call(self,params,callback)})},MaximumSelectionLength.prototype._checkIfMaximumSelected=function(_,successCallback){var self=this;this.current(function(currentData){var count=null!=currentData?currentData.length:0;self.maximumSelectionLength>0&&count>=self.maximumSelectionLength?self.trigger("results:message",{message:"maximumSelected",args:{maximum:self.maximumSelectionLength}}):successCallback&&successCallback()})},MaximumSelectionLength}),S2.define("select2/dropdown",["jquery","./utils"],function($,Utils){function Dropdown($element,options){this.$element=$element,this.options=options,Dropdown.__super__.constructor.call(this)}return Utils.Extend(Dropdown,Utils.Observable),Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown"><span class="select2-results"></span></span>');return $dropdown.attr("dir",this.options.get("dir")),this.$dropdown=$dropdown,$dropdown},Dropdown.prototype.bind=function(){},Dropdown.prototype.position=function($dropdown,$container){},Dropdown.prototype.destroy=function(){this.$dropdown.remove()},Dropdown}),S2.define("select2/dropdown/search",["jquery"],function($){function Search(){}return Search.prototype.render=function(decorated){var $rendered=decorated.call(this),$search=$('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=$search,this.$search=$search.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),$rendered.prepend($search),$rendered},Search.prototype.bind=function(decorated,container,$container){var self=this,resultsId=container.id+"-results";decorated.call(this,container,$container),this.$search.on("keydown",function(evt){self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented()}),this.$search.on("input",function(evt){$(this).off("keyup")}),this.$search.on("keyup input",function(evt){self.handleSearch(evt)}),container.on("open",function(){self.$search.attr("tabindex",0),self.$search.attr("aria-controls",resultsId),self.$search.trigger("focus"),window.setTimeout(function(){self.$search.trigger("focus")},0)}),container.on("close",function(){self.$search.attr("tabindex",-1),self.$search.removeAttr("aria-controls"),self.$search.removeAttr("aria-activedescendant"),self.$search.val(""),self.$search.trigger("blur")}),container.on("focus",function(){container.isOpen()||self.$search.trigger("focus")}),container.on("results:all",function(params){if(null==params.query.term||""===params.query.term){var showSearch=self.showSearch(params);showSearch?self.$searchContainer[0].classList.remove("select2-search--hide"):self.$searchContainer[0].classList.add("select2-search--hide")}}),container.on("results:focus",function(params){params.data._resultId?self.$search.attr("aria-activedescendant",params.data._resultId):self.$search.removeAttr("aria-activedescendant")})},Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.showSearch=function(_,params){return!0},Search}),S2.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options,dataAdapter)}return HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results),decorated.call(this,data)},HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},HidePlaceholder.prototype.removePlaceholder=function(_,data){for(var modifiedData=data.slice(0),d=data.length-1;d>=0;d--){var item=data[d];this.placeholder.id===item.id&&modifiedData.splice(d,1)}return modifiedData},HidePlaceholder}),S2.define("select2/dropdown/infiniteScroll",["jquery"],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={},decorated.call(this,$element,options,dataAdapter),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove(),this.loading=!1,decorated.call(this,data),this.showLoadingMore(data)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("query",function(params){self.lastParams=params,self.loading=!0}),container.on("query:append",function(params){self.lastParams=params,self.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},InfiniteScroll.prototype.loadMoreIfNeeded=function(){var isLoadMoreVisible=$.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&isLoadMoreVisible){var currentOffset=this.$results.offset().top+this.$results.outerHeight(!1),loadingMoreOffset=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1);currentOffset+50>=loadingMoreOffset&&this.loadMore()}},InfiniteScroll.prototype.loadMore=function(){this.loading=!0;var params=$.extend({},{page:1},this.lastParams);params.page++,this.trigger("query:append",params)},InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more},InfiniteScroll.prototype.createLoadingMore=function(){var $option=$('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),message=this.options.get("translations").get("loadingMore");return $option.html(message(this.lastParams)),$option},InfiniteScroll}),S2.define("select2/dropdown/attachBody",["jquery","../utils"],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=$(options.get("dropdownParent")||document.body),decorated.call(this,$element,options)}return AttachBody.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("open",function(){self._showDropdown(),self._attachPositioningHandler(container),self._bindContainerResultHandlers(container)}),container.on("close",function(){self._hideDropdown(),self._detachPositioningHandler(container)}),this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation()})},AttachBody.prototype.destroy=function(decorated){decorated.call(this),this.$dropdownContainer.remove()},AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class")),$dropdown[0].classList.remove("select2"),$dropdown[0].classList.add("select2-container--open"),$dropdown.css({position:"absolute",top:-999999}),this.$container=$container},AttachBody.prototype.render=function(decorated){var $container=$("<span></span>"),$dropdown=decorated.call(this);return $container.append($dropdown),this.$dropdownContainer=$container,$container},AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach()},AttachBody.prototype._bindContainerResultHandlers=function(decorated,container){if(!this._containerResultsHandlersBound){var self=this;container.on("results:all",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("results:append",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("results:message",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("select",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("unselect",function(){self._positionDropdown(),self._resizeDropdown()}),this._containerResultsHandlersBound=!0}},AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self=this,scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){Utils.StoreData(this,"select2-scroll-position",{x:$(this).scrollLeft(),y:$(this).scrollTop()})}),$watchers.on(scrollEvent,function(ev){var position=Utils.GetData(this,"select2-scroll-position");$(this).scrollTop(position.y)}),$(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self._positionDropdown(),self._resizeDropdown()})},AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.off(scrollEvent),$(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent)},AttachBody.prototype._positionDropdown=function(){var $window=$(window),isCurrentlyAbove=this.$dropdown[0].classList.contains("select2-dropdown--above"),isCurrentlyBelow=this.$dropdown[0].classList.contains("select2-dropdown--below"),newDirection=null,offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(!1);var container={height:this.$container.outerHeight(!1)};container.top=offset.top,container.bottom=offset.top+container.height;var dropdown={height:this.$dropdown.outerHeight(!1)},viewport={top:$window.scrollTop(),bottom:$window.scrollTop()+$window.height()},enoughRoomAbove=viewport.top<offset.top-dropdown.height,enoughRoomBelow=viewport.bottom>offset.bottom+dropdown.height,css={left:offset.left,top:container.bottom},$offsetParent=this.$dropdownParent;"static"===$offsetParent.css("position")&&($offsetParent=$offsetParent.offsetParent());var parentOffset={top:0,left:0};($.contains(document.body,$offsetParent[0])||$offsetParent[0].isConnected)&&(parentOffset=$offsetParent.offset()),css.top-=parentOffset.top,css.left-=parentOffset.left,isCurrentlyAbove||isCurrentlyBelow||(newDirection="below"),enoughRoomBelow||!enoughRoomAbove||isCurrentlyAbove?!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove&&(newDirection="below"):newDirection="above",("above"==newDirection||isCurrentlyAbove&&"below"!==newDirection)&&(css.top=container.top-parentOffset.top-dropdown.height),null!=newDirection&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+newDirection),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+newDirection)),this.$dropdownContainer.css(css)},AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(css.minWidth=css.width,css.position="relative",css.width="auto"),this.$dropdown.css(css)},AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},AttachBody}),S2.define("select2/dropdown/minimumResultsForSearch",[],function(){function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),decorated.call(this,$element,options,dataAdapter)}return MinimumResultsForSearch.prototype.showSearch=function(decorated,params){return!(function countResults(data){for(var count=0,d=0;d<data.length;d++){var item=data[d];item.children?count+=countResults(item.children):count++}return count}(params.data.results)<this.minimumResultsForSearch)&&decorated.call(this,params)},MinimumResultsForSearch}),S2.define("select2/dropdown/selectOnClose",["../utils"],function(Utils){function SelectOnClose(){}return SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("close",function(params){self._handleSelectOnClose(params)})},SelectOnClose.prototype._handleSelectOnClose=function(_,params){if(params&&null!=params.originalSelect2Event){var event=params.originalSelect2Event;if("select"===event._type||"unselect"===event._type)return}var $highlightedResults=this.getHighlightedResults();if(!($highlightedResults.length<1)){var data=Utils.GetData($highlightedResults[0],"data");null!=data.element&&data.element.selected||null==data.element&&data.selected||this.trigger("select",{data:data})}},SelectOnClose}),S2.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}return CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("select",function(evt){self._selectTriggered(evt)}),container.on("unselect",function(evt){self._selectTriggered(evt)})},CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;originalEvent&&(originalEvent.ctrlKey||originalEvent.metaKey)||this.trigger("close",{originalEvent:originalEvent,originalSelect2Event:evt})},CloseOnSelect}),S2.define("select2/dropdown/dropdownCss",["../utils"],function(Utils){function DropdownCSS(){}return DropdownCSS.prototype.render=function(decorated){var $dropdown=decorated.call(this),dropdownCssClass=this.options.get("dropdownCssClass")||"";return-1!==dropdownCssClass.indexOf(":all:")&&(dropdownCssClass=dropdownCssClass.replace(":all:",""),Utils.copyNonInternalCssClasses($dropdown[0],this.$element[0])),$dropdown.addClass(dropdownCssClass),$dropdown},DropdownCSS}),S2.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(args){var overChars=args.input.length-args.maximum,message="Please delete "+overChars+" character";return 1!=overChars&&(message+="s"),message},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length,message="Please enter "+remainingChars+" or more characters";return message},loadingMore:function(){return"Loading more results…"},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";return 1!=args.maximum&&(message+="s"),message},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"}}}),S2.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./i18n/en"],function($,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,SelectionCSS,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,DropdownCSS,EnglishTranslation){function Defaults(){this.reset()}Defaults.prototype.apply=function(options){if(null==(options=$.extend(!0,{},this.defaults,options)).dataAdapter&&(null!=options.ajax?options.dataAdapter=AjaxData:null!=options.data?options.dataAdapter=ArrayData:options.dataAdapter=SelectData,options.minimumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength)),options.maximumInputLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength)),options.maximumSelectionLength>0&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength)),options.tags&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags)),null==options.tokenSeparators&&null==options.tokenizer||(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer))),null==options.resultsAdapter&&(options.resultsAdapter=ResultsList,null!=options.ajax&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll)),null!=options.placeholder&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder)),options.selectOnClose&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose))),null==options.dropdownAdapter){if(options.multiple)options.dropdownAdapter=Dropdown;else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown}0!==options.minimumResultsForSearch&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch)),options.closeOnSelect&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect)),null!=options.dropdownCssClass&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS)),options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody)}null==options.selectionAdapter&&(options.multiple?options.selectionAdapter=MultipleSelection:options.selectionAdapter=SingleSelection,null!=options.placeholder&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder)),options.allowClear&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear)),options.multiple&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch)),null!=options.selectionCssClass&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionCSS)),options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay)),options.language=this._resolveLanguage(options.language),options.language.push("en");for(var uniqueLanguages=[],l=0;l<options.language.length;l++){var language=options.language[l];-1===uniqueLanguages.indexOf(language)&&uniqueLanguages.push(language)}return options.language=uniqueLanguages,options.translations=this._processTranslations(options.language,options.debug),options},Defaults.prototype.reset=function(){function stripDiacritics(text){return text.replace(/[^\u0000-\u007E]/g,function(a){return DIACRITICS[a]||a})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:Utils.escapeMarkup,language:{},matcher:function matcher(params,data){if(null==params.term||""===params.term.trim())return data;if(data.children&&data.children.length>0){for(var match=$.extend(!0,{},data),c=data.children.length-1;c>=0;c--){var child=data.children[c],matches=matcher(params,child);null==matches&&match.children.splice(c,1)}return match.children.length>0?match:matcher(params,match)}var original=stripDiacritics(data.text).toUpperCase(),term=stripDiacritics(params.term).toUpperCase();return original.indexOf(term)>-1?data:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(data){return data},templateResult:function(result){return result.text},templateSelection:function(selection){return selection.text},theme:"default",width:"resolve"}},Defaults.prototype.applyFromElement=function(options,$element){var optionLanguage=options.language,defaultLanguage=this.defaults.language,elementLanguage=$element.prop("lang"),parentLanguage=$element.closest("[lang]").prop("lang"),languages=Array.prototype.concat.call(this._resolveLanguage(elementLanguage),this._resolveLanguage(optionLanguage),this._resolveLanguage(defaultLanguage),this._resolveLanguage(parentLanguage));return options.language=languages,options},Defaults.prototype._resolveLanguage=function(language){if(!language)return[];if($.isEmptyObject(language))return[];if($.isPlainObject(language))return[language];var languages;languages=Array.isArray(language)?language:[language];for(var resolvedLanguages=[],l=0;l<languages.length;l++)if(resolvedLanguages.push(languages[l]),"string"==typeof languages[l]&&languages[l].indexOf("-")>0){var languageParts=languages[l].split("-"),baseLanguage=languageParts[0];resolvedLanguages.push(baseLanguage)}return resolvedLanguages},Defaults.prototype._processTranslations=function(languages,debug){for(var translations=new Translation,l=0;l<languages.length;l++){var languageData=new Translation,language=languages[l];if("string"==typeof language)try{languageData=Translation.loadPath(language)}catch(e){try{language=this.defaults.amdLanguageBase+language,languageData=Translation.loadPath(language)}catch(ex){debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+language+'" could not be automatically loaded. A fallback will be used instead.')}}else languageData=$.isPlainObject(language)?new Translation(language):language;translations.extend(languageData)}return translations},Defaults.prototype.set=function(key,value){var camelKey=$.camelCase(key),data={};data[camelKey]=value;var convertedData=Utils._convertData(data);$.extend(!0,this.defaults,convertedData)};var defaults=new Defaults;return defaults}),S2.define("select2/options",["jquery","./defaults","./utils"],function($,Defaults,Utils){function Options(options,$element){this.options=options,null!=$element&&this.fromElement($element),null!=$element&&(this.options=Defaults.applyFromElement(this.options,$element)),this.options=Defaults.apply(this.options)}return Options.prototype.fromElement=function($e){var excludedData=["select2"];null==this.options.multiple&&(this.options.multiple=$e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=$e.prop("disabled")),null==this.options.autocomplete&&$e.prop("autocomplete")&&(this.options.autocomplete=$e.prop("autocomplete")),null==this.options.dir&&($e.prop("dir")?this.options.dir=$e.prop("dir"):$e.closest("[dir]").prop("dir")?this.options.dir=$e.closest("[dir]").prop("dir"):this.options.dir="ltr"),$e.prop("disabled",this.options.disabled),$e.prop("multiple",this.options.multiple),Utils.GetData($e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),Utils.StoreData($e[0],"data",Utils.GetData($e[0],"select2Tags")),Utils.StoreData($e[0],"tags",!0)),Utils.GetData($e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),$e.attr("ajax--url",Utils.GetData($e[0],"ajaxUrl")),Utils.StoreData($e[0],"ajax-Url",Utils.GetData($e[0],"ajaxUrl")));var dataset={};function upperCaseLetter(_,letter){return letter.toUpperCase()}for(var attr=0;attr<$e[0].attributes.length;attr++){var attributeName=$e[0].attributes[attr].name;if("data-"==attributeName.substr(0,"data-".length)){var dataName=attributeName.substring("data-".length),dataValue=Utils.GetData($e[0],dataName),camelDataName=dataName.replace(/-([a-z])/g,upperCaseLetter);dataset[camelDataName]=dataValue}}$.fn.jquery&&"1."==$.fn.jquery.substr(0,2)&&$e[0].dataset&&(dataset=$.extend(!0,{},$e[0].dataset,dataset));var data=$.extend(!0,{},Utils.GetData($e[0]),dataset);for(var key in data=Utils._convertData(data))excludedData.indexOf(key)>-1||($.isPlainObject(this.options[key])?$.extend(this.options[key],data[key]):this.options[key]=data[key]);return this},Options.prototype.get=function(key){return this.options[key]},Options.prototype.set=function(key,val){this.options[key]=val},Options}),S2.define("select2/core",["jquery","./options","./utils","./keys"],function($,Options,Utils,KEYS){var Select2=function($element,options){null!=Utils.GetData($element[0],"select2")&&Utils.GetData($element[0],"select2").destroy(),this.$element=$element,this.id=this._generateId($element),options=options||{},this.options=new Options(options,$element),Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;Utils.StoreData($element[0],"old-tabindex",tabindex),$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(initialData){self.trigger("selection:update",{data:initialData})}),$element[0].classList.add("select2-hidden-accessible"),$element.attr("aria-hidden","true"),this._syncAttributes(),Utils.StoreData($element[0],"select2",this),$element.data("select2",this)};return Utils.Extend(Select2,Utils.Observable),Select2.prototype._generateId=function($element){return"select2-"+(null!=$element.attr("id")?$element.attr("id"):null!=$element.attr("name")?$element.attr("name")+"-"+Utils.generateChars(2):Utils.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));null!=width&&$container.css("width",width)},Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==method){var styleWidth=this._resolveWidth($element,"style");return null!=styleWidth?styleWidth:this._resolveWidth($element,"element")}if("element"==method){var elementWidth=$element.outerWidth(!1);return elementWidth<=0?"auto":elementWidth+"px"}if("style"==method){var style=$element.attr("style");if("string"!=typeof style)return null;for(var attrs=style.split(";"),i=0,l=attrs.length;i<l;i+=1){var attr=attrs[i].replace(/\s/g,""),matches=attr.match(WIDTH);if(null!==matches&&matches.length>=1)return matches[1]}return null}if("computedstyle"==method){var computedStyle=window.getComputedStyle($element[0]);return computedStyle.width}return method},Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on("change.select2",function(){self.dataAdapter.current(function(data){self.trigger("selection:update",{data:data})})}),this.$element.on("focus.select2",function(evt){self.trigger("focus",evt)}),this._syncA=Utils.bind(this._syncAttributes,this),this._syncS=Utils.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(mutations){self._syncA(),self._syncS(mutations)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerSelectionEvents=function(){var self=this,nonRelayEvents=["toggle","focus"];this.selection.on("toggle",function(){self.toggleDropdown()}),this.selection.on("focus",function(params){self.focus(params)}),this.selection.on("*",function(name,params){-1===nonRelayEvents.indexOf(name)&&self.trigger(name,params)})},Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerEvents=function(){var self=this;this.on("open",function(){self.$container[0].classList.add("select2-container--open")}),this.on("close",function(){self.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){self.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){self.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){self.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(params){self.isOpen()||self.trigger("open",{}),this.dataAdapter.query(params,function(data){self.trigger("results:all",{data:data,query:params})})}),this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self.trigger("results:append",{data:data,query:params})})}),this.on("keypress",function(evt){var key=evt.which;self.isOpen()?key===KEYS.ESC||key===KEYS.TAB||key===KEYS.UP&&evt.altKey?(self.close(evt),evt.preventDefault()):key===KEYS.ENTER?(self.trigger("results:select",{}),evt.preventDefault()):key===KEYS.SPACE&&evt.ctrlKey?(self.trigger("results:toggle",{}),evt.preventDefault()):key===KEYS.UP?(self.trigger("results:previous",{}),evt.preventDefault()):key===KEYS.DOWN&&(self.trigger("results:next",{}),evt.preventDefault()):(key===KEYS.ENTER||key===KEYS.SPACE||key===KEYS.DOWN&&evt.altKey)&&(self.open(),evt.preventDefault())})},Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},Select2.prototype._isChangeMutation=function(mutations){var self=this;if(mutations.addedNodes&&mutations.addedNodes.length>0)for(var n=0;n<mutations.addedNodes.length;n++){var node=mutations.addedNodes[n];if(node.selected)return!0}else{if(mutations.removedNodes&&mutations.removedNodes.length>0)return!0;if(Array.isArray(mutations))return mutations.some(function(mutation){return self._isChangeMutation(mutation)})}return!1},Select2.prototype._syncSubtree=function(mutations){var changed=this._isChangeMutation(mutations),self=this;changed&&this.dataAdapter.current(function(currentData){self.trigger("selection:update",{data:currentData})})},Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger,preTriggerMap={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===args&&(args={}),name in preTriggerMap){var preTriggerName=preTriggerMap[name],preTriggerArgs={prevented:!1,name:name,args:args};if(actualTrigger.call(this,preTriggerName,preTriggerArgs),preTriggerArgs.prevented)return void(args.prevented=!0)}actualTrigger.call(this,name,args)},Select2.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},Select2.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},Select2.prototype.close=function(evt){this.isOpen()&&this.trigger("close",{originalEvent:evt})},Select2.prototype.isEnabled=function(){return!this.isDisabled()},Select2.prototype.isDisabled=function(){return this.options.get("disabled")},Select2.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},Select2.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},Select2.prototype.focus=function(data){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},Select2.prototype.enable=function(args){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=args&&0!==args.length||(args=[!0]);var disabled=!args[0];this.$element.prop("disabled",disabled)},Select2.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var data=[];return this.dataAdapter.current(function(currentData){data=currentData}),data},Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==args||0===args.length)return this.$element.val();var newVal=args[0];Array.isArray(newVal)&&(newVal=newVal.map(function(obj){return obj.toString()})),this.$element.val(newVal).trigger("input").trigger("change")},Select2.prototype.destroy=function(){this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",Utils.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),Utils.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return $container.attr("dir",this.options.get("dir")),this.$container=$container,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),Utils.StoreData($container[0],"element",this.$element),$container},Select2}),S2.define("select2/dropdown/attachContainer",[],function(){function AttachContainer(decorated,$element,options){decorated.call(this,$element,options)}return AttachContainer.prototype.position=function(decorated,$dropdown,$container){var $dropdownContainer=$container.find(".dropdown-wrapper");$dropdownContainer.append($dropdown),$dropdown[0].classList.add("select2-dropdown--below"),$container[0].classList.add("select2-container--below")},AttachContainer}),S2.define("select2/dropdown/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),S2.define("select2/selection/stopPropagation",[],function(){function StopPropagation(){}return StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(evt){evt.stopPropagation()})},StopPropagation}),factory=function($){var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if((event=$.event.fix(orgEvent)).type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})},"function"==typeof S2.define&&S2.define.amd?S2.define("jquery-mousewheel",["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery),S2.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function($,_,Select2,Defaults,Utils){if(null==$.fn.select2){var thisMethods=["open","close","destroy"];$.fn.select2=function(options){if("object"==typeof(options=options||{}))return this.each(function(){var instanceOptions=$.extend(!0,{},options);new Select2($(this),instanceOptions)}),this;if("string"==typeof options){var ret,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var instance=Utils.GetData(this,"select2");null==instance&&window.console&&console.error&&console.error("The select2('"+options+"') method was called on an element that is not using Select2."),ret=instance[options].apply(instance,args)}),thisMethods.indexOf(options)>-1?this:ret}throw new Error("Invalid arguments for Select2: "+options)}}return null==$.fn.select2.defaults&&($.fn.select2.defaults=Defaults),Select2}),{define:S2.define,require:S2.require}}();S2.require("jquery.select2");jQuery.fn.select2.amd=S2}(jQuery);var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var EventObserver=function(){function EventObserver(){_classCallCheck(this,EventObserver);this.observers=[]}return _createClass(EventObserver,[{key:"subscribe",value:function(id,observer){this.observers.push({id:id,callback:observer})}},{key:"unsubscribe",value:function(observer){this.observers=this.observers.filter(function(subscriber){return subscriber!==observer})}},{key:"broadcast",value:function(event){_log("Sending event ",event),this.observers.forEach(function(subscriber){subscriber.callback(event)})}}]),EventObserver}(),_endpoint=window._endpoint||"https://knime.bfr.berlin/backend/";window._endpoints={metadata:_endpoint+"metadata/",image:_endpoint+"image/",download:_endpoint+"download/",uploadDate:_endpoint+"uploadDate/",executionTime:_endpoint+"executionTime/",simulations:_endpoint+"simulations/",execution:_endpoint+"execute/",search:_endpoint+"search/",filter:_endpoint+"filter",modelScript:_endpoint+"modelscript/",visScript:_endpoint+"visualizationscript/",controlledVocabularyEndpoint:"https://knime.bfr.berlin/"},window._debug=!0,window.editEventBus=new EventObserver;var ModelHandler=function(){function ModelHandler(metadata,img,modelScript,visScript){_classCallCheck(this,ModelHandler),this._metadata=metadata,this._schema={},this._menu=[],this._img=img,this._modelScript=modelScript,this._visScript=visScript,this.panels={}}return _createClass(ModelHandler,[{key:"_create",value:function(){this._panels={generalInformation:{type:"simple",schema:this._schema.generalInformation,metadata:this._metadata.generalInformation},modelCategory:{type:"simple",schema:this._schema.modelCategory,metadata:this._metadata.generalInformation.modelCategory},author:{type:"complex",schema:this._schema.contact,metadata:this._metadata.generalInformation.author},creator:{type:"complex",schema:this._schema.contact,metadata:this._metadata.generalInformation.creator},reference:{type:"complex",schema:this._schema.reference,metadata:this._metadata.generalInformation.reference},scopeGeneral:{type:"simple",schema:this._schema.scope,metadata:this._metadata.scope},product:{type:"complex",schema:this._schema.product,metadata:this._metadata.scope.product},hazard:{type:"complex",schema:this._schema.hazard,metadata:this._metadata.scope.hazard},population:{type:"complex",schema:this._schema.populationGroup,metadata:this._metadata.scope.populationGroup},study:{type:"simple",schema:this._schema.study,metadata:this._metadata.dataBackground.study},studySample:{type:"complex",schema:this._schema.studySample,metadata:this._metadata.dataBackground.studySample},dietaryAssessmentMethod:{type:"complex",schema:this._schema.dietaryAssessmentMethod,metadata:this._metadata.dataBackground.dietaryAssessmentMethod},laboratory:{type:"complex",schema:this._schema.laboratory,metadata:this._metadata.dataBackground.laboratory},assay:{type:"complex",schema:this._schema.assay,metadata:this._metadata.dataBackground.assay},modelMath:{type:"simple",schema:this._schema.modelMath,metadata:this._metadata.modelMath},parameter:{type:"complex",schema:this._schema.parameter,metadata:this._metadata.modelMath.parameter},qualityMeasures:{type:"complex",schema:this._schema.qualityMeasures,metadata:this._metadata.modelMath.qualityMeasures},modelEquation:{type:"complex",schema:this._schema.modelEquation,metadata:this._metadata.modelMath.modelEquation},exposure:{type:"complex",schema:this._schema.exposure,metadata:this._metadata.modelMath.exposure},plot:{type:"plot"},modelScript:{type:"modelScript"},visualizationScript:{type:"visualizationScript"},readme:{type:"readme"}}}}]),ModelHandler}(),GenericModel=function(_ModelHandler){function GenericModel(metadata,img,state,modelScript,visScript){_classCallCheck(this,GenericModel);var _this=_possibleConstructorReturn(this,(GenericModel.__proto__||Object.getPrototypeOf(GenericModel)).call(this,metadata,img,modelScript,visScript));return _this._schema=schemas.genericModel,state&&(_this.panels=_this._createPanels()),_this._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"dietaryAssessmentMethod",label:"Dietary assessment method"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(GenericModel.prototype.__proto__||Object.getPrototypeOf(GenericModel.prototype),"_create",_this).call(_this),_this}return _inherits(GenericModel,ModelHandler),_createClass(GenericModel,[{key:"validate",value:function(){var isValid=!0;return this.panels.generalInformation.validate()||(isValid=!1),this.panels.modelCategory.validate()||(isValid=!1),this.panels.scopeGeneral.validate()||(isValid=!1),this.panels.study.validate()||(isValid=!1),isValid}},{key:"_createPanels",value:function(){var port=window.port||-1,schema=schemas.genericModel;return{generalInformation:new FormPanel("General",schema.generalInformation,this._metadata.generalInformation,port),modelCategory:new FormPanel("Model category",schema.modelCategory,this._metadata.generalInformation.modelCategory,port),author:new TablePanel("Author",schema.contact,this._metadata.generalInformation.author,port),creator:new TablePanel("Creator",schema.contact,this._metadata.generalInformation.creator,port),reference:new TablePanel("Reference",schema.reference,this._metadata.generalInformation.reference,port),scopeGeneral:new FormPanel("General",schema.scope,this._metadata.scope,port),product:new TablePanel("Product",schema.product,this._metadata.scope.product,port),hazard:new TablePanel("Hazard",schema.hazard,this._metadata.scope.hazard,port),population:new TablePanel("Population",schema.populationGroup,this._metadata.scope.populationGroup,port),study:new FormPanel("Study",schema.study,this._metadata.dataBackground.study,port),studySample:new TablePanel("Study sample",schema.studySample,this._metadata.dataBackground.studySample,port),dietaryAssessmentMethod:new TablePanel("Dietary assessment method",schema.dietaryAssessmentMethod,this._metadata.dataBackground.dietaryAssessmentMethod,port),laboratory:new TablePanel("Laboratory",schema.laboratory,this._metadata.dataBackground.laboratory,port),assay:new TablePanel("Assay",schema.assay,this._metadata.dataBackground.assay,port),modelMath:new FormPanel("Model math",schema.modelMath,this._metadata.modelMath,port),parameter:new TablePanel("Parameter",schema.parameter,this._metadata.modelMath.parameter,port),qualityMeasures:new TablePanel("Quality measures",schema.qualityMeasures,this._metadata.modelMath.qualityMeasures,port),modelEquation:new TablePanel("Model equation",schema.modelEquation,this._metadata.modelMath.modelEquation,port),exposure:new TablePanel("Exposure",schema.exposure,this._metadata.modelMath.exposure,port)}}},{key:"metaData",get:function(){try{this._metadata.generalInformation=this.panels.generalInformation.data,this._metadata.generalInformation.modelCategory=this.panels.modelCategory.data,this._metadata.generalInformation.author=this.panels.author.data,this._metadata.generalInformation.creator=this.panels.creator.data,this._metadata.generalInformation.reference=this.panels.reference.data,this._metadata.scope=this.panels.scopeGeneral.data,this._metadata.scope.product=this.panels.product.data,this._metadata.scope.hazard=this.panels.hazard.data,this._metadata.scope.populationGroup=this.panels.population.data,this._metadata.dataBackground.study=this.panels.study.data,this._metadata.dataBackground.studySample=this.panels.studySample.data,this._metadata.dataBackground.dietaryAssessmentMethod=this.panels.dietaryAssessmentMethod.data,this._metadata.dataBackground.laboratory=this.panels.laboratory.data,this._metadata.dataBackground.assay=this.panels.assay.data,this._metadata.modelMath=this.panels.modelMath.data,this._metadata.modelMath.parameter=this.panels.parameter.data,this._metadata.modelMath.parameter.forEach(function(param){return delete param.reference}),this._metadata.modelMath.qualityMeasures=this.panels.qualityMeasures.data,this._metadata.modelMath.modelEquation=this.panels.modelEquation.data,this._metadata.modelMath.exposure=this.panels.exposure.data,this._metadata.modelType="genericModel",this._metadata=metadataFix(this._metadata)}catch(error){console.log(error)}return this._metadata}}]),GenericModel}(),DataModel=function(_ModelHandler2){function DataModel(metadata,img,modelScript,visScript){_classCallCheck(this,DataModel);var _this2=_possibleConstructorReturn(this,(DataModel.__proto__||Object.getPrototypeOf(DataModel)).call(this,metadata,img,modelScript,visScript));return _this2._schema=schemas.dataModel,_this2._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"dietaryAssessmentMethod",label:"Dietary assessment method"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"parameter",label:"Parameter"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(DataModel.prototype.__proto__||Object.getPrototypeOf(DataModel.prototype),"_create",_this2).call(_this2),_this2}return _inherits(DataModel,ModelHandler),DataModel}(),PredictiveModel=function(_ModelHandler3){function PredictiveModel(metadata,img,modelScript,visScript){_classCallCheck(this,PredictiveModel);var _this3=_possibleConstructorReturn(this,(PredictiveModel.__proto__||Object.getPrototypeOf(PredictiveModel)).call(this,metadata,img,modelScript,visScript));return _this3._schema=schemas.predictiveModel,_this3._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"parameter",label:"Parameter"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(PredictiveModel.prototype.__proto__||Object.getPrototypeOf(PredictiveModel.prototype),"_create",_this3).call(_this3),_this3}return _inherits(PredictiveModel,ModelHandler),PredictiveModel}(),OtherModel=function(_ModelHandler4){function OtherModel(metadata,img,modelScript,visScript){_classCallCheck(this,OtherModel);var _this4=_possibleConstructorReturn(this,(OtherModel.__proto__||Object.getPrototypeOf(OtherModel)).call(this,metadata,img,modelScript,visScript));return _this4._schema=schemas.otherModel,_this4._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(OtherModel.prototype.__proto__||Object.getPrototypeOf(OtherModel.prototype),"_create",_this4).call(_this4),_this4}return _inherits(OtherModel,ModelHandler),OtherModel}(),DoseResponseModel=function(_ModelHandler5){function DoseResponseModel(metadata,img,modelScript,visScript){_classCallCheck(this,DoseResponseModel);var _this5=_possibleConstructorReturn(this,(DoseResponseModel.__proto__||Object.getPrototypeOf(DoseResponseModel)).call(this,metadata,img,modelScript,visScript));return _this5._schema=schemas.doseResponseModel,_this5._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_this5._panels=$.extend(!0,{},_this5._panels,{study:{type:"simple",schema:_this5._schema.study,metadata:_this5._metadata.scope.study},studySample:{type:"complex",schema:_this5._schema.study,metadata:_this5._metadata.scope.studySample},laboratory:{type:"complex",schema:_this5._schema.laboratory,metadata:_this5._metadata.scope.laboratory},assay:{type:"complex",schema:_this5._schema.assay,metadata:_this5._metadata.scope.assay},exposure:{type:"complex",schema:_this5._schema.exposure,metadata:_this5._metadata.modelMath.exposure}}),_this5}return _inherits(DoseResponseModel,ModelHandler),DoseResponseModel}(),ToxicologicalModel=function(_ModelHandler6){function ToxicologicalModel(metadata,img,modelScript,visScript){_classCallCheck(this,ToxicologicalModel);var _this6=_possibleConstructorReturn(this,(ToxicologicalModel.__proto__||Object.getPrototypeOf(ToxicologicalModel)).call(this,metadata,img,modelScript,visScript));return _this6._schema=schemas.toxicologicalModel,_this6._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_this6._panels=$.extend(!0,{},_this6._panels,{study:{type:"simple",schema:_this6._schema.study,metadata:_this6._metadata.scope.study},studySample:{type:"complex",schema:_this6._schema.study,metadata:_this6._metadata.scope.studySample},laboratory:{type:"complex",schema:_this6._schema.laboratory,metadata:_this6._metadata.scope.laboratory},assay:{type:"complex",schema:_this6._schema.assay,metadata:_this6._metadata.scope.assay},exposure:{type:"complex",schema:_this6._schema.exposure,metadata:_this6._metadata.modelMath.exposure}}),_this6}return _inherits(ToxicologicalModel,ModelHandler),ToxicologicalModel}(),ExposureModel=function(_ModelHandler7){function ExposureModel(metadata,img,modelScript,visScript){_classCallCheck(this,ExposureModel);var _this7=_possibleConstructorReturn(this,(ExposureModel.__proto__||Object.getPrototypeOf(ExposureModel)).call(this,metadata,img,modelScript,visScript));return _this7._schema=schemas.exposureModel,_this7._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"dietaryAssessmentMethod",label:"Dietary assessment method"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(ExposureModel.prototype.__proto__||Object.getPrototypeOf(ExposureModel.prototype),"_create",_this7).call(_this7),_this7}return _inherits(ExposureModel,ModelHandler),ExposureModel}(),ProcessModel=function(_ModelHandler8){function ProcessModel(metadata,img,modelScript,visScript){_classCallCheck(this,ProcessModel);var _this8=_possibleConstructorReturn(this,(ProcessModel.__proto__||Object.getPrototypeOf(ProcessModel)).call(this,metadata,img,modelScript,visScript));return _this8._schema=schemas.processModel,_this8._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(ProcessModel.prototype.__proto__||Object.getPrototypeOf(ProcessModel.prototype),"_create",_this8).call(_this8),_this8}return _inherits(ProcessModel,ModelHandler),ProcessModel}(),ConsumptionModel=function(_ModelHandler9){function ConsumptionModel(metadata,img,modelScript,visScript){_classCallCheck(this,ConsumptionModel);var _this9=_possibleConstructorReturn(this,(ConsumptionModel.__proto__||Object.getPrototypeOf(ConsumptionModel)).call(this,metadata,img,modelScript,visScript));return _this9._schema=schemas.consumptionModel,_this9._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"populationGroup",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(ConsumptionModel.prototype.__proto__||Object.getPrototypeOf(ConsumptionModel.prototype),"_create",_this9).call(_this9),_this9}return _inherits(ConsumptionModel,ModelHandler),ConsumptionModel}(),HealthModel=function(_ModelHandler10){function HealthModel(metadata,img,modelScript,visScript){_classCallCheck(this,HealthModel);var _this10=_possibleConstructorReturn(this,(HealthModel.__proto__||Object.getPrototypeOf(HealthModel)).call(this,metadata,img,modelScript,visScript));return _this10._schema=schemas.healthModel,_this10._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_this10}return _inherits(HealthModel,ModelHandler),HealthModel}(),RiskModel=function(_ModelHandler11){function RiskModel(metadata,img,modelScript,visScript){_classCallCheck(this,RiskModel);var _this11=_possibleConstructorReturn(this,(RiskModel.__proto__||Object.getPrototypeOf(RiskModel)).call(this,metadata,img,modelScript,visScript));return _this11._schema=schemas.riskModel,_this11._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"dietaryAssessmentMethod",label:"Dietary assessment method"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(RiskModel.prototype.__proto__||Object.getPrototypeOf(RiskModel.prototype),"_create",_this11).call(_this11),_this11}return _inherits(RiskModel,ModelHandler),RiskModel}(),QraModel=function(_ModelHandler12){function QraModel(metadata,img,modelScript,visScript){_classCallCheck(this,QraModel);var _this12=_possibleConstructorReturn(this,(QraModel.__proto__||Object.getPrototypeOf(QraModel)).call(this,metadata,img,modelScript,visScript));return _this12._schema=schemas.qraModel,_this12._menu=[{label:"General information",submenus:[{id:"generalInformation",label:"General"},{id:"modelCategory",label:"Model category"},{id:"author",label:"Author"},{id:"creator",label:"Creator"},{id:"reference",label:"Reference"}]},{label:"Scope",submenus:[{id:"scopeGeneral",label:"General"},{id:"product",label:"Product"},{id:"hazard",label:"Hazard"},{id:"population",label:"Population group"}]},{label:"Data Background",submenus:[{id:"study",label:"Study"},{id:"studySample",label:"Study sample"},{id:"dietaryAssessmentMethod",label:"Dietary assessment method"},{id:"laboratory",label:"Laboratory"},{id:"assay",label:"Assay"}]},{label:"Model math",submenus:[{id:"modelMath",label:"General"},{id:"parameter",label:"Parameter"},{id:"qualityMeasures",label:"Quality measures"},{id:"modelEquation",label:"Model equation"},{id:"exposure",label:"Exposure"}]},{label:"Plot",id:"plot",submenus:[]},{label:"Model",id:"modelScript",submenus:[]},{label:"Visualization",id:"visualizationScript",submenus:[]},{label:"Readme",id:"readme",submenus:[]}],_get(QraModel.prototype.__proto__||Object.getPrototypeOf(QraModel.prototype),"_create",_this12).call(_this12),_this12}return _inherits(QraModel,ModelHandler),QraModel}(),metadataFix=function(metadata){return metadata.generalInformation.reference.forEach(function(ref){return delete ref.publicationType}),metadata.modelMath.parameter.forEach(function(param){return delete param.reference}),metadata},createLabel=function(name,isMandatory,description){var label=document.createElement("label");return label.classList.add("col-sm-2","control-label"),label.title=description,label.setAttribute("data-toggle","tooltip"),label.textContent=name+(isMandatory?"*":""),$(label).tooltip(),label},createSubMenu=function(name,submenus){return'<li class="dropdown">\n\t<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button"\n\t\taria-haspopup="true" aria-expanded="false">'+name+'<span class="caret"></a>\n\t<ul class="dropdown-menu">\n\t'+submenus.map(function(entry){return'<li><a href="#'+entry.id+'" aria-controls="#'+entry.id+'"\n\t\trole="button" data-toggle="tab">'+entry.label+"</a></li>"}).join("")+"\n\t</ul>\n\t</li>"},addControlledVocabulary=function(input,vocabulary,port){window._endpoints.controlledVocabularyEndpoint?fetch(window._endpoints.controlledVocabularyEndpoint+""+vocabulary).then(function(response){return response.json()}).then(function(data){$(input).typeahead({source:data,autoSelect:!0,fitToElement:!0,showHintOnFocus:!0})}).catch(function(error){port>=0&&fetch("http://localhost:"+port+"/getAllNames/"+vocabulary).then(function(response){return response.json()}).then(function(data){$(input).typeahead({source:data,autoSelect:!0,fitToElement:!0,showHintOnFocus:!0})})}):port>=0&&fetch("http://localhost:"+port+"/getAllNames/"+vocabulary).then(function(response){return response.json()}).then(function(data){$(input).typeahead({source:data,autoSelect:!0,fitToElement:!0,showHintOnFocus:!0})})},createForm=function(prop,value,port){var isMandatory=!!prop.required&&prop.required;return"text"===prop.type||"number"===prop.type||"url"===prop.type||"date"===prop.type||"email"===prop.type?new InputForm(prop.label,isMandatory,prop.type,prop.description,value||"",port,prop.vocabulary,prop.sid):"long-text"===prop.type?new TextareaForm(prop.label,isMandatory,prop.description,value||""):"enum"===prop.type?new SelectForm(prop.label,isMandatory,prop.description,value,port,prop.vocabulary):"boolean"===prop.type?new InputForm(prop.label,!1,"checkbox",prop.description,value,port):"text-array"===prop.type?new ArrayForm(prop.label,isMandatory,prop.type,value||[],prop.description,port,prop.vocabulary):"date-array"===prop.type?new ArrayForm(prop.label,isMandatory,prop.type,value||[],prop.description,port,prop.vocabulary):void 0},_log=function(log,style){if(window._debug){var styles={primary:"background: #000; color:#fff; padding: 1px 2px;",secondary:"background: #aaa; color:#fff; padding: 1px 2px;",level1:"padding-left: 10px",level2:"padding-left: 20px",strong:"font-weight: bold;",error:"background: red; color: #ffffff; padding: 1px 2px;",warning:"background: yellow; padding: 1px 2px;",hook:"background: orange; padding: 1px 2px;"};style in styles?console.log("%c"+log,styles[style]):console.log(log)}},_createHelperMetadataText=function(helperText){var $table=$('<table class="table table-sm table-hover table-params-metadata"></table>');helperText&&$("<tr></tr>").appendTo($table).append("<td>"+helperText+"</td>");return $table},_isUndefined=function(val){return"undefined"===(void 0===val?"undefined":_typeof(val))},_isNull=function(val){return null==val},_sorter={_name:function(a,b){return a.localeCompare(b)},_execution:function(a,b){return parseFloat(a)-parseFloat(b)},_date:function(a,b){return new Date(a)-new Date(b)}},_formatter={_list:function(val){var $ul=$("<ul></ul>");if(val&&"object"===(void 0===val?"undefined":_typeof(val))&&null!==val){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=val.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _item=_step.value;$("<li>"+_item+"</li>").appendTo($ul)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return $ul}return val&&$.isArray(val)&&val.length>0?($.each(val,function(i,li){$("<li>"+item+"</li>").appendTo($ul)}),$ul):val},_uploadDate:function(val){if(val&&val.indexOf(" | ")>=0){var time=val.substring(val.indexOf(" | "));return val.replace(time,"<br><small>"+time+"</small>").replace("|","")}return val},_searchHighlight:function(val,search){var rx=new RegExp("(?![^<]+>)"+search,"gi");return val.replace(rx,"<mark>$&</mark>")}},_fetchData={_json:async function(src,id,signal){_log("UTILS / _fetchData._json: "+src+", "+id);var data=null;src=_isNull(id)?src:src+id;var fetchOpts={};!_isNull(signal)&&(fetchOpts.signal=signal);var response=await fetch(src,fetchOpts).catch(function(error){"AbortError"===error.name&&_log("cancelled","level1")});return response&&(data=await response.json()),data},_blob:async function(src,id,signal){_log("UTILS / _fetchData._blob: "+src+", "+id);var data=null;src=_isNull(id)?src:src+id;var fetchOpts={};!_isNull(signal)&&(fetchOpts.signal=signal);var response=await fetch(src,fetchOpts).catch(function(error){"AbortError"===error.name&&_log("cancelled","level1")});if(response){var blob=await response.blob();data=(window.URL||window.webkitURL||window).createObjectURL(blob)}return data},_content:async function(src,id,signal){_log("UTILS / _fetchData._content: "+src+", "+id);var data=null;src=_isNull(id)?src:src+id;var fetchOpts={};!_isNull(signal)&&(fetchOpts.signal=signal);var response=await fetch(src,fetchOpts).catch(function(error){"AbortError"===error.name&&_log("cancelled","level1")});return response&&(data=await response.text()),data},_array:async function(src,arrayLength,signal){_log("UTILS / _fetchData._array: "+src+", "+arrayLength);var data=[],fetchOpts={};!_isNull(signal)&&(fetchOpts.signal=signal);for(var _loop=async function(i){await fetch(src+i,fetchOpts).then(function(resp){return resp.text().then(function(text){data[i]=text})}).catch(function(error){"AbortError"===error.name&&_log("cancelled","level1")})},i=0;i<arrayLength;i++)await _loop(i);return data}},_checkUndefinedContent=function(value,placeholder){return placeholder=placeholder||"-",(_isUndefined(value)||_isNull(value)||"object"==(void 0===value?"undefined":_typeof(value))&&0===Object.keys(value).length&&value.constructor===Object||"object"==(void 0===value?"undefined":_typeof(value))&&1==value.length&&_isNull(value[0])||value.length<=0)&&(value=placeholder),value},_stripHtmlTags=function(str){return null!==str&&""!==str&&(str=str.toString()).replace(/<[^>]*>/g,"")},_getDOMText=function _getDOMText(node){var text=void 0;return text=node.outerText?node.outerText.trim():node.innerText?node.innerText.trim():"",node.childNodes&&node.childNodes.forEach(function(child){return text+=_getDOMText(child)}),text};$.fn._hasAttr=function(attrName){if($(void 0)){var attr=$(void 0).attr(attrName);if("undefined"!==(void 0===attr?"undefined":_typeof(attr))&&!1!==attr)return!0}return!1};var APPModal=function(){function APPModal(settings,$container){_classCallCheck(this,APPModal);var O=this;O._$container=$container,O._debug=!0,O._initiated=!1,O._opts=$.extend(!0,{},{classes:"",data:null,on:{afterInit:null,show:function(O,event){O._updateModal(event)},hide:null}},settings),O._create(),O._initiated=!0,$.isFunction(O.opts.on.afterInit)&&O.opts.on.afterInit.call(O)}return _createClass(APPModal,[{key:"_create",value:function(){var O=this;_log("MODAL / _create"),O._id=O.opts.id||"modal"+$.now(),O._type=O.opts.type||"default",O._$modal=$('<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>').attr("id",O._id).addClass(O.opts.classes).appendTo(O._$container),O._$modalContent=$('<div class="modal-content"></div>').appendTo(O._$modal).wrap('<div class="modal-dialog modal-xl" role="document"></div>'),O._loader=_appUI._createLoader({classes:"loader-modal"},O._$modalContent),O._createModal(),O._$modal.modal({show:!1}),O._$modal.on("show.bs.modal",function(event){$.isFunction(O.opts.on.show)&&O.opts.on.show.call(O,O,event)}),O._$modal.on("hide.bs.modal",function(event){$.isFunction(O.opts.on.hide)&&O.opts.on.hide.call(O,O,event)})}},{key:"_createModal",value:function(){var O=this;_log("MODAL / _createModal"),O._createModalHead(),O._createModalBody().appendTo(O._$modalContent)}},{key:"_createModalHead",value:function(){var O=this;_log("MODAL / _createModalHead"),O._$modalHead=$('<div class="modal-header"></div>').appendTo(O._$modalContent),O._$modalTitle=$('<h1 class="modal-title"></h1>').appendTo(O._$modalHead),$('<button type="button" class="modal-close action action-pure action-lg ml-2" data-dismiss="modal" aria-label="Close"><i class="feather icon-x"></i></button>').appendTo(O._$modalHead)}},{key:"_createModalBody",value:function(){_log("MODAL / _createBody"),this._$modalBody=$('<div class="modal-body"></div>').appendTo(this._$modalContent)}},{key:"_updateModal",value:async function(event){_log("MODAL / _updateModal")}},{key:"_setTitle",value:function(text){_log("MODAL / _setTitle: "+text),this._$modalTitle&&this._$modalTitle.text(text)}},{key:"_show",value:function(){this._$modal.modal("show")}},{key:"_hide",value:function(){this._$modal.modal("hide")}},{key:"_clear",value:function(){_log("MODAL / _clear"),this._$modalContent&&this._$modalContent.empty()}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPModal}(),APPModalMTDetails=function(_APPModal){function APPModalMTDetails(settings,$container){return _classCallCheck(this,APPModalMTDetails),_possibleConstructorReturn(this,(APPModalMTDetails.__proto__||Object.getPrototypeOf(APPModalMTDetails)).call(this,settings,$container))}return _inherits(APPModalMTDetails,APPModal),_createClass(APPModalMTDetails,[{key:"_create",value:function(){_log("MODAL DETAILS / _create","primary"),this._metadata=this.opts.data,_get(APPModalMTDetails.prototype.__proto__||Object.getPrototypeOf(APPModalMTDetails.prototype),"_create",this).call(this)}},{key:"_createModal",value:function(){var O=this;_log("MODAL DETAILS / _createModal"),O._createModalHead(),O.ModelMTPanel=new APPMTDetails(O.opts,O._$modalContent),O.ModelMTPanel._createModelMetadataContent()}},{key:"_updateModal",value:async function(event){var O=this;_log("MODAL DETAILS / _updateModal"),_log(event),O._loader._setState(!0);var $trigger=$(event.relatedTarget);O._modelId=$trigger.data("modal-id"),O._modelMetadata=O._metadata[O._modelId],O._modelMetadata.generalInformation&&O._modelMetadata.generalInformation.name&&O._setTitle(O._modelMetadata.generalInformation.name),await O.ModelMTPanel._updateContent(O._modelMetadata,O._modelId),O._loader._setState(!1)}}]),APPModalMTDetails}(),ArrayForm=function(){function ArrayForm(name,mandatory,type,value,helperText,vocabulary,port){_classCallCheck(this,ArrayForm);var O=this;O.group=document.createElement("div"),O.mandatory=mandatory,O.simpleTable=new SimpleTable(type,value,vocabulary,port),O._create(name,mandatory,helperText)}return _createClass(ArrayForm,[{key:"_create",value:function(name,mandatory,helperText){var O=this;if(name){$formGroup=$('<div class="form-group row"></div>'),$('<label class="col-form-label col-form-label-sm col-9 col-xs-3 order-1 sim-param-label"></label>').attr("for","input_"+name).appendTo($formGroup).text(name+(mandatory?"*":""));var $field=$('<div class="col-12 col-xs-7 col-md-6 order-3 order-xs-2 sim-param-field"></div>').appendTo($formGroup),$actions=$('<div class="col-3 col-xs-auto order-2 order-xs-3 sim-param-actions"></div>').appendTo($formGroup);if(helperText)$('<button class="action action-pure float-right" type="button"><i class="feather icon-info"></i></button>').attr("data-toggle","collapse").attr("data-target","#paramMetadata_"+name).attr("aria-expanded",!1).attr("aria-controls","paramMetadata_"+name).attr("title","Show Metadata").appendTo($actions);var header=$('<div class="card-header"></div>'),panelDiv=document.createElement("div");if(panelDiv.classList.add("card"),header.appendTo($(panelDiv)),panelDiv.appendChild(O.simpleTable.table),_$actionTrash=$('<button type="button" class="action action-pure float-right"><i class="feather icon-trash-2"></i></button>').attr("id","simActionRemove").attr("data-tooltip","").attr("title","Trash").appendTo(header).on("click",function(event){O.simpleTable.trash()}),_$actionRemove=$('<button type="button" class="action action-pure float-right"><i class="feather icon-delete"></i></button>').attr("id","simActionRemove").attr("data-tooltip","").attr("title","Remove").appendTo(header).on("click",function(event){O.simpleTable.remove()}),_$actionAdd=$('<button type="button" class="action action-pure float-right"><i class="feather icon-plus"></i></button>').attr("id","actionAdd").attr("data-tooltip","").attr("title","Add").appendTo(header).on("click",function(event){O.simpleTable.add()}),$(panelDiv).appendTo($field),O.$validationContainer=$('<div class="validation-message mt-1"></div>').appendTo($field),helperText)$('<div class="collapse param-metadata"></div>').attr("id","paramMetadata_"+name).attr("aria-expanded",!1).appendTo($field).append(_createHelperMetadataText(helperText));O.group=$formGroup}}},{key:"onblurHandler",value:function(){var attr=this.input.closest("form").attr("no-immidiate-submit"),can_emit_Event="undefined"===(void 0===attr?"undefined":_typeof(attr))||!1===attr;_log(" onblurHandler"+can_emit_Event),can_emit_Event&&window.editEventBus.broadcast("MetadataChanged")}},{key:"clear",value:function(){this.simpleTable.trash()}},{key:"validate",value:function(){var O=this,isValid=!0;return O.mandatory&&(isValid=O.simpleTable.value.length>0),isValid?O.onblurHandler():(O.$validationContainer.text("At least one row is required"),O.group.addClass("has-error"),O.group.addClass("is-invalid"),O.$validationContainer.css("display","block")),isValid}},{key:"value",get:function(){return this.simpleTable.value},set:function(newValue){var O=this;O.simpleTable.trash(),newValue.forEach(function(item){return O.simpleTable._createRow(item)})}}]),ArrayForm}(),APPMTEditableDetails=function(){function APPMTEditableDetails(settings,$container){_classCallCheck(this,APPMTEditableDetails);var O=this;O._$modalContent=$container,O._opts=$.extend(!0,{},{classes:"",data:null,on:{afterInit:null,show:function(O,event){O._updateModal(event)},hide:null}},settings),O._create()}return _createClass(APPMTEditableDetails,[{key:"_create",value:function(){_log("MODAL DETAILS / _create","primary"),this._metadata=this.opts.data}},{key:"_createModelMetadataContent",value:function(){var O=this;if(_log("MODAL DETAILS / _createModelMetadataContent"),O._$modalNav=$('<div class="modal-body modal-nav card-header"></div>').appendTo(O._$modalContent),O._navId=O._id+"Nav",!O._$navBar){O._$navBar=$('<nav class="navbar navbar-expand-sm row justify-content-start justify-content-md-between"></nav>').appendTo(O._$modalNav);$('<button class="action action-pure mt-1 mb-1" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation"><i class="feather icon-list"></i></button>').appendTo(O._$navBar).attr("data-target","#"+O._navId).attr("aria-controls",O._navId).wrap('<div class="col-auto navbar-toggler order-1 modal-nav-toggler"></div>');O._$navBar._$nav=$('<ul class="nav nav-pointer pt-1 pt-md-0"></ul>').appendTo(O._$navBar).wrap('<div class="col-12 col-md-auto order-3 order-md-1 modal-nav-menu order-4"></div>').wrap('<div class="collapse navbar-collapse" id="'+O._navId+'"></div>')}O._createModalBody(),O._$modalBody.addClass("p-0 modal-table"),O._$modalTabContent=$('<div class="tab-content h-100"></div>').appendTo(O._$modalBody)}},{key:"_createModalBody",value:function(){_log("MODAL / _createBody"),this._$modalBody=$('<div class="modal-body"></div>').appendTo(this._$modalContent)}},{key:"_updateContent",value:async function(_modelMetadata,_modelId){var O=this;_log("PANEL MetaData / _updateContent"),O._$modalTabContent.html(""),O._modelHandler=await O._getModelHandler(_modelMetadata),O._populateModalNav(O._modelHandler,O._$navBar._$nav),O._populateModalPanel(O._modelHandler),O._$navBar._$nav.find(".nav-link").first().addClass("active"),O._$modalTabContent.find(".tab-pane").first().addClass("active")}},{key:"_populateModalNav",value:function(modelHandler){var O=this;_log("MODAL DETAILS / _populateModalNav"),_log(modelHandler),O._$navBar._$nav.html(""),modelHandler&&modelHandler._menu&&$.each(modelHandler._menu,function(i,menuMeta){if("plot"!=menuMeta.id){if(menuMeta.submenus&&menuMeta.submenus.length>0)O._createNavItemDropdown(menuMeta).appendTo(O._$navBar._$nav);else O._createNavItem(menuMeta).appendTo(O._$navBar._$nav)}}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var target=$(e.target).attr("href"),targetTable=$("div"+target+".tab-pane.h-100.active").find("table");0==targetTable.find(".td-collapse-toggle").length&&_appUI._initTdCollapse(targetTable)})}},{key:"_populateModalPanel",value:function(modelHandler){var O=this;_log("MODAL DETAILS / _populateModalPanel"),_log(modelHandler),modelHandler&&modelHandler._menu&&modelHandler.panels&&$.each(modelHandler._menu,function(i,menuMeta){menuMeta.submenus&&menuMeta.submenus.length>0?$.each(menuMeta.submenus,function(j,submenuMeta){submenuMeta.id in modelHandler.panels&&O._preparePanel(submenuMeta,modelHandler,$(modelHandler.panels[submenuMeta.id].panel)).appendTo(O._$modalTabContent)}):menuMeta.id&&"plot"!=menuMeta.id&&menuMeta.id in modelHandler._panels&&O._preparePanel(menuMeta,modelHandler,$(modelHandler._panels[menuMeta.id].panel)).appendTo(O._$modalTabContent)})}},{key:"_createNavItemDropdown",value:function(menuMeta){_log("MODAL DETAILS / _createTabNavItemDropdown: "+menuMeta.label);var $navItem=$('<li class="nav-item dropdown"></li>'),$dropdown=($('<a class="nav-link dropdown-toggle" role="button">'+menuMeta.label+"</a>").attr("href","#").attr("aria-haspopup",!0).attr("aria-expanded",!1).attr("data-toggle","dropdown").appendTo($navItem),$('<div class="dropdown-menu"></div>').appendTo($navItem));return $.each(menuMeta.submenus,function(i,submenuMeta){$('<a class="dropdown-item" role="button">'+submenuMeta.label+"</a>").attr("href","#"+submenuMeta.id).attr("aria-controls","#"+submenuMeta.id).attr("data-toggle","tab").appendTo($dropdown)}),$navItem}},{key:"_createNavItem",value:function(menuMeta){_log("MODAL DETAILS / _createNavItem: "+menuMeta.label);var $navItem=$('<li class="nav-item"></li>');$('<a class="nav-link" role="button">'+menuMeta.label+"</a>").attr("href","#"+menuMeta.id).attr("aria-controls","#"+menuMeta.id).attr("data-toggle","tab").appendTo($navItem);return $navItem}},{key:"_preparePanel",value:function(menu,modelHandler,handlerPanel){var O=this;_log("MODAL DETAILS / _createPanel: "+menu.id);var $panel=null;if(modelHandler&&menu.id){var panelMeta=modelHandler._panels[menu.id];panelMeta.type&&($panel="modelScript"==panelMeta.type?O._createScriptPanel(menu,modelHandler):"visualizationScript"==panelMeta.type?O._createScriptPanel(menu,modelHandler):"readme"==panelMeta.type?O._createScriptPanel(menu,modelHandler):O._createPanelPan(menu,modelHandler,handlerPanel))}return $panel}},{key:"_createPanelPan",value:function(menu,modelHandler,handlerPanel){_log("MODAL DETAILS / _createPlotPanel");var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id){modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>"),handlerPanel.appendTo($panel)}return $panel}},{key:"_createScriptPanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createScriptPanel");var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id){modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");$('<textarea row="6" class="form-control form-control-sm" />').attr("id",menu.id+"Area").appendTo($panel)}return $panel}},{key:"_getModelHandler",value:async function(modelMetadata){_log("MODAL DETAILS / _getModelHandler");var modelHandler=null;if(modelMetadata){modelHandler="genericModel"===modelMetadata.modelType?new GenericModel(modelMetadata,void 0,!0):"dataModel"===modelMetadata.modelType?new DataModel(modelMetadata,void 0):"predictiveModel"===modelMetadata.modelType?new PredictiveModel(modelMetadata,void 0):"otherModel"===modelMetadata.modelType?new OtherModel(modelMetadata,void 0):"toxicologicalModel"===modelMetadata.modelType?new ToxicologicalModel(modelMetadata,void 0):"doseResponseModel"===modelMetadata.modelType?new DoseResponseModel(modelMetadata,void 0):"exposureModel"===modelMetadata.modelType?new ExposureModel(modelMetadata,void 0):"processModel"===modelMetadata.modelType?new ProcessModel(modelMetadata,void 0):"consumptionModel"===modelMetadata.modelType?new ConsumptionModel(modelMetadata,void 0):"healthModel"===modelMetadata.modelType?new HealthModel(modelMetadata,void 0):"riskModel"===modelMetadata.modelType?new RiskModel(modelMetadata,void 0):"qraModel"===modelMetadata.modelType?new QraModel(modelMetadata,void 0):new GenericModel(modelMetadata,void 0,!0)}return modelHandler}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPMTEditableDetails}(),Dialog=function(){function Dialog(id,title,formData,port){_classCallCheck(this,Dialog);var O=this;O.inputs={},O.editedRow=-1,O.modal=document.createElement("div"),O.create(id,title,formData,port)}return _createClass(Dialog,[{key:"create",value:function(id,title,formData,port){var O=this,form=$('<form class="form-striped" no-immidiate-submit></form>');formData.forEach(function(prop){var inputForm=createForm(prop,null,port);inputForm&&($(inputForm.group).appendTo(form),O.inputs[prop.id]=inputForm)});var modalBody=$('<div class="modal-body p-0 sim-params"></div>'),modalinnerBody=$('<div class="tab-content h-100"></div>');form.appendTo(modalinnerBody),modalinnerBody.appendTo(modalBody),_$modalNav=$('<div class="modal-body sim-select"></div>'),_$navBar=$('<nav class="navbar sim-select">').appendTo(_$modalNav).wrap("<form></form>"),$('<label class="col-4 col-md-3 sim-select-label" >'+title.replace("Add","")+"</label>").appendTo(_$navBar),_$dialogActions=$('<div class="col-8"></div>').appendTo(_$navBar);var $actionGroup1=$('<div class="col-12"></div>').appendTo(_$dialogActions);closeButton=$('<button type="button" class="btn btn-icon btn-outline-light"><i class="feather icon-x"></i></button>').attr("id","simActionclose").attr("data-tooltip","").attr("title","close").attr("data-dismiss","modal").appendTo($actionGroup1),$('<div class="col-divider ml-auto ml-xs-0"></div>').appendTo($actionGroup1),saveButton=$('<button type="button" class="btn btn-icon btn-outline-light"><i class="feather icon-save"></i></button>').attr("id","save").attr("data-tooltip","").attr("title","Save changes").appendTo($actionGroup1).on("click",function(event){var hasError=!1;if(Object.values(O.inputs).forEach(function(input){input.validate()||(hasError=!0)}),!hasError){$(O.modal).modal("hide");var data={};for(var inputId in O.inputs){var currentInput=O.inputs[inputId];data[inputId]=currentInput.value,currentInput.clear()}-1!=O.editedRow?(O.panel.save(O.editedRow,data),O.editedRow=-1,Object.values(O.inputs).forEach(function(input){return input.clear()})):O.panel.add(data)}}),$actionGroup1.wrapInner('<div class="row justify-content-end align-items-center"></div>');var content=document.createElement("div");content.classList.add("modal-content"),content.innerHTML='<div class="modal-header">\n                                <h1 class="modal-title">'+title+'</h1>\n                                <button type="button" class="action action-pure action-lg ml-2" data-dismiss="modal" aria-label="Close"><i class="feather icon-x"></i></button>\n                                </div>',_$navBar.appendTo($(content)),modalBody.appendTo($(content));var modalDialog=document.createElement("div");modalDialog.classList.add("modal-dialog","modal-xl"),modalDialog.setAttribute("role","document"),modalDialog.appendChild(content),O.modal.classList.add("modal","fade","modal-sim"),O.modal.id=id,O.modal.tabIndex=-1,O.modal.setAttribute("role","dialog"),O.modal.appendChild(modalDialog),_appUI._initFormItems(form)}}]),Dialog}(),FormPanel=function(){function FormPanel(title,formData,data,port){_classCallCheck(this,FormPanel),_log("FormPanel /"+title,"primary");var O=this;O.panel=$('<div class="panel-body"></div>'),O.inputs={},O._create(title,formData,data,port)}return _createClass(FormPanel,[{key:"_create",value:function(title,formData,data,port){var O=this,form=$('<form class="form-striped"></form>');formData.forEach(function(prop){var inputForm=createForm(prop,data?data[prop.id]:null,port,"Parameter"===title);inputForm&&($(inputForm.group).appendTo(form),O.inputs[prop.id]=inputForm)}),form.appendTo(O.panel),_appUI._initFormItems(form)}},{key:"validate",value:function(){var isValid=!0;return Object.values(this.inputs).forEach(function(input){input.validate()||(isValid=!1)}),isValid}},{key:"data",get:function(){var data={};return Object.entries(this.inputs).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],input=_ref2[1];return data[id]=input.value}),data}}]),FormPanel}(),InputForm=function(){function InputForm(name,mandatory,type,helperText,value,port){var vocabulary=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,sid=arguments[7];_classCallCheck(this,InputForm);var O=this;O.name=name,O.mandatory=mandatory,O.type=type,O.helperText=helperText,O.isSID=!_isNull(sid)&&!_isUndefined(sid),O.group=null,O._create(name,mandatory,type,helperText,value,vocabulary,port)}return _createClass(InputForm,[{key:"_create",value:function(name,mandatory,type,helperText,value,vocabulary,port){this._createFormField(name,mandatory,type,helperText,value,vocabulary,port)}},{key:"_createFormField",value:function(name,mandatory,type,helperText,value,vocabulary,port){var O=this;if(_log("PANEL SIM / _createFormField"),_log(name),name){var _$formGroup=$('<div class="form-group row"></div>');$label=$('<label class="col-form-label col-form-label-sm col-9 col-xs-3 order-1 sim-param-label"></label>').attr("for","input_"+name).appendTo(_$formGroup),$label.text(name+(mandatory?"*":""));var $field=$('<div class="col-12 col-xs-7 col-md-6 order-3 order-xs-2 sim-param-field"></div>').appendTo(_$formGroup),$actions=$('<div class="col-3 col-xs-auto order-2 order-xs-3 sim-param-actions"></div>').appendTo(_$formGroup);if(O.input=null,helperText)$('<button class="action action-pure float-right" type="button"><i class="feather icon-info"></i></button>').attr("data-toggle","collapse").attr("data-target","#metadata_"+name).attr("aria-expanded",!1).attr("aria-controls","metadata_"+name).attr("title","Show Metadata").appendTo($actions);if(type)if("number"==type){var $inputGroup=$('<div class="input-group input-group-sm"></div>').appendTo($field);O.input=$('<input type="text" />').attr("id","input_"+name).attr("aria-invalid",!1).attr("data-min",parseFloat(Number.MIN_SAFE_INTEGER)).attr("data-max",parseFloat(Number.MAX_SAFE_INTEGER)).appendTo($inputGroup),O.input.addClass("form-control form-control-sm").attr("data-touchspin","")}else O.input="boolean"==type?$('<input type="checkbox" class="form-control form-control-sm" />').attr("id","input_"+name).appendTo($field):$('<input type="text" class="form-control form-control-sm" />').attr("id","input_"+name).appendTo($field);if("date"===type&&"string"!=typeof value){var day=(""+value[2]).length>1?""+value[2]:"0"+value[2],month=(""+value[1]).length>1?""+value[1]:"0"+value[1];O.input.val(value[0]+"-"+month+"-"+day)}else O.input.val(value);if("date"===type&&O.input.attr("data-datepicker",""),vocabulary&&addControlledVocabulary(O.input,vocabulary,port),O.input.on("blur",function(){O.validate(O.value)}),O.input.$validationContainer=$('<div class="validation-message mt-1"></div>').appendTo($field),helperText)$('<div class="collapse param-metadata"></div>').attr("id","metadata_"+name).attr("aria-expanded",!1).appendTo($field).append(_createHelperMetadataText(helperText));O.group=_$formGroup}}},{key:"clear",value:function(){var O=this;O.input.val(""),O.input.$validationContainer&&O.input.$validationContainer.css("display","none"),O.group.removeClass("has-success has-error")}},{key:"onblurHandler",value:function(){var attr=this.input.closest("form").attr("no-immidiate-submit"),can_emit_Event="undefined"===(void 0===attr?"undefined":_typeof(attr))||!1===attr;_log(" onblurHandler"+can_emit_Event),can_emit_Event&&window.editEventBus.broadcast("MetadataChanged")}},{key:"validate",value:function(){var O=this;_log("PANEL  / _validateForm");O.input.find(".has-error").removeClass("has-error"),O.input.find(".is-invalid").removeClass("is-invalid"),O.input.find(".validation-message").empty(),O.input.$validationContainer.text("");var isValid=!0;if(O.mandatory){if(O.isSID){var fieldValue=O.input.val();/^[A-Za-z_^s]\w*$/.test(fieldValue)||(O.input.$validationContainer.text("Parameter ID is not a valid (SId)"),isValid=!1)}else if((isValid=!!O.input.val())||O.input.$validationContainer.text("required"),isValid&&"email"===O.type){isValid=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(O.input.value),O.input.$validationContainer.text("Not a valid email value")}}else isValid=!0;return isValid?O.onblurHandler():(O.input.parents(".form-group").addClass("has-error"),O.input.$validationContainer.addClass("is-invalid"),O.input.$validationContainer.css("display","block")),isValid}},{key:"value",get:function(){var O=this;return"checkbox"!==O.type?O.input.val():O.input.checked},set:function(newValue){this.input.val(newValue)}}]),InputForm}(),SelectForm=function(){function SelectForm(name,mandatory,helperText,value,port){var vocabulary=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;_classCallCheck(this,SelectForm);this.group=document.createElement("div"),this._create(name,mandatory,helperText,value,port,vocabulary)}return _createClass(SelectForm,[{key:"_create",value:function(name,mandatory,helperText,value,port,vocabulary){var O=this,$formGroup=$('<div class="form-group row"></div>');$('<label class="col-form-label col-form-label-sm col-9 col-xs-3 order-1 sim-param-label"></label>').attr("for","selectInput_"+name).appendTo($formGroup).text(name+(mandatory?"*":""));var $field=$('<div class="col-12 col-xs-7 col-md-6 order-3 order-xs-2 "></div>').appendTo($formGroup),$actions=$('<div class="col-3 col-xs-auto order-2 order-xs-3 sim-param-actions"></div>').appendTo($formGroup);if(O.input=null,helperText)$('<button class="action action-pure float-right" type="button"><i class="feather icon-info"></i></button>').attr("data-toggle","collapse").attr("data-target","#paramMetadata_"+name).attr("aria-expanded",!1).attr("aria-controls","paramMetadata_"+name).attr("title","Show Metadata").appendTo($actions);(O.input=$('<select class="form-control form-control-sm" style="width: 100%;" data-sel2 data-placeholder="Select…"/>').attr("id","selectInput_"+name).appendTo($field),O.input.val(value),window._endpoints.controlledVocabularyEndpoint?fetch(window._endpoints.controlledVocabularyEndpoint+""+vocabulary).then(function(response){return response.json()}).then(function(data){O.input.append(data.map(function(item){return"<option>"+item+"</option>"}).join(""))}).catch(function(error){port>=0&&fetch("http://localhost:"+port+"/getAllNames/"+vocabulary).then(function(response){return response.json()}).then(function(data){O.input.append(data.map(function(item){return"<option>"+item+"</option>"}).join(""))})}):port>=0&&fetch("http://localhost:"+port+"/getAllNames/"+vocabulary).then(function(response){return response.json()}).then(function(data){O.input.append(data.map(function(item){return"<option>"+item+"</option>"}).join(""))}),O.input.$validationContainer=$('<div class="validation-message mt-1"></div>').appendTo($field),helperText)&&$('<div class="collapse param-metadata"></div>').attr("id","paramMetadata_"+name).attr("aria-expanded",!1).appendTo($field).append(_createHelperMetadataText(helperText));O.group=$formGroup}},{key:"onblurHandler",value:function(){var attr=this.input.closest("form").attr("no-immidiate-submit"),can_emit_Event="undefined"===(void 0===attr?"undefined":_typeof(attr))||!1===attr;_log(" onblurHandler"+can_emit_Event),can_emit_Event&&window.editEventBus.broadcast("MetadataChanged")}},{key:"clear",value:function(){this.input.val("")}},{key:"validate",value:function(){var O=this,isValid=void 0;return O.input.find(".has-error").removeClass("has-error"),O.input.find(".is-invalid").removeClass("is-invalid"),O.input.find(".validation-message").empty(),(isValid=!O.mandatory||!!O.input.value)?O.onblurHandler():(O.input.$validationContainer.text("required"),O.input.parents(".form-group").addClass("has-error"),O.input.addClass("is-invalid"),O.input.$validationContainer.css("display","block")),isValid}},{key:"value",get:function(){return this.input.val()||this.input.find("option[data-select2-id]").text()},set:function(newValue){this.select.val(newValue)}}]),SelectForm}(),SimpleTable=function(){function SimpleTable(type,data,vocabulary,port){_classCallCheck(this,SimpleTable);var O=this;O.type="text-array"===type?"text":"date",O.vocabulary=vocabulary,O.port=port,O.table=document.createElement("table"),O.table.className="table",O.table.innerHTML="<thead><thead>",O.body=document.createElement("tbody"),O.table.appendChild(O.body),data.forEach(function(value){return O._createRow(value)})}return _createClass(SimpleTable,[{key:"add",value:function(){var O=this;O.body.lastChild&&!O.body.lastChild.lastChild.firstChild.value||O._createRow()}},{key:"remove",value:function(){var O=this;Array.from(O.body.children).forEach(function(row){row.firstChild.firstChild.checked&&O.body.removeChild(row)})}},{key:"trash",value:function(){this.body.innerHTML=""}},{key:"_createRow",value:function(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",O=this,input=document.createElement("input");input.type=O.type,input.className="form-control",input.value=value,O.vocabulary&&addControlledVocabulary(input,O.vocabulary,O.port),input.addEventListener("keyup",function(event){"Enter"===event.key&&(input.blur(),O.add())});var inputCell=document.createElement("td");inputCell.appendChild(input);var newRow=document.createElement("tr");newRow.innerHTML='<td><input type="checkbox"></td>',newRow.appendChild(inputCell),O.body.appendChild(newRow),input.focus()}},{key:"value",get:function(){var data=[];return this.body.childNodes.forEach(function(tr){var input=tr.lastChild.firstChild;data.push(input.value)}),data}}]),SimpleTable}(),TablePanel=function(){function TablePanel(title,formData,data,port){_classCallCheck(this,TablePanel);var O=this;O.panel=document.createElement("div"),O.dialog=new Dialog(title+"Dialog","Add "+title,formData,port),O.dialog.panel=this,O.tablePanel=O._createComplexPanel(data,formData,title,O.dialog),O.table=O.tablePanel.find("table.table-striped"),O.data=data||[],O._create(title,O.dialog,formData)}return _createClass(TablePanel,[{key:"_create",value:function(title,dialog,formData){var O=this;O.panel.classList.add("panel","panel-default"),O.tablePanel.appendTo($(O.panel))}},{key:"_createComplexPanel",value:function(data,formData,title,dialog){var O=this,$panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id","table"+title),addButton=$('<button class="btn btn-outline-secondary btn-sm btn-icon" type="button"><i class="feather icon-plus"></i></button>').attr("aria-label","Add a "+title).attr("title","Add a "+title);addButton.on("click",function(event){Object.values(dialog.inputs).forEach(function(input){return input.clear()}),$(dialog.modal).modal("show")});var removeAllButton=$('<button class="btn btn-outline-secondary btn-sm btn-icon" type="button"><i class="feather icon-trash"></i></button>').attr("aria-label","Remove all "+title+"(s)").attr("title","Remove all "+title+"(s)");removeAllButton.on("click",function(event){O.removeAll()});var tableSettings={cols:[],tableData:[],responsive:!0,showToggle:!0,rowActions:[{type:"link",idPrefix:"mtActionMerge_",icon:"icon-arrow-up",title:"Move Up",on:{click:function(o,$action,rowIndex,rowData){_log("on > clicktrash","hook"),_log(o),_log($action),_log(rowIndex),_log(rowData),O.moveTo(rowIndex,"up")}}},{type:"link",idPrefix:"mtActionMerge_",icon:"icon-arrow-down",title:"Move down",on:{click:function(o,$action,rowIndex,rowData){_log("on > clickMoveTO ","hook"),_log(o),_log($action),_log(rowIndex),_log(rowData),O.moveTo(rowIndex,"down")}}},{type:"link",idPrefix:"mtActionMerge_",icon:"icon-trash",title:"Trash",on:{click:function(o,$action,rowIndex,rowData){_log("on > clicktrash","hook"),_log(o),_log($action),_log(rowIndex),_log(rowData),O.remove(rowIndex)}}},{type:"link",idPrefix:"mtActionEdit_",icon:"icon-edit-2",title:"Edit",on:{click:function(o,$action,rowIndex,rowData){_log("on > clickEdit","hook"),_log(o),_log($action),_log(rowIndex),_log(rowData),O.edit(rowIndex,rowData,dialog)}}}],editableToolbarbuttons:[addButton,removeAllButton]};return $.each(formData,function(i,prop){tableSettings.cols.push({label:prop.label,field:prop.id,sortable:!0,switchable:!0})}),$.each(data,function(i,item){var rowData={cells:[]};$.each(formData,function(j,prop){var data=item[prop.id];data=_checkUndefinedContent(data),rowData.cells.push(data)}),tableSettings.tableData.push(rowData)}),O.panelTable=new APPTable(tableSettings,$panel),$panel.data("table",O.panelTable),$panel}},{key:"add",value:function(data){var O=this;data.el&&delete data.el,O.panelTable._tableData.push(data),O.data.push(data),O.panelTable.addRow(O.panelTable._tableData.length-1,data,!1),window.editEventBus.broadcast("MetadataChanged")}},{key:"edit",value:function(index,originalData,dialog){var keys=[];for(indexx in $.each(this.panelTable.opts.cols,function(index,key){keys.push(key.field)}),keys)dialog.inputs[keys[indexx]].input.val(originalData.cells[indexx]);dialog.editedRow=index,$(dialog.modal).modal("show"),window.editEventBus.broadcast("MetadataChanged")}},{key:"save",value:function(index,originalData){var O=this;originalData.el&&delete originalData.el,O.data.splice(index,1),O.panelTable._tableData.splice(index,1),$(O.panelTable._$tbody).find("tr").eq(index).find("td").each(function(){$(this).html(originalData[$(this).attr("data-id")])}),O.data.push(originalData),O.panelTable._tableData.push(originalData),window.editEventBus.broadcast("MetadataChanged")}},{key:"remove",value:function(index){var O=this;$(O.panelTable._$tbody).find("tr").eq(index).remove(),O.data.splice(index,1),O.panelTable._tableData.splice(index,1),$.each($(O.panelTable._$tbody).find("tr"),function(rowindex,row){$(row).attr("data-row-id",rowindex)}),window.editEventBus.broadcast("MetadataChanged")}},{key:"moveTo",value:function(index,command){var row=$(this.panelTable._$tbody).find("tr").eq(index);"up"===command?row.insertBefore(row.prev()):"down"===command&&row.insertAfter(row.next()),$.each($(this.panelTable._$tbody).find("tr"),function(rowindex,row){$(row).attr("data-row-id",rowindex)})}},{key:"removeAll",value:function(){var O=this;O.data=[],O.panelTable._tableData=[],O.panelTable._clear(),window.editEventBus.broadcast("MetadataChanged")}}]),TablePanel}(),TextareaForm=function(){function TextareaForm(name,mandatory,helperText,value){_classCallCheck(this,TextareaForm);var O=this;O.name=name,O.mandatory=mandatory,O.helperText=helperText,O.textarea=$('<textarea row="6" class="form-control form-control-sm" />').attr("id","area_"+name),O._create(name,mandatory,helperText,value)}return _createClass(TextareaForm,[{key:"_create",value:function(name,mandatory,helperText,value){var O=this,$formGroup=$('<div class="form-group row"></div>');$('<label class="col-form-label col-form-label-sm col-9 col-xs-3 order-1 sim-param-label"></label>').attr("for","areaInput_"+name).appendTo($formGroup).text(name+(mandatory?"*":""));var $field=$('<div class="col-12 col-xs-7 col-md-6 order-3 order-xs-2 "></div>').appendTo($formGroup),$actions=$('<div class="col-3 col-xs-auto order-2 order-xs-3 sim-param-actions"></div>').appendTo($formGroup);if(O.input=null,helperText)$('<button class="action action-pure float-right" type="button"><i class="feather icon-info"></i></button>').attr("data-toggle","collapse").attr("data-target","#paramMetadata_"+name).attr("aria-expanded",!1).attr("aria-controls","paramMetadata_"+name).attr("title","Show Metadata").appendTo($actions);(O.input=$('<textarea type="text" row="6" class="form-control" />').attr("id","areaInput_"+name).appendTo($field),O.input.val(value),O.input.$validationContainer=$('<div class="validation-message mt-1"></div>').appendTo($field),helperText)&&$('<div class="collapse param-metadata"></div>').attr("id","paramMetadata_"+name).attr("aria-expanded",!1).appendTo($field).append(_createHelperMetadataText(helperText));O.group=$formGroup}},{key:"onblurHandler",value:function(){var attr=this.input.closest("form").attr("no-immidiate-submit"),can_emit_Event="undefined"===(void 0===attr?"undefined":_typeof(attr))||!1===attr;_log(" onblurHandler"+can_emit_Event),can_emit_Event&&window.editEventBus.broadcast("MetadataChanged")}},{key:"clear",value:function(){this.input.val("")}},{key:"validate",value:function(){var O=this,isValid=void 0;return O.input.find(".has-error").removeClass("has-error"),O.input.find(".is-invalid").removeClass("is-invalid"),O.input.find(".validation-message").empty(),(isValid=!O.mandatory||!!O.input.val())?O.onblurHandler():(O.input.$validationContainer.text("required"),O.input.parents(".form-group").addClass("has-error"),O.input.addClass("is-invalid"),O.input.$validationContainer.css("display","block")),isValid}},{key:"value",get:function(){return this.input.val()},set:function(newValue){this.input.val(newValue)}}]),TextareaForm}(),APPModalMTSimulations=function(_APPModal2){function APPModalMTSimulations(settings,$container){_classCallCheck(this,APPModalMTSimulations);var modalSettings=$.extend(!0,{},{on:{simRunModelView:null}},settings);return _possibleConstructorReturn(this,(APPModalMTSimulations.__proto__||Object.getPrototypeOf(APPModalMTSimulations)).call(this,modalSettings,$container))}return _inherits(APPModalMTSimulations,APPModal),_createClass(APPModalMTSimulations,[{key:"_create",value:function(){var O=this;_log("MODAL SIM / _create","primary"),_log(O.opts),O._metadata=O.opts.data,O._state="params",O._$simInputs=[],O._simFields={},O._simSelectedIndex=0,_get(APPModalMTSimulations.prototype.__proto__||Object.getPrototypeOf(APPModalMTSimulations.prototype),"_create",this).call(this),O._$modal.on("hide.bs.modal",function(event){$.isFunction(O.opts.on.hide)&&O.opts.on.hide.call(O,O,event),O._fetchController&&(_log("MODAL SIM / abort fetch"),O._fetchController.abort())})}},{key:"_createModal",value:function(){var O=this;_log("MODAL SIM / _createModal"),O._createModalHead(),O.opts._loader=O._loader,O._simulationPanel=new APPSimulation(O.opts,O._$modalContent),O._simulationPanel._createSimulationContent()}},{key:"_updateModal",value:async function(event){var O=this;_log("MODAL SIM / _updateModal"),_log(event),O._loader._setState(!0);var $trigger=$(event.relatedTarget);O._modelId=$trigger.data("modal-id"),O._modelMetadata=O._metadata[O._modelId],O._modelMetadata.generalInformation&&O._modelMetadata.generalInformation.name&&(_log(O._modelMetadata.generalInformation.name),O._setTitle(O._modelMetadata.generalInformation.name)),_simulations=await _fetchData._json(window._endpoints.simulations,O._modelId),await O._simulationPanel._updateContent(O._modelMetadata,O._modelId,_simulations),O._loader._setState(!1)}}]),APPModalMTSimulations}(),APPSimulation=function(){function APPSimulation(settings,$container){_classCallCheck(this,APPSimulation);var O=this;O._$container=$container,O._opts=$.extend(!0,{},{classes:"",data:null,on:{afterInit:null,show:function(O,event){O._updateModal(event)},hide:null}},settings),O._create()}return _createClass(APPSimulation,[{key:"_create",value:function(){var O=this;_log("SIM / _create","primary"),_log(O.opts),O._metadata=O.opts.data,O._state="params",O._$simInputs=[],O._simFields={},O._simSelectedIndex=0}},{key:"_createSimulationContent",value:function(){var O=this;_log("panel SIM / _createSimulationContent"),O._$modalNav=$('<div class="modal-body sim-select"></div>').appendTo(O._$container),O._$navBar=$('<nav class="navbar">').appendTo(O._$modalNav).wrap("<form></form>"),O._$simSelectLabel=$('<label class="col-12 col-md-3 sim-select-label" for="simulationSelect">Simulations</label>').appendTo(O._$navBar),O._$simSelectCounter=$('<span class="badge badge-primary ml-1">x1</span>').appendTo(O._$simSelectLabel),O._$simSelect=$('<select id="simulationSelect" class="custom-control custom-select"></select>').attr("id","simulationSelect").appendTo(O._$navBar).wrap('<div class="col-12 col-xs-auto col-md-4 sim-select-field"></div>').on("change",function(event){var selectedIndex=O._$simSelect[0].selectedIndex;selectedIndex>=0&&O._updateSimIndex(selectedIndex)}),O._createSimActions(),O._$modalParams=$('<div class="modal-body p-0 sim-params"></div>').appendTo(O._$container),O._$modalParams._$content=$('<div class="tab-content h-100"></div>').appendTo(O._$modalParams),O._$modalExecution=$('<div class="modal-body p-0 sim-execution"></div>').appendTo(O._$container),O._$modalExecution._$content=$('<div class="tab-content h-100"></div>').appendTo(O._$modalExecution)}},{key:"_createSimActions",value:function(){var O=this;_log("panel SIM / _createSimActions"),O._$simSelectActions=$('<div class="col-12 col-xs-auto col-md-5 mt-2 mt-xs-0 sim-select-actions"></div>').appendTo(O._$navBar);var $actionGroup1=$('<div class="col-auto sim-select-actions-group"></div>').appendTo(O._$simSelectActions);O._$simActionRemove=$('<button type="button" class="btn btn-icon btn-outline-light"><i class="feather icon-trash-2"></i></button>').attr("id","simActionRemove").attr("data-tooltip","").attr("title","Remove simulation").appendTo($actionGroup1).on("click",function(event){O._removeSimulation()}),O._$simActionAdd=$('<button type="button" class="btn btn-icon btn-outline-light ml-1"><i class="feather icon-plus"></i></button>').attr("id","simActionAdd").attr("data-tooltip","").attr("title","Add simulation").appendTo($actionGroup1).on("click",function(event){O._addSimulation()}),O._$simActionSave=$('<button type="button" class="btn btn-icon btn-outline-light ml-1"><i class="feather icon-save"></i></button>').attr("id","simActionSave").attr("data-tooltip","").attr("title","Save changes").appendTo($actionGroup1).on("click",function(event){O._saveSimulation()}),$('<div class="col-divider ml-auto ml-xs-0"></div>').appendTo(O._$simSelectActions);var $actionGroup2=$('<div class="col-auto sim-select-actions-group"></div>').appendTo(O._$simSelectActions);O._$simActionRun=$('<button type="button" class="btn btn-icon btn-outline-light ml-1"><i class="feather icon-play"></i></button>').attr("id","simActionRun").attr("data-tooltip","").attr("title","Run simulation").appendTo($actionGroup2).on("click",function(event){O._runModelView()}),O._$simSelectActions.wrapInner('<div class="row justify-content-end align-items-center"></div>')}},{key:"_createParamMetadataList",value:function(param){_log("PANEL SIM / _createParamMetadataList");var listData={ID:param.id,Name:param.name,Description:param.description,Unit:param.unit,"Unit category":param.unitCategory,"Data type":param.dataType,Source:param.source,Subject:param.subject,Distribution:param.distribution,Reference:param.reference,"Variability subject":param.variabilitySubject,"Min value":param.minValue,"Max value":param.maxValue,Error:param.error};_log(listData);var $table=$('<table class="table table-sm table-hover table-params-metadata"></table>');return $.each(listData,function(name,value){if(value){var $row=$("<tr></tr>").appendTo($table);$row.append('<td class="td-label">'+name+"</td>"),$row.append("<td>"+value+"</td>")}}),$table}},{key:"_createFormField",value:function(param){var O=this;if(_log("PANEL SIM / _createFormField"),_log(param),param){var _$formGroup2=$('<div class="form-group row"></div>'),_$label2=$('<label class="col-form-label col-form-label-sm col-9 col-xs-3 order-1 sim-param-label"></label>').attr("for","paramInput_"+param.id).appendTo(_$formGroup2);param._label?_$label2.text(param._label):_$label2.text(param.id);var $field=$('<div class="col-12 col-xs-7 col-md-6 order-3 order-xs-2 sim-param-field"></div>').appendTo(_$formGroup2),$actions=$('<div class="col-3 col-xs-auto order-2 order-xs-3 sim-param-actions"></div>').appendTo(_$formGroup2),$input=null,inputType=null;if(inputType="integer"===param.dataType.toLowerCase()||"double"===param.dataType.toLowerCase()||"number"===param.dataType.toLowerCase()?"number":"simname"===param.dataType.toLowerCase()?"simName":"simdescription"===param.dataType.toLowerCase()?"simDescription":"vectorofnumbers"===param.dataType.toLowerCase()?"vectorofnumbers":"matrixofnumbers"===param.dataType.toLowerCase()?"matrixofnumbers":"text",_isNull(param._showMetadata)||!0===param._showMetadata)$('<button class="action action-pure" type="button"><i class="feather icon-info"></i></button>').attr("data-toggle","collapse").attr("data-target","#paramMetadata_"+param.id).attr("aria-expanded",!1).attr("aria-controls","paramMetadata_"+param.id).attr("title","Show Metadata").appendTo($actions);if("vectorofnumbers"==inputType)$('<button class="action action-pure" type="button"><i class="feather icon-edit"></i></button>').attr("title","Edit Vector").appendTo($actions);else if("matrixofnumbers"==inputType)$('<button class="action action-pure" type="button"><i class="feather icon-edit"></i></button>').attr("title","Edit Matrix").appendTo($actions);if(inputType){if("number"==inputType){var $inputGroup=$('<div class="input-group input-group-sm"></div>').appendTo($field);if($input=$('<input type="text" />').attr("id","paramInput_"+param.id).data("param-input",param).attr("aria-invalid",!1).appendTo($inputGroup),param.minValue&&param.maxValue){var step=1;if("double"===param.dataType.toLowerCase())for(var decimals=Math.max(param.minValue.substring(param.minValue.indexOf(".")+1).length,param.maxValue.substring(param.maxValue.indexOf(".")+1).length),j=0;j<decimals;j++)step/=10;$input.addClass("custom-range").attr("data-rangeslider","").attr("data-step",step).attr("data-min",parseFloat(param.minValue)).attr("data-max",parseFloat(param.maxValue)).attr("data-control-single","#paramControlSingle_"+param.id);var $inputControl=$('<input type="text" class="form-control" />').attr("id","paramControlSingle_"+param.id).data("param-input",param).appendTo($field).wrap('<div class="input-range-controls"></div>').wrap('<div class="input-group input-group-sm input-range-control-single"></div>');if(param.unit&&"[]"!=param.unit&&"Others"!=param.unit)$('<div class="input-group-text"></div>').text(param.unit).insertAfter($inputControl).wrap('<div class="input-group-append"></div>')}else $input.addClass("form-control form-control-sm").attr("data-touchspin",""),param.unit&&"[]"!=param.unit&&"Others"!=param.unit&&$input.attr("data-touchspin-postfix",param.unit)}else"simName"==inputType?($input=$('<input type="text" class="form-control form-control-sm" />').attr("id","customInput_"+param.id).data("custom-input",param).appendTo($field),O._$simNameInput=$input):"simDescription"==inputType?($input=$('<textarea type="text" class="form-control form-control-sm" rows="6" /></textarea>').attr("id","customInput_"+param.id).data("custom-input",param).appendTo($field),O._$simDescInput=$input):$input=$('<input type="text" class="form-control form-control-sm" />').attr("id","paramInput_"+param.id).data("param-input",param).appendTo($field);"CONSTANT"===param.classification&&$input.attr("readonly",""),O._$simInputs.push($input),O._simFields[param.id]={input:$input,param:param}}if($input.$validationContainer=$('<div class="validation-message mt-1"></div>').appendTo($field),_isNull(param._showMetadata)||!0===param._showMetadata)$('<div class="collapse param-metadata"></div>').attr("id","paramMetadata_"+param.id).attr("aria-expanded",!1).appendTo($field).append(O._createParamMetadataList(param));return _$formGroup2}return null}},{key:"_populateSimSelect",value:function(){var O=this;_log("PANEL SIM / _populateSimSelect"),O._simulations&&O._simulations.length>0&&O._$simSelect&&(O._$simSelect.empty(),$.each(O._simulations,function(i,sim){if(sim.name)$("<option>"+sim.name+"</option>").appendTo(O._$simSelect)}),O._$simSelectCounter.text("x"+O._simulations.length))}},{key:"_populateSimForm",value:function(){var O=this;_log("PANEL SIM / _populateSimForm"),O._state,O._$simInputs=[],O._simFields={},O._selectedSimIndex=0,O._$simForm&&O._clear(O._$simForm),O._$simForm=$('<form class="form-striped"></form>').attr("id","simParamsForm").appendTo(O._$modalParams._$content);var $simNameFormGroup=O._createFormField({id:"simName",dataType:"SIMNAME",_showMetadata:!1,_label:"Simulation Name",_isCustom:!0,_on:{update:function(O,$input){O._updateSimName()}}});$simNameFormGroup&&$simNameFormGroup.appendTo(O._$simForm);var $simDescFormGroup=O._createFormField({id:"simDescription",dataType:"SIMDESCRIPTION",_showMetadata:!1,_label:"Description (optional)",_isCustom:!0,_on:{update:function(O,$input){O._updateSimDescription()}}});$simDescFormGroup&&$simDescFormGroup.appendTo(O._$simForm);var params=O._modelMetadata.modelMath.parameter;params.length>0&&($.each(params,function(i,param){if("OUTPUT"!=param.classification){var _$formGroup3=O._createFormField(param);_$formGroup3&&_$formGroup3.appendTo(O._$simForm)}}),_appUI._initFormItems(O._$simForm)),_log(O._simFields)}},{key:"_updateSimIndex",value:function(simIndex){var O=this;_log("PANEL SIM / _updateSimIndex: "+simIndex),(simIndex=_isNull(simIndex)?O._simSelectedIndex:simIndex)>=-1&&simIndex!=O._simSelectedIndex&&simIndex<=O._simulations.length-1&&(O._simSelectedIndex=simIndex,O._setState("params"),O._updateSimForm(simIndex),O._updateSimActions(simIndex)),O._$simSelectCounter.text("x"+O._simulations.length)}},{key:"_updateSimForm",value:function(simIndex){var _this15=this,O=this;_log("PANEL SIM / _updateSimForm: "+simIndex);var valIndex=simIndex=_isNull(simIndex)?O._simSelectedIndex:simIndex;simIndex<0&&(valIndex=0);var simulation=O._simulations[valIndex];O._simDisabled=0==simIndex,$(".has-error").removeClass("has-error"),$(".is-invalid").removeClass("is-invalid"),$.each(O._simFields,function(id,field){if(field.input&&field.param){if(field.input.prop("disabled",O._simDisabled),field.input.data("rangeslider")?field.input.data("rangeslider").update({disable:O._simDisabled}):_isUndefined(field.input.attr("data-touchspin"))||field.input.parent().find("button").prop("disabled",O._simDisabled),field.param._isCustom)field.param._isCustom&&1==field.param._isCustom&&(_log(field.param.id+" : ","level1"),field.param._on&&field.param._on.update&&$.isFunction(field.param._on.update)&&field.param._on.update.call(_this15,O));else{_log(field.param.id+" : "+simulation.parameters[field.param.id],"level1");var paramValue=simulation.parameters[field.param.id];!_isNull(paramValue)&&field.input.val(paramValue)}field.input.trigger("change")}})}},{key:"_updateSimActions",value:function(simIndex){var O=this;_log("PANEL SIM / _updateSimActions"),-1==(simIndex=_isNull(simIndex)?O._simSelectedIndex:simIndex)?(O._$simActionRemove.prop("disabled",!1),O._$simActionAdd.prop("disabled",!0),O._$simActionSave.prop("disabled",!1)):0==simIndex?(O._$simActionRemove.prop("disabled",!0),O._$simActionAdd.prop("disabled",!1),O._$simActionSave.prop("disabled",!0)):(O._$simActionRemove.prop("disabled",!1),O._$simActionAdd.prop("disabled",!1),O._$simActionSave.prop("disabled",!1))}},{key:"_updateSimName",value:function(){var O=this;if(_log("PANEL SIM / _updateSimName"),O._$simNameInput){var simName="";_isNull(O._simulations)||_isNull(O._simSelectedIndex)||!O._simulations[O._simSelectedIndex]||(simName=O._simulations[O._simSelectedIndex].name),O._$simNameInput.val(simName)}}},{key:"_updateSimDescription",value:function($input){var O=this;if(_log("PANEL SIM / _updateSimDescription"),O._$simDescInput){var simDesc="";_isNull(O._simulations)||_isNull(O._simSelectedIndex)||!O._simulations[O._simSelectedIndex]||(simDesc=O._simulations[O._simSelectedIndex].desc),O._$simDescInput.val(simDesc)}}},{key:"_addSimulation",value:function(){_log("PANEL SIM / _addSimulation","secondary"),this._$simSelect.val(""),this._updateSimIndex(-1)}},{key:"_removeSimulation",value:function(){var O=this;_log("PANEL SIM / _removeSimulation","secondary"),0!=O._simSelectedIndex&&(O._$simSelect.find("option").eq(O._simSelectedIndex).remove(),O._simulations.splice(O._simSelectedIndex,1),O._$simSelect.find("option").eq(0).prop("selected",!0),O._updateSimIndex(0))}},{key:"_saveSimulation",value:async function(){var O=this;if(_log("PANEL SIM / _saveSimulation","secondary"),0==(await O._validateSimForm()).length){var newSimulation=JSON.parse(JSON.stringify(O._simulations[0]));newSimulation.name=O._$simNameInput.val(),newSimulation.desc=O._$simDescInput?O._$simDescInput.val():"",O._simFields&&($.each(O._simFields,function(id,field){field.input&&!_isNull(field.param)&&(newSimulation.parameters[field.param.id]=field.input.val())}),O._simulations.push(newSimulation),O._populateSimSelect(),O._$simSelect.find("option").last().prop("selected",!0),O._updateSimIndex(O._simulations.length-1))}}},{key:"_validateSimForm",value:async function(){var O=this;_log("PANEL SIM / _validateSimForm");var validationErrors=[];return $(".has-error").removeClass("has-error"),$(".is-invalid").removeClass("is-invalid"),$(".validation-message").empty(),O._simFields&&$.each(O._simFields,function(id,field){if(!_isNull(field.param)){var validationParam=O._validateSimField(field);validationParam&&validationErrors.push(validationParam)}}),$.each(validationErrors,function(i,error){error.input.parents(".form-group").addClass("has-error"),error.input.addClass("is-invalid"),error.input.$validationContainer.text(error.msg)}),_log(validationErrors),validationErrors}},{key:"_validateSimField",value:function(field){if(_log("PANEL SIM / _validateSimField"),_log(field),field&&field.input){var fieldValue=field.input.val();if("simname"===field.param.dataType.toLowerCase()){if(0==fieldValue.length)return{input:field.input,msg:"Simulation name is required"};for(var i=0;i<this._simulations.length;++i)if(fieldValue===this._simulations[i].name)return{input:field.input,msg:"Simulation name already exists"};if(!/^[A-Za-z_^s]\w*$/.test(fieldValue))return{input:field.input,msg:"Not a valid simulation name (SId)"}}else if("simdescription"===field.param.dataType.toLowerCase());else{if(!fieldValue)return{input:field.input,msg:"Please provide a value for "+field.param.id};if("integer"===field.param.dataType.toLowerCase()||"double"===field.param.dataType.toLowerCase()){if(field.param.minValue&&parseFloat(field.param.minValue)>fieldValue)return{input:field.input,msg:"Invalid value. Value is lower than minimal value: "+field.param.minValue};if(field.param.maxValue&&parseFloat(field.param.maxValue)<fieldValue)return{input:field.input,msg:"Invalid value. Value is higher than maximum value: "+field.param.maxValue}}else"file"===field.param.dataType.toLowerCase()||"vectorofnumbers"===field.param.dataType.toLowerCase()||field.param.dataType.toLowerCase()}}return!1}},{key:"_updateContent",value:async function(_modelMetadata,_modelId,_simulations){var O=this;_log("PANEL SIM / _updateContent"),O._setState("params"),O._modelMetadata=_modelMetadata,O._modelId=_modelId,O._clear(O._$modalParams._$content),O._simSelectedIndex=0,O._simulations=_simulations,O._simulations&&O._simulations.length>0&&(O._populateSimSelect(),O._populateSimForm(),O._updateSimForm(0),O._updateSimActions(0))}},{key:"_runModelView",value:async function(modelId){var O=this;if(_log("PANEL SIM / _runModelView : "+O._modelId,"secondary"),(modelId=modelId||O._modelId)>=0){O._fetchController=new AbortController,O._signal=O._fetchController.signal,O._clear(O._$modalExecution._$content),O._clear(O._$modalExecution._$title),O._setState("execution"),O._$container.addClass("loading"),O._opts._loader._setState(!0);var $alert=_appUI._createAlert("executing model... please wait",{type:"primary",state:"show",classes:"m-1"},O._$modalExecution._$content),result=await _fetchData._content(_endpoints.execution,modelId,O._signal);O._clear(O._$modalExecution._$content),O._clear(O._$modalExecution._$title),$alert.remove();$('<div class="panel-heading"></div>').text(O._simulations[O._selectedSimIndex].name).appendTo(O._$modalExecution._$content),$(result).appendTo(O._$modalExecution._$content).wrapAll('<div class="panel-plot"></div>');O._$container.removeClass("loading"),O._opts._loader._setState(!1),$.isFunction(O.opts.on.simRunModelView)&&O.opts.on.simRunModelView.call(O,O,modelId,O._simulations[O._selectedSimIndex])}}},{key:"_clear",value:function($elem){_log("PANEL SIM / _clear"),_log($elem),$elem&&$elem.empty()}},{key:"_setState",value:function(state){var O=this;_log("PANEL SIM / _setState: "+state),state&&O._state!=state&&("execution"==state?(O._$modalExecution.show(),O._$modalParams.hide(),O._$modalNav.hide()):(O._$modalExecution.hide(),O._$modalParams.show(),O._$modalNav.show()),O._state=state)}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPSimulation}(),APPMTDetails=function(){function APPMTDetails(settings,$container){_classCallCheck(this,APPMTDetails);var O=this;O._$modalContent=$container,O._opts=$.extend(!0,{},{classes:"",data:null,on:{afterInit:null,show:function(O,event){O._updateModal(event)},hide:null}},settings),O._create()}return _createClass(APPMTDetails,[{key:"_create",value:function(){_log("MODAL DETAILS / _create","primary"),this._metadata=this.opts.data}},{key:"_createModelMetadataContent",value:function(){var O=this;if(_log("MODAL DETAILS / _createModelMetadataContent"),O._$modalNav=$('<div class="modal-body modal-nav"></div>').appendTo(O._$modalContent),O._navId=O._id+"Nav",!O._$navBar){O._$navBar=$('<nav class="navbar navbar-expand-sm row justify-content-start justify-content-md-between"></nav>').appendTo(O._$modalNav);$('<button class="action action-pure mt-1 mb-1" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation"><i class="feather icon-list"></i></button>').appendTo(O._$navBar).attr("data-target","#"+O._navId).attr("aria-controls",O._navId).wrap('<div class="col-auto navbar-toggler order-1 modal-nav-toggler"></div>');O._$navBar.append('<div class="col-divider order-2 d-block d-sm-none d-md-block"></div>'),O._$navBar._$search=$('<input class="form-control form-control-plaintext search-input" type="search" placeholder="Search Details" aria-label="Search Details" />').appendTo(O._$navBar).attr("id",O._id+"NavSearch").wrap('<div class="col col-xxs-auto order-2 modal-nav-search"></div>').wrap('<div class="search"></div>'),O._$navBar._$nav=$('<ul class="nav nav-pointer pt-1 pt-md-0"></ul>').appendTo(O._$navBar).wrap('<div class="col-12 col-md-auto order-3 order-md-1 modal-nav-menu order-4"></div>').wrap('<div class="collapse navbar-collapse" id="'+O._navId+'"></div>')}O._createModalBody(),O._$modalBody.addClass("p-0 modal-table"),O._$modalTabContent=$('<div class="tab-content h-100"></div>').appendTo(O._$modalBody)}},{key:"_createModalBody",value:function(){_log("MODAL / _createBody"),this._$modalBody=$('<div class="modal-body"></div>').appendTo(this._$modalContent)}},{key:"_updateContent",value:async function(_modelMetadata,_modelId){var O=this;_log("PANEL MetaData / _updateContent"),O._$modalTabContent.html(""),O._modelHandler=await O._getModelHandler(_modelMetadata,_modelId),O._populateModalNav(O._modelHandler,O._$navBar._$nav),O._populateModalPanel(O._modelHandler),O._$navBar._$nav.find(".nav-link").first().addClass("active"),O._$modalTabContent.find(".tab-pane").first().addClass("active")}},{key:"_populateModalNav",value:function(modelHandler){var O=this;_log("MODAL DETAILS / _populateModalNav"),_log(modelHandler),O._$navBar._$nav.html(""),modelHandler&&modelHandler._menu&&$.each(modelHandler._menu,function(i,menuMeta){if("readme"!=menuMeta.id){if(menuMeta.submenus&&menuMeta.submenus.length>0)O._createNavItemDropdown(menuMeta).appendTo(O._$navBar._$nav);else O._createNavItem(menuMeta).appendTo(O._$navBar._$nav)}})}},{key:"_populateModalPanel",value:function(modelHandler){var O=this;_log("MODAL DETAILS / _populateModalPanel"),_log(modelHandler),modelHandler&&modelHandler._menu&&modelHandler._panels&&$.each(modelHandler._menu,function(i,menuMeta){"readme"!=menuMeta.id&&(menuMeta.submenus&&menuMeta.submenus.length>0?$.each(menuMeta.submenus,function(j,submenuMeta){submenuMeta.id in modelHandler._panels&&O._createPanel(submenuMeta,modelHandler).appendTo(O._$modalTabContent)}):menuMeta.id&&menuMeta.id in modelHandler._panels&&O._createPanel(menuMeta,modelHandler).appendTo(O._$modalTabContent))})}},{key:"_createNavItemDropdown",value:function(menuMeta){_log("MODAL DETAILS / _createTabNavItemDropdown: "+menuMeta.label);var $navItem=$('<li class="nav-item dropdown"></li>'),$dropdown=($('<a class="nav-link dropdown-toggle" role="button">'+menuMeta.label+"</a>").attr("href","#").attr("aria-haspopup",!0).attr("aria-expanded",!1).attr("data-toggle","dropdown").appendTo($navItem),$('<div class="dropdown-menu"></div>').appendTo($navItem));return $.each(menuMeta.submenus,function(i,submenuMeta){$('<a class="dropdown-item" role="button">'+submenuMeta.label+"</a>").attr("href","#"+submenuMeta.id).attr("aria-controls","#"+submenuMeta.id).attr("data-toggle","tab").appendTo($dropdown)}),$navItem}},{key:"_createNavItem",value:function(menuMeta){_log("MODAL DETAILS / _createNavItem: "+menuMeta.label);var $navItem=$('<li class="nav-item"></li>');$('<a class="nav-link" role="button">'+menuMeta.label+"</a>").attr("href","#"+menuMeta.id).attr("aria-controls","#"+menuMeta.id).attr("data-toggle","tab").appendTo($navItem);return $navItem}},{key:"_createPanel",value:function(menu,modelHandler){var O=this;_log("MODAL DETAILS / _createPanel: "+menu.id);var $panel=null;if(modelHandler&&menu.id){var panelMeta=modelHandler._panels[menu.id];panelMeta.type&&("complex"==panelMeta.type?$panel=O._createComplexPanel(menu,modelHandler):"simple"==panelMeta.type?$panel=O._createSimplePanel(menu,modelHandler):"plot"==panelMeta.type?$panel=O._createPlotPanel(menu,modelHandler):"modelScript"==panelMeta.type?$panel=O._createModelScriptPanel(menu,modelHandler):"visualizationScript"==panelMeta.type&&($panel=O._createVisualizationScriptPanel(menu,modelHandler)))}return $panel}},{key:"_createSimplePanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createSimplePanel: "+menu.id);var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id){var panelMeta=modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");var tableSettings={cols:[{label:"Property",field:"property",classes:{th:null,td:"td-label min-200"},sortable:!0,switchable:!1},{label:"Value",field:"value",sortable:!1,switchable:!1}],tableData:[],responsive:!0,showToggle:!0};panelMeta.metadata&&panelMeta.schema&&$.each(panelMeta.schema,function(j,prop){var rowData={cells:[]};rowData.cells.push(prop.label);var data=panelMeta.metadata[prop.id];data=_checkUndefinedContent(data),rowData.cells.push(data),tableSettings.tableData.push(rowData)});var panelTable=new APPTable(tableSettings,$panel);$panel.data("table",panelTable)}return $panel}},{key:"_createComplexPanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createComplexPanel: "+menu.id);var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id){var panelMeta=modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");var tableSettings={cols:[],tableData:[],responsive:!0,showToggle:!0};$.each(panelMeta.schema,function(i,prop){tableSettings.cols.push({label:prop.label,field:prop.id,sortable:!0,switchable:!0})}),panelMeta.metadata&&panelMeta.schema&&$.each(panelMeta.metadata,function(i,item){var rowData={cells:[]};$.each(panelMeta.schema,function(j,prop){var data=item[prop.id];data=_checkUndefinedContent(data),rowData.cells.push(data)}),tableSettings.tableData.push(rowData)});var panelTable=new APPTable(tableSettings,$panel);$panel.data("table",panelTable)}return $panel}},{key:"_createPlotPanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createPlotPanel");var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id&&modelHandler._img){modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");$('<figure class="figure"><img src="'+modelHandler._img+'" /></figure>').appendTo($panel).wrap('<div class="panel-plot"></div>')}return $panel}},{key:"_createModelScriptPanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createPlotPanel");var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id&&modelHandler._modelScript){modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");for(var $script=$('<pre class="brush: js;"></pre>').appendTo($panel).wrap('<div class="panel-plot"></div>'),lines=modelHandler._modelScript.split("\n"),i=0;i<lines.length;i++)$('<span class="line">'+lines[i]+"</span>").appendTo($script)}return $panel}},{key:"_createVisualizationScriptPanel",value:function(menu,modelHandler){_log("MODAL DETAILS / _createPlotPanel");var $panel=$('<div class="tab-pane h-100" role="tabpanel"></div>').attr("id",menu.id);if(modelHandler&&menu.id&&modelHandler._visScript){_log("ifffff visualizationScript: "+modelHandler._visScript);modelHandler._panels[menu.id];$panel.append('<div class="panel-heading">'+menu.label+"</div>");for(var $script=$('<pre class="brush: js;"></pre>').appendTo($panel).wrap('<div class="panel-plot"></div>'),lines=modelHandler._visScript.split("\n"),i=0;i<lines.length;i++)$('<span class="line">'+lines[i]+"</span>").appendTo($script)}return $panel}},{key:"_getModelHandler",value:async function(modelMetadata,modelId){_log("MODAL DETAILS / _getModelHandler");var modelHandler=null;if(modelMetadata){var imgUrl=await _fetchData._blob(_endpoints.image,modelMetadata.generalInformation.identifier),modelScript=await _fetchData._content(_endpoints.modelScript,modelId),visScript=await _fetchData._content(_endpoints.visScript,modelId);modelHandler="genericModel"===modelMetadata.modelType?new GenericModel(modelMetadata,imgUrl,!1,modelScript,visScript):"dataModel"===modelMetadata.modelType?new DataModel(modelMetadata,imgUrl,!1,modelScript,visScript):"predictiveModel"===modelMetadata.modelType?new PredictiveModel(modelMetadata,imgUrl,!1,modelScript,visScript):"otherModel"===modelMetadata.modelType?new OtherModel(modelMetadata,imgUrl,!1,modelScript,visScript):"toxicologicalModel"===modelMetadata.modelType?new ToxicologicalModel(modelMetadata,imgUrl,!1,modelScript,visScript):"doseResponseModel"===modelMetadata.modelType?new DoseResponseModel(modelMetadata,imgUrl,!1,modelScript,visScript):"exposureModel"===modelMetadata.modelType?new ExposureModel(modelMetadata,imgUrl,!1,modelScript,visScript):"processModel"===modelMetadata.modelType?new ProcessModel(modelMetadata,imgUrl,!1,modelScript,visScript):"consumptionModel"===modelMetadata.modelType?new ConsumptionModel(modelMetadata,imgUrl,!1,modelScript,visScript):"healthModel"===modelMetadata.modelType?new HealthModel(modelMetadata,imgUrl,!1,modelScript,visScript):"riskModel"===modelMetadata.modelType?new RiskModel(modelMetadata,imgUrl,!1,modelScript,visScript):"qraModel"===modelMetadata.modelType?new QraModel(modelMetadata,imgUrl,!1,modelScript,visScript):new GenericModel(modelMetadata,imgUrl,!1,modelScript,visScript)}return modelHandler}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPMTDetails}(),APPTable=function(){function APPTable(settings,$container,metadata){_classCallCheck(this,APPTable);var O=this;O._$container=$container,O._$wrapper=null,O.totalRows=0,O._opts=$.extend(!0,{},{attributes:{},classes:"",cols:[],tableData:null,ids:{table:"tGrid",thead:"tHead",tbody:"tRows"},responsive:!0,rowActions:[],rowSelectable:!1,showToggle:!0,wrapper:!1,on:{afterInit:null,afterPopulate:null,selectRow:null,deselectRow:null}},settings),O._metadata=metadata,O._create(),$.isFunction(O.opts.on.afterInit)&&O.opts.on.afterInit.call(O,O)}return _createClass(APPTable,[{key:"addRow",value:function(rowIndex,rowData,tableData,isMainTable){var O=this;tableData=O._tableData;var $tr=$('<tr data-row-id="'+rowIndex+'"></tr>').appendTo(O._$tbody);if(O.opts.rowSelectable&&($tr.data("selectable",""),$tr.data("selected",!1),$tr.on("click",function(event){$(event.target).is("a, button, .action")||$(event.target).parent().is("a, button, .action")||O._handleRowSelect($tr)})),isMainTable&&(tableData[rowIndex].el=$tr),$.each(O.opts.cols,function(j,col){var data=void 0;data=rowData.cells?rowData.cells[j]:rowData[col.field];var $td=$("<td></td>").appendTo($tr);data&&data.length>60&&(col.collapsable="true"),col.classes&&col.classes.td&&$td.addClass(col.classes.td),col.collapsable&&$td.attr("data-td-collapse",col.collapsable),col.label&&$td.attr("data-label",col.label),col.field&&$td.attr("data-id",col.field),col.attributes&&col.attributes.td&&$.each(col.attributes.td,function(attr,val){attr&&val&&$td.attr(attr,val)}),col.formatter&&($.isFunction(col.formatter)?data=col.formatter.call(O,data):_formatter&&_formatter.hasOwnProperty(col.formatter)&&(data=_formatter[col.formatter].call(O,data))),$td.html(data)}),O.opts.rowActions&&O.opts.rowActions.length>0){var $tdActions=$('<td class="td-actions"></td>').appendTo($tr);$.each(O.opts.rowActions,function(j,action){var $action=$('<button class="action action-outline-secondary"></button>').attr("id",action.idPrefix+rowIndex);$action.$icon=$('<i class="feather"></i>').appendTo($action),action.icon&&$action.$icon.addClass(action.icon),action.title&&$action.attr("data-tooltip","").attr("aria-label",action.title).attr("title",action.title),action.on&&action.on.click&&$.isFunction(action.on.click)&&$action.on("click",function(event){actionIndex=$tr.attr("data-row-id"),action.on.click.call(O,O,$action,actionIndex,rowData)}),action.type&&"modal"==action.type&&$action.attr("data-toggle","modal").attr("data-target",action.target).attr("data-modal-id",rowIndex),$action.appendTo($tdActions)}),$tdActions.wrapInner('<div class="td-actions-container"></div>')}O.totalRows=rowIndex}},{key:"_create",value:async function(){var O=this;_log("TABLE / _create","primary"),O._view="default",O._tableData=O.opts.tableData,_log(O._tableData),$.isFunction(O.opts.on.create)&&O.opts.on.create.call(O,O),O._tableData&&(O._$table=$('<table class="table table-striped table-hover"></table>').attr("id",O.opts.ids.table).attr("data-table","").addClass(O.opts.classes).appendTo(O._$container),O.opts.wrapper&&"card"==O.opts.wrapper&&(O._$wrapper=$('<div class="card card-table-main overflow-hidden"></div>'),O._$table.wrap(O._$wrapper),O._$table.wrap('<div class="card-body p-0"></div>')),O.opts.responsive&&O._$table.wrap('<div class="table-responsive"></div>'),O.opts.classes&&O._$table.addClass(O.opts.classes),O.opts.showToggle&&O._$table.attr("data-show-toggle",O.opts.showToggle),$.each(O.opts.attributes,function(attr,val){O._$table.attr(attr,val)}),O._createTableToolbar(),O._$thead=O._createTableHead(O.opts.cols).appendTo(O._$table),O._$tbody=O._createTableBody().appendTo(O._$table),O._populateTable(O._tableData)),_appUI._initTooltips(O._$container)}},{key:"_createTableHead",value:function(cols){var O=this;_log("TABLE / _createTableHead");var $thead=$("<thead></thead>");if(cols){if($.each(cols,function(i,col){var $th=$("<th></th>").appendTo($thead);col.label&&$th.html("<span>"+col.label+"</span>"),col.id&&$th.attr("id",col.id),col.classes&&col.classes.th&&$th.addClass(col.classes.th),col.field&&$th.attr("data-field",col.field),col.sortable&&($th.attr("data-sortable",col.sortable),$th.on("click",function(event){O._updateOrder($th)}),col.sorter&&$th.attr("data-sorter",col.sorter)),col.attribute&&col.attributes.th&&$.each(col.attributes.th,function(attr,val){$th.attr(attr,val)})}),O.opts.rowActions&&O.opts.rowActions.length>0)$("<th></th>").attr("id","colActions").attr("data-field","actionsTable").appendTo($thead);$thead.wrapInner("<tr></tr>")}return $thead}},{key:"_createTableToolbar",value:function(){var O=this;_log("TABLE / _createTableToolbar"),(O.opts.showToggle||O.opts.showColumns)&&(O._$toolbar=$('<div class="table-toolbar"></div>'),O.opts.responsive?O._$toolbar.insertBefore(O._$table.parent()):O._$toolbar.insertBefore(O._$table),O._$toolbar._$btnGroup=$('<div class="col-auto btn-group"></div>').appendTo(O._$toolbar).wrap('<div class="ml-auto row justify-content-end"></div>'),O.opts.showToggle&&(O._$toolbar._$btnToggleView=$('<button class="btn btn-outline-secondary btn-sm btn-icon toggle-card" type="button"><i class="feather icon-pause"></i></button>').attr("aria-label","Toggle view").attr("title","Toggle view").attr("data-tooltip","").attr("data-toggle-table-view","").appendTo(O._$toolbar._$btnGroup),O._$toolbar._$btnToggleView.on("click",function(event){O._toggleTableView()})),O._opts.editableToolbarbuttons&&$.each(O._opts.editableToolbarbuttons,function(index,element){element.appendTo(O._$toolbar._$btnGroup)}))}},{key:"_createTableBody",value:function(){return _log("TABLE / _createTableBody"),$("<tbody></tbody>")}},{key:"_populateTable",value:function(tableData){var _this16=this,O=this;_log("TABLE / _populateTable"),O._clear(),tableData=tableData||O._tableData,$.each(tableData,function(rowIndex,rowData){_this16.addRow(rowIndex,rowData,tableData,"true")}),$.isFunction(O.opts.on.afterPopulate)&&O.opts.on.afterPopulate.call(O,O,O._tableData)}},{key:"_updateOrder",value:function($th){var O=this;_log("TABLE / _updateOrder");var field=$th.data("field"),$rows=O._$tbody.find("tr").toArray(),col=O._getColIndexByField(field);if($th.is(".asc")||$th.is(".desc"))$th.toggleClass("asc desc"),O._$tbody.append($rows.reverse());else{$th.addClass("asc"),$th.siblings().removeClass("asc desc");var fieldSorter=$th.data("sorter")||"_name";_log("sort by : "+field+" with "+fieldSorter,"level1"),fieldSorter&&($.isFunction(fieldSorter)?$rows.sort(function(a,b){aa=$(a).find("td").eq(col).text(),bb=$(b).find("td").eq(col).text(),log(aa+" / "+bb),fieldSorter.call(aa,bb)}):_sorter&&_sorter.hasOwnProperty(fieldSorter)&&$rows.sort(function(a,b){return aa=$(a).find("td").eq(col).text(),bb=$(b).find("td").eq(col).text(),_sorter[fieldSorter](aa,bb)}),O._$tbody.append($rows))}}},{key:"_getColIndexByField",value:function(field){var colIndex=-1;return $.each(this.opts.cols,function(i,col){field==col.field&&(colIndex=i)}),colIndex}},{key:"_clear",value:function(){_log("TABLE / _clear"),this._$tbody&&this._$tbody.empty()}},{key:"_toggleTableView",value:function(event){var O=this;_log("TABLE / _toggleTableView"),_log(O._view),"default"==O._view?(O._view="card",O._$table.addClass("table-view-card"),O._$toolbar._$btnToggleView.removeClass("toggle-card").addClass("toggle-default")):(O._view="default",O._$table.removeClass("table-view-card"),O._$toolbar._$btnToggleView.removeClass("toggle-default").addClass("toggle-card"))}},{key:"_handleRowSelect",value:function($tr){var O=this;O.opts.rowSelectable&&$tr&&($tr.data("selected")?O._deselectRow($tr):"single"==O.opts.rowSelectable?(O._deselectAllRows(),O._selectRow($tr)):O._selectRow($tr))}},{key:"_selectRow",value:function($tr){var O=this;if(_log("TABLE / _selectRow : "+$tr.data("row-id")),$tr){var rowIndex=$tr.data("row-id"),rowData=O._tableData[rowIndex];$tr.addClass("tr-selected"),$tr.data("selected",!0),$.isFunction(O.opts.on.selectRow)&&O.opts.on.selectRow.call(O,O,rowIndex,rowData)}}},{key:"_deselectRow",value:function($tr){var O=this;if(_log("TABLE / _deselectRow : "+$tr.data("row-id")),$tr){var rowIndex=$tr.data("row-id"),rowData=O._tableData[rowIndex];$tr.removeClass("tr-selected"),$tr.data("selected",!1),$.isFunction(O.opts.on.deselectRow)&&O.opts.on.deselectRow.call(O,O,rowIndex,rowData)}}},{key:"_deselectAllRows",value:function(){_log("TABLE / _deselectAllRows"),this._$table.find(".tr-selected").each(function(i,tr){var $tr=$(tr);$tr.removeClass("tr-selected"),$tr.data("selected",!1)})}},{key:"_getSelectedRows",value:function(){_log("TABLE / _getSelectedRows");var selectedRows=[];return $.each(this._tableData,function(i,row){row.el.is(".tr-selected")&&!row.el.is(".tr-hidden")&&selectedRows.push(row)}),selectedRows}},{key:"_updateStripes",value:function(){_log("TABLE / _updateStripes"),this._$table.is(".table-striped")&&this._$tbody.find("tr:not(.tr-hidden)").each(function(i,tr){var $tr=$(tr);$tr.removeClass("tr-odd tr-even"),(i+1)%2==0?$tr.addClass("tr-even"):$tr.addClass("tr-odd")})}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPTable}(),APPTableMT=function(_APPTable){function APPTableMT(settings,$container,metadata){_classCallCheck(this,APPTableMT);var tableSettings=$.extend(!0,{},{classes:"table-main",ids:{table:"mtGrid",thead:"mtHead",tbody:"mtRows",filter:"mtFilter"},rowActions:[],rowSelectable:!1,wrapper:"card",on:{afterInit:null,selectRow:null,deselectRow:null,updateFilter:null}},settings);return _possibleConstructorReturn(this,(APPTableMT.__proto__||Object.getPrototypeOf(APPTableMT)).call(this,tableSettings,$container,metadata))}return _inherits(APPTableMT,APPTable),_createClass(APPTableMT,[{key:"_create",value:async function(){var O=this;_log("TABLE MAIN / _create","primary"),O._facets={},O._filtered=[],O._view="default",O._loader=_appUI._createLoader({classes:"loader-page"},O._$container),O._loader._setState(!0),O._metadata?await O._prepareDataTable():(await O._createData(),await O._prepareDataTable()),O._loader._setState(!1),$.isFunction(O.opts.on.create)&&O.opts.on.create.call(O,O),O._tableData&&(O._createFilter(),O._$table=$('<table class="table table-striped table-hover table-main"></table>').appendTo(O._$container).attr("id",O.opts.ids.table),O.opts.wrapper&&"card"==O.opts.wrapper&&(O._$table.add(O._$filter).wrapAll($('<div class="card card-table-main overflow-hidden"></div>')),O._$table.wrap('<div class="card-body p-0"></div>'),O._$filter.wrap('<div class="card-header p-0"></div>')),O.opts.responsive&&O._$table.wrap('<div class="table-responsive"></div>'),O.opts.showToggle&&O._$table.attr("data-show-toggle",O.opts.showToggle),$.each(O.opts.attributes,function(attr,val){O._$table.attr(attr,val)}),O._createTableToolbar(),O._$thead=O._createTableHead(O.opts.cols).appendTo(O._$table),O._$tbody=O._createTableBody(O._tableData).appendTo(O._$table),O._populateTable(O._tableData),_appUI._initTdCollapse(O._$table),O._updateFilter()),_appUI._initTooltips(O._$container)}},{key:"_refresh",value:async function(index,modelMetadata){var O=this,rowData=O._tableData[index];rowData.modelMetadata=modelMetadata;var modelName=O._getData(modelMetadata,"generalInformation","name");rowData.el.find('td[data-label="Model"]').html(modelName);var software=O._getData(modelMetadata,"generalInformation","software");rowData.el.find('td[data-label="Software"]').html(software),console.log("_refresh",rowData);var environment=O._getScopeData(modelMetadata,"scope","product","productName");rowData.el.find('td[data-label="Environment"]').html(environment);var hazard=O._getScopeData(modelMetadata,"scope","hazard","hazardName");rowData.el.find('td[data-label="Hazard"]').html(hazard);var modelType=modelMetadata.modelType;rowData.el.find('td[data-label="Type"]').html(modelType),software&&O._updateSet("software",software),environment&&environment.forEach(function(x){O._updateSet("environment",x)}),hazard&&hazard.forEach(function(x){O._updateSet("hazard",x)}),modelType&&O._updateSet("modelType",modelType)}},{key:"_createData",value:async function(){var O=this;_log("TABLE MAIN / _createData"),O._metadata=await _fetchData._json(window._endpoints.metadata),O._uploadDates=await _fetchData._array(window._endpoints.uploadDate,O._metadata.length),O._executionTimes=await _fetchData._array(window._endpoints.executionTime,O._metadata.length),_log(O._tableData)}},{key:"_prepareDataTable",value:async function(){_log("TABLE MAIN / _prepareDataTable","primary");var O=this;console.log(O._metadata),O._tableData=[];for(var _loop2=function(i){var modelMetadata=O._metadata[i],rowData={modelMetadata:modelMetadata,cells:[],el:null};$.each(O.opts.cols,function(j,col){var data=null;"modelName"==col.field?data=O._getData(modelMetadata,"generalInformation","name"):"software"==col.field?data=O._getData(modelMetadata,"generalInformation","software"):"hazard"==col.field?(data=O._getScopeData(modelMetadata,"scope","hazard","hazardName"),"_list"!=col.formatter&&(data=Array.from(data).join(" "))):"environment"==col.field?(data=O._getScopeData(modelMetadata,"scope","product","productName"),"_list"!=col.formatter&&(data=Array.from(data).join(" "))):"modelType"==col.field?data=modelMetadata.modelType:"executionTime"==col.field?data=O._executionTimes[i]:"uploadDate"==col.field&&(data=O._uploadDates[i]),rowData.cells.push(data)}),O._tableData.push(rowData)},i=0;i<O._metadata.length;i++)_loop2(i);_log(O._tableData)}},{key:"_createFilter",value:function(){var O=this;_log("TABLE MAIN / _createFilter"),O._sets=O._sets||{},O._sets.software=new Set,O._sets.environment=new Set,O._sets.hazard=new Set,O._sets.modelType=new Set;for(var i=0;i<O._metadata.length;i++){var _modelMetadata2=O._metadata[i],software=O._getData(_modelMetadata2,"generalInformation","software"),environment=O._getScopeData(_modelMetadata2,"scope","product","productName"),hazard=O._getScopeData(_modelMetadata2,"scope","hazard","hazardName"),modelType=_modelMetadata2.modelType;software&&O._updateSet("software",software),environment&&environment.forEach(function(x){O._updateSet("environment",x)}),hazard&&hazard.forEach(function(x){O._updateSet("hazard",x)}),modelType&&O._updateSet("modelType",modelType)}O._$filter=$('<div class="filter">').attr("id",O.opts.ids.filter).appendTo(O._$container);var $navbar=$('<nav class="navbar navbar-expand-lg row justify-content-between"></nav>').appendTo(O._$filter);$('<button class="action action-pure collapsed" type="button" data-tooltip data-toggle="collapse" data-target="#mainTableFilterFacets" aria-controls="mainTableFilter" aria-expanded="false" title="Toggle Filter" aria-label="Toggle Filter"><span class="feather icon-sliders"></span></button>').appendTo($navbar).wrap('<div class="navbar-toggler col-auto order-1 filter-toggler"></div>'),$navbar.append('<div class="col-divider order-2 d-block d-lg-none"></div>'),O._$search=$('<input id="mainTableFilterSearch" class="form-control form-control-plaintext search-input" type="search" placeholder="Search Models" aria-label="Search Models" />').appendTo($navbar).wrap('<div class="col col-xxs-auto order-3 filter-search">').wrap('<div class="search w-100"></div>'),O._$searchClear=$('<button class="search-clear" data-clear="#mainTableFilterSearch"><i class="feather icon-x"></i></button>').insertAfter(O._$search),O._$search.on("keyup, change",function(event){O._updateFilter()}),$navbar.append('<div class="col-divider order-4 d-none d-xxs-block"></div>'),O._$facets=$('<div id="mainTableFilterFacets" class="collapse navbar-collapse row mt-1 mt-lg-0 facets"></div>'),O._$facets.appendTo($navbar).wrap('<div class="col-12 col-lg-8 order-5 order-xss-6 order-lg-5 filter-facets">'),$.each(O.opts.cols,function(i,col){if(col.field&&col.facet){var $facet=$('<select class="form-control form-control-sm" style="" multiple="multiple"></select>');$facet.appendTo(O._$facets);var $facetWrapper=$('<div class="col-12 col-xs-6 col-md-3 facet"></div>');col.facet.tooltip&&col.facet.placeholder&&$facetWrapper.attr("data-tooltip",col.facet.tooltip),col.facet.tooltip&&col.facet.placeholder&&$facetWrapper.attr("title","Filter by "+col.facet.placeholder),$facet.wrap($facetWrapper),col.id?$facet.id=col.id+"Facet":$facet.id="facet-"+$.now(),$facet.attr("id",$facet.id),col.facet.select2&&$facet.attr("data-sel2",col.facet.select2),col.facet.select2SingleRow&&$facet.attr("data-sel2-choice-single-row",col.facet.select2SingleRow),col.facet.placeholder&&$facet.attr("data-placeholder",col.facet.placeholder),col.facet.maxSelectable&&$facet.attr("data-maximum-selection-length",col.facet.maxSelectable),$facet.on("change",function(event){O._updateFilter()}),O._facets[col.field]={el:$facet},col.id&&O._sets[col.field]&&_appUI._populateSelect($facet,O._sets[col.field])}});var $facetsClear=$('<button class="action action-pure" data-tooltip title="Clear Filter"><i class="feather icon-x"></i></button>').appendTo(O._$facets).wrap('<div class="facets-clear"></div>'),facetsIds=[];$.each(O._facets,function(i,item){facetsIds.push("#"+item.el.id)}),$facetsClear.attr("data-clear",facetsIds.join(",")),_appUI._initClear(O._$navbar),_appUI._initSelect2(O._$facets),O._$counter=$('<small id="mainTableCounter"></small>').appendTo($navbar).wrap('<div class="col-auto align-items-center order-6 order-xxs-4 order-lg-6 mt-2 mt-xxs-0 filter-counter">')}},{key:"_updateCounter",value:function(){var O=this,counterText="";counterText=O._tableData.length-O._filtered.length>0?O._filtered.length+"/"+O._tableData.length:O._filtered.length,(counterText+=" models")&&O._$counter&&O._$counter.html(counterText)}},{key:"_search",value:async function(query){var O=this;_log("TABLE MAIN / _search : "+query,"secondary"),O._loader._setState(!0);var result=await _fetchData._json(window._endpoints.search,query);return O._highlight(query),O._loader._setState(!1),result}},{key:"_highlight",value:function(query){query&&query.length>0&&"%20"!=query&&$.each(this._tableData,function(rowIndex,rowData){rowData.el.find("td").each(function(j,td){var value=$(td).html();value=_formatter._searchHighlight(value,query),$(td).html(value)})})}},{key:"_updateFilter",value:async function(){var _this18=this,O=this;if(_log("TABLE MAIN / _updateFilter"),O._filtered=[],O._$filter){O._$table.find("mark").contents().unwrap();var searchQuery=void 0==O._$search.val()||""==O._$search.val()?"%20":O._$search.val().trim().toLowerCase(),searchResult=[];searchQuery&&(searchResult=await O._search(searchQuery)),$.each(O._tableData,function(rowIndex,rowData){var rowMatchesFilter=!0;searchResult.length>0&&!searchResult.includes(rowIndex)&&(rowMatchesFilter=!1),rowMatchesFilter&&$.each(O._facets,function(field,facet){var facetValue=facet.el.val();if($.isArray(facetValue)&&facetValue.length>0){var colIndex=_get(APPTableMT.prototype.__proto__||Object.getPrototypeOf(APPTableMT.prototype),"_getColIndexByField",_this18).call(_this18,field),cellData=rowData.cells[colIndex];if(cellData instanceof Set){var cellMatches=!1;$.each(facetValue,function(i,val){cellData.has(val)&&(cellMatches=!0)}),cellMatches||(rowMatchesFilter=!1)}else facetValue.includes(cellData)||(rowMatchesFilter=!1)}}),rowMatchesFilter&&!O._filtered.includes(rowIndex)&&O._filtered.push(rowIndex),rowMatchesFilter?rowData.el.removeClass("tr-hidden"):rowData.el.addClass("tr-hidden")}),O._updateStripes(),_log(O._filtered),$.isFunction(O.opts.on.updateFilter)&&O.opts.on.updateFilter.call(O,O,O._filtered),O._updateCounter()}}},{key:"_getSet",value:function(name){var O=this;return name in O._sets?O._sets.name:O._sets}},{key:"_updateSet",value:function(name,data){_log("TABLE MT / _updateSet"),console.log(this._sets,name,data),name&&this._sets[name].add(data)}},{key:"_getData",value:function(modelMetadata,toplevel,name){try{return modelMetadata[toplevel][name]}catch(err){return"no information for "+name}}},{key:"_getScopeData",value:function(modelMetadata,toplevel,sublevel,name){try{var subs=modelMetadata[toplevel][sublevel];return names=new Set,subs.forEach(function(it){var element=it[name];element||(element=it.name),names.add(element)}),names}catch(err){return(new Set).add("no information")}}}]),APPTableMT}(),APPUI=function(){function APPUI(settings){_classCallCheck(this,APPUI);this._debug=!0,this._opts=$.extend(!0,{},{on:{afterInit:null}},settings)}return _createClass(APPUI,[{key:"_createTableHead",value:function(settings){var $thead=$("<thead></thead>");return settings&&(settings.id&&$thead.attr("id",settings.id),settings.cols&&($.each(settings.cols,function(i,col){var $th=$("<th></th>").appendTo($thead);col.label&&$th.html("<span>"+col.label+"</span>"),col.id&&$th.attr("id",col.id),col.classes&&col.classes.th&&$th.addClass(col.classes.th),col.field&&$th.attr("data-field",col.field),col.sortable&&$th.attr("data-sortable",col.sortable),col.switchable&&$th.attr("data-switchable",col.switchable),col.sorter&&$th.attr("data-sorter",col.sorter),col.attribute&&col.attributes.th&&$.each(col.attributes.th,function(attr,val){$th.attr(attr,val)})}),$thead.wrapInner("<tr></tr>"))),$thead}},{key:"_createModal",value:function(settings,$container){return _log("UI / _createModal"),new APPModal(settings,$container)}},{key:"_createLoader",value:function(settings,$container){_log("UI / _createLoader");var loader={};return loader._$el=$('<div class="loader loading"></div>').appendTo($container),settings.classes&&loader._$el.addClass(settings.classes),loader._setState=function(state){_log("UI / loader._setState : "+state),state?loader._$el.addClass("loading"):loader._$el.removeClass("loading")},loader}},{key:"_createAlert",value:function(msg,settings,$container){_log("UI / _createAlert");var $alert=$('<div class="alert fade">'+msg+"</div>").appendTo($container);return settings.type?$alert.addClass("alert-"+settings.type):$alert.addClass("alert-info"),settings.state?$alert.addClass(settings.state):$alert.addClass("show"),settings.classes&&$alert.addClass(settings.classes),settings.dismissable&&($alert.addClass("alert-dismissable"),$alert.append('<button type="button" class="close close-sm" data-dismiss="alert" aria-label="Close"><i class="feather icon-x" aria-hidden="true"></i></button>')),$alert}},{key:"_populateSelect",value:function($select,options){$select&&options.forEach(function(entry){$select.append('<option value="'+entry+'">'+entry+"</option>")})}},{key:"_populateSelectByID",value:function(selectID,options){var $select=$(selectID);this._populateSelect($select,options)}},{key:"_initTooltips",value:function(container){_log("UI / _initTooltips"),($(container).length>0?$(container).find("[data-tooltip]"):$("[data-tooltip]")).each(function(i,el){$(el).tooltip({offset:10})})}},{key:"_initTdCollapse",value:function($table){_log("UI / _initTdCollapse");$table.find('td[data-td-collapse="true"]').each(function(i,td){var $td=$(td);if($td.wrapInner("<div></div>"),$td.children().outerHeight()>100){var collapseId="tdCollapse"+jQuery.now();$td.wrapInner('<div id="'+collapseId+'" class="collapse td-collapse"></div>');$('<a href="#" class="td-collapse-toggle collapsed" data-target="#'+collapseId+'" data-toggle="collapse" aria-expanded="false" aria-controls="'+collapseId+'"></a>').appendTo($td);$("#"+collapseId).collapse({toggle:!1})}})}},{key:"_initSelect2",value:function(container){_log("UI / _initSelect2"),($(container).length>0?$(container).find("select[data-sel2]"):$("select[data-sel2]")).each(function(i,el){var $el=$(el),select2Defaults={dropdownParent:$el.parent(),dropdownAutoWidth:!1,width:"100%"};(el.hasAttribute("data-sel2-size")&&"sm"==$el.data("sel2-size")||$el.hasClass("form-control-sm")||$el.hasClass("custom-select-sm"))&&(select2Defaults.selectionCssClass="select2-selection--sm",select2Defaults.dropdownCssClass="select2-dropdown--sm"),el.hasAttribute("data-allow-clear")&&1==$el.data("allow-clear")&&(select2Defaults.selectionCssClass+=" select2-selection--clear"),el.hasAttribute("data-sel2-max-height")&&(select2Defaults.selectionCssClass+=" select2-selection--max-height"),el.hasAttribute("data-sel2-choice-single-row")&&(select2Defaults.selectionCssClass+=" select2-selection--choice-single-row"),el.hasAttribute("data-maximum-selection-length")&&"1"==$el.data("maximum-selection-length")&&(select2Defaults.selectionCssClass+=" select2-selection--max-sel-1"),$el.select2(select2Defaults)})}},{key:"_initClear",value:function(container){_log("UI / _initClear"),($(container).length>0?$(container).find("[data-clear]"):$("[data-clear]")).each(function(i,el){var $clear=$(el);$clear.targets=$clear.data("clear"),$($clear.targets)?($clear.state=!1,$($clear.targets).on("change keyup",function(event){$clear.state=!1,$.each($($clear.targets),function(j,target){$(target).val().length>0&&($clear.addClass("visible"),$clear.state=!0)}),$clear.state?$clear.addClass("visible"):$clear.removeClass("visible")}),$clear.on("click",function(event){$.each($($clear.targets),function(j,target){var $target=$(target);$target.is("select")?$target.val("").trigger("change"):$target.is("input")&&$target.val("").trigger("change")}),$clear.state=!1,$clear.removeClass("visible")})):$clear.remove()})}},{key:"_initTouchspin",value:function(container){_log("UI / _initTouchspin"),($(container).length>0?$(container).find("input[data-touchspin]"):$("input[data-touchspin]")).each(function(i,el){var $el=$(el),touchspinDefaults={buttondown_class:"btn btn-outline-secondary",buttonup_class:"btn btn-outline-secondary",decimals:0,initval:0,mousewheel:!0,step:1};el.hasAttribute("data-touchspin-min")&&(touchspinDefaults.min=$el.data("touchspin-min")),el.hasAttribute("data-touchspin-max")&&(touchspinDefaults.max=$el.data("touchspin-max")),el.hasAttribute("data-touchspin-step")&&(touchspinDefaults.step=$el.data("touchspin-step")),el.hasAttribute("data-touchspin-decimals")&&(touchspinDefaults.decimals=$el.data("touchspin-decimals")),el.hasAttribute("data-touchspin-initval")&&(touchspinDefaults.initval=$el.data("touchspin-initval")),el.hasAttribute("data-touchspin-prefix")&&(touchspinDefaults.prefix=$el.data("touchspin-prefix")),el.hasAttribute("data-touchspin-postfix")&&(touchspinDefaults.postfix=$el.data("touchspin-postfix")),$el.TouchSpin(touchspinDefaults)})}},{key:"_initDatepicker",value:function(container){_log("UI / _initDatepicker"),($(container).length>0?$(container).find("[data-datepicker]"):$("[data-datepicker]")).each(function(i,el){$(el).datepicker({format:{toDisplay:function(date,format,language){var d=new Date(date),day=d.getDate(),month=d.getMonth();return d.getFullYear()+"-"+month+"-"+day},toValue:function(date,format,language){return date}},todayHighlight:!0})})}},{key:"_initRangeslider",value:function(container){_log("UI / _initRangeslider"),($(container).length>0?$(container).find("[data-rangeslider]"):$("[data-rangeslider]")).each(function(i,el){var $el=$(el),rangesliderDefaults={drag_interval:!0};el.hasAttribute("data-type")&&"double"==$el.data("type")?(el.hasAttribute("data-control-double-from")&&$($el.data("control-double-from")).length>0&&($el.$inputDoubleFrom=$($el.data("control-double-from")),$el.$inputDoubleFrom.on("change",function(event){var min=$el.data("rangeslider").result.min,to=$el.data("rangeslider").result.to,val=$el.$inputDoubleFrom.prop("value");val<min?val=min:val>to&&(val=to),$el.data("ionRangeSlider").update({from:val}),$el.$inputDoubleFrom.val(val)})),el.hasAttribute("data-control-double-to")&&$($el.data("control-double-to")).length>0&&($el.$inputDoubleTo=$($el.data("control-double-to")),$el.$inputDoubleTo.on("change",function(event){var max=$el.data("rangeslider").result.max,from=$el.data("rangeslider").result.from,val=$el.$inputDoubleTo.prop("value");val<from?val=from:val>max&&(val=max),$el.data("rangeslider").update({to:val}),$el.$inputDoubleTo.val(val)})),($el.$inputDoubleFrom||$el.$inputDoubleTo)&&(rangesliderDefaults=$.merge({drag_interval:!1,onStart:function(data){$el.updateInputs(data)},onChange:function(data){$el.updateInputs(data)},onFinish:function(data){$el.updateInputs(data)}},rangesliderDefaults),$el.updateInputs=function(data){from=data.from,to=data.to,$el.$inputDoubleFrom.prop("value",from),$el.$inputDoubleTo.prop("value",to)})):(el.hasAttribute("data-control-single")&&$($el.data("control-single")).length>0&&($el.$inputSingle=$($el.data("control-single")),$el.$inputSingle.on("change",function(event){var min=$el.data("rangeslider").result.min,max=$el.data("rangeslider").result.max,val=$el.$inputSingle.prop("value");val<min?val=min:val>max&&(val=max),$el.data("rangeslider").update({from:val}),$el.$inputSingle.val(val)})),$el.$inputSingle&&(rangesliderDefaults=$.merge({drag_interval:!1,onStart:function(data){$el.updateInputs(data)},onChange:function(data){$el.updateInputs(data)},onFinish:function(data){$el.updateInputs(data)}},rangesliderDefaults),$el.updateInputs=function(data){from=data.from,$el.$inputSingle.prop("value",from)})),$el.ionRangeSlider(rangesliderDefaults),$el.data("rangeslider",$el.data("ionRangeSlider"))})}},{key:"_initFormValidation",value:function(container){_log("UI / _initFormValidation");var $elems=$(container).length>0?$(container).find("[data-validate]"):$("[data-validate]");$elems.each(function(i,el){var $validations=$(el).find(".validate-me");Array.prototype.filter.call($elems,function(form){form.addEventListener("submit",function(event){!1===form.checkValidity()&&(e.preventDefault(),e.stopPropagation()),$validations.each(function(j,val){$(val).addClass("was-validated")})},!1)})})}},{key:"_initFormItems",value:function(container){var O=this;_log("UI / _initFormItems"),O._initClear(container),O._initTouchspin(container),O._initSelect2(container),O._initDatepicker(container),O._initRangeslider(container)}},{key:"_initAll",value:function(){var O=this;_log("UI / _initAll"),O._initClear(),O._initTouchspin(),O._initSelect2(),O._initDatepicker(),O._initRangeslider(),O._initTable(),O._initFormValidation()}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPUI}(),_appUI=_appUI||new APPUI,APPLandingpage=function(){function APPLandingpage(settings,$container,metadata){_classCallCheck(this,APPLandingpage);var O=this;O._metadata=metadata,O._$container=$container,O._debug=!0,O._opts=$.extend(!0,{},{header:{brand:{logo:"assets/img/bfr_logo.gif",title:"FSK-Web Landing Page Test"},nav:[{title:"MenuItem",href:"#"}]},mainTable:{},on:{afterInit:null}},settings),O._create(),$.isFunction(O.opts.on.afterInit)&&O.opts.on.afterInit.call(O)}return _createClass(APPLandingpage,[{key:"_create",value:async function(){var O=this;if(_log("LANDINGPAGE / _create","primary"),O.opts.header&&(O._$header=O._createHeader(O.opts.header).appendTo(O._$container)),"undefined"!=_typeof(window._endpoints)){var mtSettings=$.extend(!0,{},{endpoints:window._endpoints,data:{metadata:O._metadata,uploadDates:O._uploadDates,executionTimes:O._executionTimes}},O.opts.mainTable);O._mainTable=new APPTableMT(mtSettings,O._$container,O._metadata),_appUI._initTooltips()}else _appUI._createAlert("Cannot create main table, no endpoints defined",{},O._$container)}},{key:"_createHeader",value:function(settings){_log("LANDINGPAGE / _create header");var $header=$('<header class="page-header"></header>');return $header.navBar=$('<nav class="navbar navbar-expand">').appendTo($header),settings.brand&&($header.navBrand=$('<div class="navbar-brand"></div>').appendTo($header.navBar),settings.brand.logo&&($('<span class="brand-logo"><img src="'+settings.brand.logo+'" alt="" /></span>').appendTo($header.navBrand),settings.brand.title&&$('<span class="brand-divider"></span>').appendTo($header.navBrand)),settings.brand.title&&$('<span class="brand-typo">'+settings.brand.title+"</span>").appendTo($header.navBrand)),settings.nav&&settings.nav.length>0&&($header.nav=$('<ul class="navbar-nav mt-2 mt-sm-0 ml-auto"></ul>').appendTo($header.navBar),$header.navToggle=$('<button id="menuToggle" class="action action-pure action-lg" data-toggle="dropdown" aria-expanded="false" role="button"><i class="feather icon-menu"></i></button>').appendTo($header.nav).wrap('<li class="nav-item"></li>').wrap('<div class="dropdown"></div>'),$header.navDropdownMenu=$('<div class="dropdown-menu dropdown-menu-right" aria-labeledby="menuToggle"></div>').insertAfter($header.navToggle),$.each(settings.nav,function(i,link){link.target=link.target?link.target:"_self";$('<a href="'+link.href+'" target="'+link.target+'" class="dropdown-item">'+link.title+"</a>").appendTo($header.navDropdownMenu)})),$header}},{key:"opts",get:function(){return this._opts},set:function(settings){this._opts=$.extend(!0,{},this.opts,settings)}}]),APPLandingpage}();